{
  boolean localLockOwner=!lockOwnerTx.isRemote();
  if (localLockOwner) {
    if (thisTx.hasLockAtOrigin(lockOwnerTx.getRemoteLockIntention())) {
      if (trace)       log.tracef("Same key deadlock detected: lock owner tries to acquire lock remotely on %s but we have it!",key);
      return true;
    }
  }
 else {
    if (trace)     log.tracef("Lock owner is remote: %s",lockOwnerTx);
  }
  return false;
}
