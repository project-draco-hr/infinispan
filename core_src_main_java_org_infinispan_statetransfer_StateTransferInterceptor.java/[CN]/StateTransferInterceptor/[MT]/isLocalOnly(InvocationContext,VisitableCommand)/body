{
  boolean transactionalWrite=ctx.isInTxScope() && command instanceof WriteCommand;
  boolean cacheModeLocal=false;
  if (command instanceof FlagAffectedCommand) {
    cacheModeLocal=((FlagAffectedCommand)command).hasFlag(Flag.CACHE_MODE_LOCAL);
  }
  return cacheModeLocal || transactionalWrite;
}
