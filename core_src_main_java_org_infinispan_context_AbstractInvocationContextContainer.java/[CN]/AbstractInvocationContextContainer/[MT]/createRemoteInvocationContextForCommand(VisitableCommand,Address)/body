{
  if (cacheCommand instanceof FlagAffectedCommand) {
    InvocationContext context=createRemoteInvocationContext(origin);
    FlagAffectedCommand command=(FlagAffectedCommand)cacheCommand;
    Set<Flag> flags=command.getFlags();
    if (flags != null && !flags.isEmpty()) {
      context=new InvocationContextFlagsOverride(context,flags);
      ctxHolder.set(context);
    }
    return context;
  }
 else {
    return this.createRemoteInvocationContext(origin);
  }
}
