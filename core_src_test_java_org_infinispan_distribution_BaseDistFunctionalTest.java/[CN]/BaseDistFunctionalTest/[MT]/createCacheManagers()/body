{
  Configuration c=getDefaultClusteredConfig(sync ? DIST_SYNC : DIST_ASYNC);
  if (!testRetVals) {
    c.setUnsafeUnreliableReturnValues(true);
    c.setIsolationLevel(IsolationLevel.REPEATABLE_READ);
  }
  if (tx)   c.setTransactionManagerLookupClass(DummyTransactionManagerLookup.class.getName());
  caches=createClusteredCaches(4,"dist",c);
  c1=caches.get(0);
  c2=caches.get(1);
  c3=caches.get(2);
  c4=caches.get(3);
}
