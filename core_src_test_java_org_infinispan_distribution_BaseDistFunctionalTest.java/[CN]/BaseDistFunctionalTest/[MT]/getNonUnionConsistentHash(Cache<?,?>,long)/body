{
  long expTime=System.currentTimeMillis() + timeout;
  while (System.currentTimeMillis() < expTime) {
    ConsistentHash ch=c.getAdvancedCache().getDistributionManager().getConsistentHash();
    if (!(ch instanceof UnionConsistentHash))     return ch;
    TestingUtil.sleepThread(100);
  }
  throw new RuntimeException("Timed out waiting for a non-UnionConsistentHash to be present on cache [" + addressOf(c) + "]");
}
