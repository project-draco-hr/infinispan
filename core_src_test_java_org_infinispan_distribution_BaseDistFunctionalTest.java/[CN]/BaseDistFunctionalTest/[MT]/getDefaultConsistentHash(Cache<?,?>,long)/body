{
  long expTime=System.currentTimeMillis() + timeout;
  while (System.currentTimeMillis() < expTime) {
    ConsistentHash ch=getDistributionManager(c).getConsistentHash();
    if (ch instanceof DefaultConsistentHash)     return (DefaultConsistentHash)ch;
    TestingUtil.sleepThread(100);
  }
  throw new RuntimeException("Timed out waiting for a DefaultConsistentHash to be present on cache [" + addressOf(c) + "]");
}
