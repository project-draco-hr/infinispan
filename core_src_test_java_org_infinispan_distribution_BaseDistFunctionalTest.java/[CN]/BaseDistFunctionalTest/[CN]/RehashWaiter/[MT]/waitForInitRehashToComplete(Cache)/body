{
  int gracetime=60000;
  long giveup=System.currentTimeMillis() + gracetime;
  for (  Cache c : caches) {
    DistributionManagerImpl dmi=(DistributionManagerImpl)TestingUtil.extractComponent(c,DistributionManager.class);
    while (!dmi.joinComplete) {
      if (System.currentTimeMillis() > giveup)       throw new RuntimeException("Timed out waiting for initial join sequence to complete!");
      LockSupport.parkNanos(TimeUnit.SECONDS.toNanos(1));
    }
  }
}
