{
  if (cacheConfigStream == null) {
    throw new IllegalArgumentException("null 'cacheConfigStream' in constructor call.");
  }
  if (bindAddress == null) {
    throw new IllegalArgumentException("null 'bindAddress' in constructor call.");
  }
  try {
    CacheManager manager=new DefaultCacheManager(cacheConfigStream);
    ServerBootstrap bootstrap=new ServerBootstrap(new NioServerSocketChannelFactory(Executors.newCachedThreadPool(),Executors.newCachedThreadPool()));
    bootstrap.setPipelineFactory(new WebSocketServerPipelineFactory(manager));
    bootstrap.bind(bindAddress);
  }
  finally {
    cacheConfigStream.close();
  }
}
