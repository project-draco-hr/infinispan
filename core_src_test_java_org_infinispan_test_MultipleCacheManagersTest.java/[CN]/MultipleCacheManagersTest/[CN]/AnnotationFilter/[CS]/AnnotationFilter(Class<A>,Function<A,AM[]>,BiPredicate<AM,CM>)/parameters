Class<A> annotationClazz
Function<A,AM[]> modesRetriever
BiPredicate<AM,CM> modeChecker
