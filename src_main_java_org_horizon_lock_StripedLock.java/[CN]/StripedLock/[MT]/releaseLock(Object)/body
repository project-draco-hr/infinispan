{
  ReentrantReadWriteLock lock=getLock(key);
  if (lock.isWriteLockedByCurrentThread()) {
    lock.writeLock().unlock();
    if (log.isTraceEnabled())     log.trace("WL released for '" + key + "'");
  }
 else {
    lock.readLock().unlock();
    if (log.isTraceEnabled())     log.trace("RL released for '" + key + "'");
  }
}
