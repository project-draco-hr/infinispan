{
  testCount++;
  logTestStart(m);
  Cache<Object,Object> cache1, cache2, cache3, cache4;
  cache1=createCacheManager().getCache(cacheName);
  writeInitialData(cache1);
  JoiningNode node2=new JoiningNode(createCacheManager());
  cache2=node2.getCache(cacheName);
  cache1.put("delay",new DelayTransfer());
  node2.waitForJoin(60000,cache1,cache2);
  node2.verifyStateTransfer(new CacheVerifier(cache2));
  final JoiningNode node3=new JoiningNode(createCacheManager());
  final JoiningNode node4=new JoiningNode(createCacheManager());
  Thread t1=new Thread(new Runnable(){
    public void run(){
      node3.getCache(cacheName);
    }
  }
);
  t1.setName("CacheStarter-Cache3");
  t1.start();
  Thread t2=new Thread(new Runnable(){
    public void run(){
      node4.getCache(cacheName);
    }
  }
);
  t2.setName("CacheStarter-Cache4");
  t2.start();
  t1.join();
  t2.join();
  cache3=node3.getCache(cacheName);
  cache4=node4.getCache(cacheName);
  node3.waitForJoin(120000,cache1,cache2,cache3,cache4);
  node4.waitForJoin(120000,cache1,cache2,cache3,cache4);
  node3.verifyStateTransfer(new CacheVerifier(cache3));
  node4.verifyStateTransfer(new CacheVerifier(cache4));
  logTestEnd(m);
}
