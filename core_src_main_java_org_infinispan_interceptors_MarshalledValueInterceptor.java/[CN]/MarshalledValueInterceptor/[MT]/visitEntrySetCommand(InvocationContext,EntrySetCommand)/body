{
  Set<InternalCacheEntry> entries=(Set<InternalCacheEntry>)invokeNextInterceptor(ctx,command);
  Set<InternalCacheEntry> copy=new HashSet<InternalCacheEntry>(entries.size());
  for (  InternalCacheEntry entry : entries) {
    Object key=entry.getKey();
    Object value=entry.getValue();
    if (key instanceof MarshalledValue) {
      key=((MarshalledValue)key).get();
    }
    if (value instanceof MarshalledValue) {
      value=((MarshalledValue)value).get();
    }
    InternalCacheEntry newEntry=Immutables.immutableInternalCacheEntry(InternalEntryFactory.create(key,value,entry.getCreated(),entry.getLifespan(),entry.getLastUsed(),entry.getMaxIdle()));
    copy.add(newEntry);
  }
  return Immutables.immutableSetWrap(copy);
}
