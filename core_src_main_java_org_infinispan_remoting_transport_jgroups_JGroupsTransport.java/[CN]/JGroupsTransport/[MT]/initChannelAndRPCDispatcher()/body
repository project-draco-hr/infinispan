{
  buildChannel();
  String transportNodeName=c.getTransportNodeName();
  if (transportNodeName != null && transportNodeName.length() > 0) {
    long range=Short.MAX_VALUE * 2;
    long randomInRange=(long)((Math.random() * range) % range) + 1;
    transportNodeName=transportNodeName + "-" + randomInRange;
    channel.setName(transportNodeName);
  }
  channel.setOpt(Channel.LOCAL,false);
  channel.setOpt(Channel.BLOCK,true);
  dispatcher=new CommandAwareRpcDispatcher(channel,this,asyncExecutor,inboundInvocationHandler,flushTracker,distributedSyncTimeout);
  MarshallerAdapter adapter=new MarshallerAdapter(marshaller);
  dispatcher.setRequestMarshaller(adapter);
  dispatcher.setResponseMarshaller(adapter);
}
