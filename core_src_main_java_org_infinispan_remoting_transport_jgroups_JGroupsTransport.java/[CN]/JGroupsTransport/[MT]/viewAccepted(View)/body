{
  Vector<org.jgroups.Address> newMembers=newView.getMembers();
  List<Address> oldMembers=null;
  boolean hasNotifier=notifier != null;
  Notify n=null;
  if (hasNotifier) {
    if (newView instanceof MergeView) {
      if (log.isInfoEnabled())       if (log.isInfoEnabled())       log.receivedMergedView(newView);
      n=new NotifyMerge();
    }
 else {
      if (log.isInfoEnabled())       if (log.isInfoEnabled())       log.receivedClusterView(newView);
      n=new NotifyViewChange();
    }
  }
synchronized (membersListLock) {
    boolean needNotification=false;
    if (newMembers != null) {
      oldMembers=members;
      members=fromJGroupsAddressList(newMembers);
      needNotification=true;
    }
    coordinator=(members != null && !members.isEmpty() && members.get(0).equals(getAddress()));
    if (needNotification && n != null)     n.emitNotification(oldMembers,newView);
    membersListLock.notifyAll();
  }
}
