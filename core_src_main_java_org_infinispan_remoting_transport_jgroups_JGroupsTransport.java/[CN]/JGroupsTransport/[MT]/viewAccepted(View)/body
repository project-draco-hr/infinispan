{
  Vector<org.jgroups.Address> newMembers=newView.getMembers();
  List<Address> oldMembers=null;
  Notify n=null;
  if (newView instanceof MergeView) {
    if (log.isInfoEnabled())     log.info("Received new, MERGED cluster view: {0}",newView);
    if (notifier != null)     n=new NotifyMerge();
  }
 else {
    if (log.isInfoEnabled())     log.info("Received new cluster view: {0}",newView);
    if (notifier != null)     n=new NotifyViewChange();
  }
synchronized (membersListLock) {
    boolean needNotification=false;
    if (newMembers != null) {
      oldMembers=members;
      members=fromJGroupsAddressList(newMembers);
      needNotification=true;
    }
    coordinator=(members != null && !members.isEmpty() && members.get(0).equals(getAddress()));
    if (needNotification && n != null) {
      n.notify();
    }
    membersListLock.notifyAll();
  }
}
