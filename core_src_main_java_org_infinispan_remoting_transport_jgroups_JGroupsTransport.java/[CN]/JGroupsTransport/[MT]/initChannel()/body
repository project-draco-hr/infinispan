{
  if (channel == null) {
    createdChannel=true;
    buildChannel();
    String transportNodeName=configuration.getTransportNodeName();
    if (transportNodeName != null && transportNodeName.length() > 0) {
      long range=Short.MAX_VALUE * 2;
      long randomInRange=(long)((Math.random() * range) % range) + 1;
      transportNodeName=transportNodeName + "-" + randomInRange;
      channel.setName(transportNodeName);
    }
  }
  channel.setOpt(Channel.LOCAL,false);
  if (configuration.hasTopologyInfo()) {
    ((JChannel)channel).setAddressGenerator(new AddressGenerator(){
      public org.jgroups.Address generateAddress(){
        return TopologyUUID.randomUUID(channel.getName(),configuration.getSiteId(),configuration.getRackId(),configuration.getMachineId());
      }
    }
);
  }
}
