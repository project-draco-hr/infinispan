{
  StateTransferMonitor mon=null;
  try {
    if (trace)     log.trace("Received state for cache named '%s'.  Attempting to apply state.",cacheName);
    mon=stateTransfersInProgress.get(cacheName);
    inboundInvocationHandler.applyState(cacheName,istream);
    mon.notifyStateReceiptSucceeded();
  }
 catch (  Exception e) {
    mon.notifyStateReceiptFailed(e instanceof StateTransferException ? (StateTransferException)e : new StateTransferException(e));
    log.error("Caught while requesting or applying state",e);
  }
 finally {
    Util.close(istream);
  }
}
