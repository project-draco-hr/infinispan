{
  ProtocolStack stack;
  if (channel != null && (stack=channel.getProtocolStack()) != null) {
    if (stack.findProtocol(STREAMING_STATE_TRANSFER.class) == null) {
      log.error("Channel does not contain STREAMING_STATE_TRANSFER.  Cannot support state transfers!");
      return false;
    }
  }
 else {
    log.warn("Channel not set up properly!");
    return false;
  }
  return true;
}
