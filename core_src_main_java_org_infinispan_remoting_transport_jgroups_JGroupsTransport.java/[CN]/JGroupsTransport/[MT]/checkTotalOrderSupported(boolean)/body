{
  if (!anycast && channel.getProtocolStack().findProtocol(SEQUENCER.class) == null) {
    throw new ConfigurationException("In order to support total order based transaction, the SEQUENCER protocol " + "must be present in the JGroups's config.");
  }
 else   if (anycast && channel.getProtocolStack().findProtocol(TOA.class) == null) {
    throw new ConfigurationException("In order to support total order based transaction, the TOA protocol " + "must be present in the JGroups's config.");
  }
}
