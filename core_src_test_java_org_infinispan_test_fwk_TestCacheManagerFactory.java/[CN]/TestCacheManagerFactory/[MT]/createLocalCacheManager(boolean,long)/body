{
  GlobalConfiguration globalConfiguration=GlobalConfiguration.getNonClusteredDefault();
  globalConfiguration.setAllowDuplicateDomains(true);
  amendMarshaller(globalConfiguration);
  minimizeThreads(globalConfiguration);
  Configuration c=new Configuration();
  markAsTransactional(transactional,c);
  if (lockAcquisitionTimeout > -1)   c.setLockAcquisitionTimeout(lockAcquisitionTimeout);
  updateTransactionSupport(c);
  return newDefaultCacheManager(true,globalConfiguration,c,false);
}
