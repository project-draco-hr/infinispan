{
  for (  Map.Entry<EmbeddedCacheManager,Throwable> cmEntry : cacheManagers.entrySet()) {
    EmbeddedCacheManager key=cmEntry.getKey();
    if (isCacheInvocationsAllowed(key)) {
      String thName=Thread.currentThread().getName();
      String errorMessage='\n' + "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n" + "!!!!!! ("+ thName+ ") Exiting because "+ testName+ " has NOT shut down all the cache managers it has started !!!!!!!\n"+ "!!!!!! ("+ thName+ ") See allocation stacktrace to find out where still-running cacheManager ("+ key+ ") was created: !!!!!!!\n"+ "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n";
      Throwable allocationThrowable=cmEntry.getValue();
      log.errorf(allocationThrowable,errorMessage);
      System.err.println(errorMessage);
      allocationThrowable.printStackTrace();
      shuttingDown=true;
      try {
        Thread.sleep(60000);
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
      System.exit(9);
    }
  }
  cacheManagers.clear();
}
