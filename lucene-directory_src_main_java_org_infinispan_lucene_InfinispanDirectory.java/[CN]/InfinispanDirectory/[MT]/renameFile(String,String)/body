{
  checkIsOpen();
  CacheKey fromKey=new FileCacheKey(indexName,from);
  FileMetadata fileFrom=(FileMetadata)cache.remove(fromKey);
  cache.put(new FileCacheKey(indexName,to),fileFrom);
  Set<String> fileList=getFileList();
  fileList.remove(from);
  fileList.add(to);
  cache.put(fileListCacheKey,fileList);
  int i=-1;
  Object ob;
  do {
    ChunkCacheKey fromChunkKey=new ChunkCacheKey(indexName,from,++i);
    ob=cache.get(fromChunkKey);
    if (ob == null) {
      break;
    }
    ChunkCacheKey toChunkKey=new ChunkCacheKey(indexName,to,i);
    cache.put(toChunkKey,ob);
  }
 while (true);
  if (log.isTraceEnabled()) {
    log.trace("Renamed file from: {0} to: {1} in index {2}",from,to,indexName);
  }
}
