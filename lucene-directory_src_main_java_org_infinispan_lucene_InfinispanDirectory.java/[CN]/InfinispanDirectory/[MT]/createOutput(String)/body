{
  final FileCacheKey key=new FileCacheKey(indexName,name);
  FileMetadata newFileMetadata=new FileMetadata();
  FileMetadata previous=(FileMetadata)cache.putIfAbsent(key,newFileMetadata);
  FileMetadata usedMetadata=previous == null ? newFileMetadata : previous;
  return new InfinispanIndexIO.InfinispanIndexOutput(cache,key,chunkSize,usedMetadata);
}
