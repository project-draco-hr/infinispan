{
  if (cmd == null)   throw new NullPointerException("Unable to execute a null command!  Message was " + req);
  if (trace)   log.trace("Attempting to execute command: {0} [sender={1}]",cmd,req.getSrc());
  boolean unlock=false;
  try {
    distributedSync.acquireProcessingLock(false,distributedSyncTimeout,MILLISECONDS);
    unlock=true;
    DistributedSync.SyncResponse sr=distributedSync.blockUntilReleased(distributedSyncTimeout,MILLISECONDS);
    boolean replayIgnored=sr == DistributedSync.SyncResponse.STATE_ACHIEVED;
    if (trace)     log.trace("Enough waiting; replayIgnored = {0}, sr {1}",replayIgnored,sr);
    Object retval;
    try {
      retval=inboundInvocationHandler.handle(cmd);
    }
 catch (    IllegalStateException ise) {
      newCacheStarting.set(true);
      if (trace)       log.trace("Unable to execute command, cache not in a receptive state: " + ise.getMessage());
      return RequestIgnoredResponse.INSTANCE;
    }
    if (replayIgnored) {
      return new ExtendedResponse(retval,true);
    }
 else {
      if (cmd instanceof ClusteredGetCommand)       return retval;
 else       return null;
    }
  }
  finally {
    if (unlock)     distributedSync.releaseProcessingLock();
  }
}
