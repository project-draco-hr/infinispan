{
  if (instance == null)   throw new NullPointerException("Cannot make an MBean wrapper for null instance");
  this.obj=instance;
  this.objectClass=instance.getClass();
  this.mBeanMetadata=mBeanMetadata;
  InvokableMBeanAttributeInfo info;
  int i=0;
  attInfos=new MBeanAttributeInfo[mBeanMetadata.getAttributeMetadata().size()];
  for (  JmxAttributeMetadata attributeMetadata : mBeanMetadata.getAttributeMetadata()) {
    info=toJmxInfo(attributeMetadata);
    atts.put(info.getMBeanAttributeInfo().getName(),info);
    attInfos[i++]=info.getMBeanAttributeInfo();
    if (trace)     log.tracef("Attribute %s [r=%b,w=%b,is=%b,type=%s]",info.getMBeanAttributeInfo().getName(),info.getMBeanAttributeInfo().isReadable(),info.getMBeanAttributeInfo().isWritable(),info.getMBeanAttributeInfo().isIs(),info.getMBeanAttributeInfo().getType());
  }
  MBeanOperationInfo op;
  opInfos=new MBeanOperationInfo[mBeanMetadata.getOperationMetadata().size()];
  i=0;
  for (  JmxOperationMetadata operation : mBeanMetadata.getOperationMetadata()) {
    op=toJmxInfo(operation);
    opInfos[i++]=op;
    if (trace)     log.tracef("Operation %s %s",op.getReturnType(),op.getName());
  }
}
