import re
import subprocess
addresses = []
VIEW_TO_USE = '3'
expr = re.compile(('.*Received new cluster view.*\\|%s. \\[(.*)\\].*' % VIEW_TO_USE))
find(expr)
i = 1
sed = 'sed '
for a in addresses:
    sed += ("-e 's/%s/%s/g' " % (a, ('CACHE%s' % i)))
    i += 1
sed += ' infinispan.log > infinispan0.log'
print '\n  \n  INFINISPAN Log file fixer.  Makes log files more readable by replacing ugly JGroups addresses to more friendly CACHE1, CACHE2, etc addresses.\n\n  Usage:\n\n    $ bin/fixlogs.py\n\n  TODO: be able to specify which view to selec as the correct one, and to specify input and output files.\n\n'
print 'TODO execute this sed script automatically!'
print sed
print '\n\n\n'
