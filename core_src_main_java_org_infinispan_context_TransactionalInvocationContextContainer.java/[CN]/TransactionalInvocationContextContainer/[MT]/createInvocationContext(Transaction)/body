{
  if (tx == null)   throw new IllegalStateException("This is a tx cache!");
  LocalTxInvocationContext localContext=new LocalTxInvocationContext();
  LocalTransaction localTransaction=transactionTable.getLocalTransaction(tx);
  localContext.setLocalTransaction(localTransaction);
  localContext.setTransaction(tx);
  ctxHolder.set(localContext);
  return localContext;
}
