{
  ClientListener l=listener.getClass().getAnnotation(ClientListener.class);
  if (!l.useRawData()) {
    throw new IllegalArgumentException("The client listener must use raw data");
  }
  if (!l.filterFactoryName().equals(QUERY_DSL_FILTER_FACTORY_NAME)) {
    throw new IllegalArgumentException("The client listener must use the '" + QUERY_DSL_FILTER_FACTORY_NAME + "' filter factory");
  }
  if (!l.converterFactoryName().equals(QUERY_DSL_FILTER_FACTORY_NAME)) {
    throw new IllegalArgumentException("The client listener must use the '" + QUERY_DSL_FILTER_FACTORY_NAME + "' converter factory");
  }
  Object[] factoryParams=makeFactoryParams(query);
  remoteCache.addClientListener(listener,factoryParams,null);
}
