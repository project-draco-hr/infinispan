{
  final boolean expectedExposeGlobalJmxStatistics=true;
  final InfinispanEmbeddedCacheManagerFactoryBean objectUnderTest=new InfinispanEmbeddedCacheManagerFactoryBean(){
    @Override protected EmbeddedCacheManager createCacheManager(    ConfigurationContainer template){
      return TestCacheManagerFactory.createCacheManager(template.globalConfiguration,template.defaultConfiguration);
    }
  }
;
  objectUnderTest.setExposeGlobalJmxStatistics(expectedExposeGlobalJmxStatistics);
  objectUnderTest.afterPropertiesSet();
  final EmbeddedCacheManager embeddedCacheManager=objectUnderTest.getObject();
  assertEquals("SpringEmbeddedCacheManagerFactoryBean should have used explicitly set ExposeGlobalJmxStatistics. However, it didn't.",expectedExposeGlobalJmxStatistics,embeddedCacheManager.getGlobalConfiguration().isExposeGlobalJmxStatistics());
  embeddedCacheManager.stop();
}
