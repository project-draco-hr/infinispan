{
  final String expectedJmxDomain="expected.jmx.Domain";
  final InfinispanEmbeddedCacheManagerFactoryBean objectUnderTest=new InfinispanEmbeddedCacheManagerFactoryBean();
  objectUnderTest.setJmxDomain(expectedJmxDomain);
  objectUnderTest.afterPropertiesSet();
  withCacheManager(new CacheManagerCallable(objectUnderTest.getObject()){
    @Override public void call(){
      assertEquals("SpringEmbeddedCacheManagerFactoryBean should have used explicitly set JmxDomain. However, it didn't.",expectedJmxDomain,cm.getCacheManagerConfiguration().globalJmxStatistics().domain());
    }
  }
);
}
