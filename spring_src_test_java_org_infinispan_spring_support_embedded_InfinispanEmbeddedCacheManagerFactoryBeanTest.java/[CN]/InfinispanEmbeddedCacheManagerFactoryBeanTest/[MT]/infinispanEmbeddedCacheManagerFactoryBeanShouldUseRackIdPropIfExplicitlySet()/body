{
  final String expectedRackId="expected.rack.Id";
  final InfinispanEmbeddedCacheManagerFactoryBean objectUnderTest=new InfinispanEmbeddedCacheManagerFactoryBean();
  objectUnderTest.setRackId(expectedRackId);
  objectUnderTest.afterPropertiesSet();
  final EmbeddedCacheManager embeddedCacheManager=objectUnderTest.getObject();
  assertEquals("SpringEmbeddedCacheManagerFactoryBean should have used explicitly set RackId. However, it didn't.",expectedRackId,embeddedCacheManager.getGlobalConfiguration().getRackId());
  embeddedCacheManager.stop();
}
