{
  final String expectedAsyncListenerExecutorFactoryClass=MockExecutorFatory.class.getName();
  final InfinispanEmbeddedCacheManagerFactoryBean objectUnderTest=new TestInfinispanEmbeddedCacheManagerFactoryBean();
  objectUnderTest.setAsyncListenerExecutorFactoryClass(expectedAsyncListenerExecutorFactoryClass);
  objectUnderTest.afterPropertiesSet();
  withCacheManager(new CacheManagerCallable(objectUnderTest.getObject()){
    @Override public void call(){
      assertEquals("SpringEmbeddedCacheManagerFactoryBean should have used explicitly set AsyncListenerExecutorFactoryClass. However, it didn't.",expectedAsyncListenerExecutorFactoryClass,cm.getCacheManagerConfiguration().asyncListenerExecutor().factory().getClass().getName());
    }
  }
);
}
