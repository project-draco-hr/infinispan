{
  final InfinispanEmbeddedCacheManagerFactoryBean objectUnderTest=new InfinispanEmbeddedCacheManagerFactoryBean();
  objectUnderTest.setShutdownHookBehavior(ShutdownHookBehavior.DONT_REGISTER.name());
  objectUnderTest.afterPropertiesSet();
  final EmbeddedCacheManager embeddedCacheManager=objectUnderTest.getObject();
  assertEquals("SpringEmbeddedCacheManagerFactoryBean should have used explicitly set ShutdownHookBehavior. However, it didn't.",ShutdownHookBehavior.DONT_REGISTER,embeddedCacheManager.getGlobalConfiguration().getShutdownHookBehavior());
  embeddedCacheManager.stop();
}
