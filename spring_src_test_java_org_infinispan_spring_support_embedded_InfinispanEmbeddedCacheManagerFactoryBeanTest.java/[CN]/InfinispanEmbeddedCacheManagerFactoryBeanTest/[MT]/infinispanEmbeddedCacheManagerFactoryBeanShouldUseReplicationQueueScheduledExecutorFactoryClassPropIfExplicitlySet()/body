{
  final String expectedReplicationQueueScheduledExecutorFactoryClass="expected.replication.queue.scheduled.executor.Factory";
  final InfinispanEmbeddedCacheManagerFactoryBean objectUnderTest=new InfinispanEmbeddedCacheManagerFactoryBean();
  objectUnderTest.setReplicationQueueScheduledExecutorFactoryClass(expectedReplicationQueueScheduledExecutorFactoryClass);
  objectUnderTest.afterPropertiesSet();
  final EmbeddedCacheManager embeddedCacheManager=objectUnderTest.getObject();
  assertEquals("SpringEmbeddedCacheManagerFactoryBean should have used explicitly set ReplicationQueueScheduledExecutorFactoryClass. However, it didn't.",expectedReplicationQueueScheduledExecutorFactoryClass,embeddedCacheManager.getGlobalConfiguration().getReplicationQueueScheduledExecutorFactoryClass());
  embeddedCacheManager.stop();
}
