{
  if (command instanceof ClusteredGetCommand) {
    ClusteredGetCommand clusteredGet=(ClusteredGetCommand)command;
    if (distributionManager.isAffectedByRehash(clusteredGet.getKey()))     return new UnsureResponse();
    return returnValue == null ? null : new SuccessfulResponse(returnValue);
  }
 else   if (command instanceof SingleRpcCommand) {
    SingleRpcCommand src=(SingleRpcCommand)command;
    ReplicableCommand c=src.getCommand();
    if (c instanceof WriteCommand) {
      if (((WriteCommand)c).isSuccessful())       return new SuccessfulResponse(returnValue);
 else       return UnsuccessfulResponse.INSTANCE;
    }
  }
  if (returnValue == null)   return UnsuccessfulResponse.INSTANCE;
 else   return new SuccessfulResponse(returnValue);
}
