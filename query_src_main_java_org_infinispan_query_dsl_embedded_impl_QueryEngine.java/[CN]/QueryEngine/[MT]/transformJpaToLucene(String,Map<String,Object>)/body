{
  LuceneQueryParsingResult parsingResult;
  if (queryCache != null && (namedParameters == null || namedParameters.isEmpty())) {
    KeyValuePair<String,Class> queryCacheKey=new KeyValuePair<>(jpqlString,LuceneQueryParsingResult.class);
    parsingResult=queryCache.get(queryCacheKey);
    if (parsingResult == null) {
      parsingResult=queryParser.parseQuery(jpqlString,makeParsingProcessingChain(namedParameters));
      queryCache.put(queryCacheKey,parsingResult);
    }
  }
 else {
    parsingResult=queryParser.parseQuery(jpqlString,makeParsingProcessingChain(namedParameters));
  }
  return parsingResult;
}
