{
  if (log.isDebugEnabled()) {
    log.debugf("Building query for : %s",jpqlString);
  }
  if (authorizationManager != null) {
    authorizationManager.checkPermission(AuthorizationPermission.BULK_READ);
  }
  checkParameters(namedParameters);
  FilterParsingResult<?> parsingResult=parse(jpqlString);
  if (parsingResult.hasGroupingOrAggregations()) {
    return buildQueryWithAggregations(queryFactory,jpqlString,namedParameters,startOffset,maxResults,parsingResult);
  }
  return buildQueryNoAggregations(queryFactory,jpqlString,namedParameters,startOffset,maxResults,parsingResult);
}
