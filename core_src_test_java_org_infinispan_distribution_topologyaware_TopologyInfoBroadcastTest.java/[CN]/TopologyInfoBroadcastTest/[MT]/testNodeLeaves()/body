{
  TestingUtil.killCacheManagers(manager(1));
  TestingUtil.blockUntilViewsReceived(60000,false,cache(0),cache(2));
  TestingUtil.waitForRehashToComplete(cache(0),cache(2));
  DistributionManagerImpl dmi=(DistributionManagerImpl)advancedCache(0).getDistributionManager();
  assertTopologyInfo2Nodes(dmi.getConsistentHash().getCaches());
  dmi=(DistributionManagerImpl)advancedCache(2).getDistributionManager();
  assertTopologyInfo2Nodes(dmi.getConsistentHash().getCaches());
  TopologyAwareConsistentHash tach0=(TopologyAwareConsistentHash)advancedCache(0).getDistributionManager().getConsistentHash();
  TopologyAwareConsistentHash tach2=(TopologyAwareConsistentHash)advancedCache(2).getDistributionManager().getConsistentHash();
  assertEquals(tach0.getCaches(),tach2.getCaches());
}
