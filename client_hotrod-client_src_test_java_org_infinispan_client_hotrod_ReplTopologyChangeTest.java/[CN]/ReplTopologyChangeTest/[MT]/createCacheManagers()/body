{
  config=getDefaultClusteredCacheConfig(getCacheMode(),false);
  CacheContainer cm1=TestCacheManagerFactory.createClusteredCacheManager(config);
  CacheContainer cm2=TestCacheManagerFactory.createClusteredCacheManager(config);
  registerCacheManager(cm1);
  registerCacheManager(cm2);
  hotRodServer1=TestHelper.startHotRodServer(manager(0));
  hotRodServer2=TestHelper.startHotRodServer(manager(1));
  waitForClusterToForm();
  manager(0).getCache().put("k_test","v");
  manager(0).getCache().get("k_test").equals("v");
  manager(1).getCache().get("k_test").equals("v");
  log.info("Local replication test passed!");
  remoteCacheManager=new RemoteCacheManager("localhost",hotRodServer2.getPort());
  remoteCache=remoteCacheManager.getCache();
  tcpConnectionFactory=(TcpTransportFactory)TestingUtil.extractField(remoteCacheManager,"transportFactory");
}
