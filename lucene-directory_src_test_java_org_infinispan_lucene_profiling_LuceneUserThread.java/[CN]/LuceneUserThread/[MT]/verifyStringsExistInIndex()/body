{
  Set<String> strings=new HashSet<String>();
  state.stringsInIndex.drainTo(strings,50);
  IndexSearcher searcher=new IndexSearcher(directory,true);
  for (  String term : strings) {
    Query query=new TermQuery(new Term("main",term));
    TopDocs docs=searcher.search(query,null,1);
    if (docs.totalHits != 1) {
      throw new RuntimeException("String '" + term + "' should exist but was not found in index");
    }
  }
  state.stringsInIndex.addAll(strings);
  state.incrementIndexSearchesCount(50);
}
