{
  int bytesRemainingToRead=getBytesRemainingInChunk();
  if (bytesRemainingToRead == 0) {
    if (endReached)     return -1;
    currentBuffer=fetchNextChunk();
    localIndex=0;
    if (currentBuffer == null)     return -1;
 else     if (currentBuffer.length < chunkSize)     endReached=true;
  }
  int retval=currentBuffer[localIndex++];
  index++;
  return retval;
}
