{
  int bytes_remaining_to_read=getBytesRemainingInChunk();
  if (bytes_remaining_to_read == 0) {
    if (end_reached)     return -1;
    current_buffer=fetchNextChunk();
    local_index=0;
    if (current_buffer == null)     return -1;
 else     if (current_buffer.length < chunk_size)     end_reached=true;
    bytes_remaining_to_read=getBytesRemainingInChunk();
  }
  int retval=current_buffer[local_index++];
  index++;
  return retval;
}
