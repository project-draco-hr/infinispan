{
  int remaining=getBytesRemainingInChunk();
  if (remaining == 0) {
    if (endReached)     return -1;
    fetchNextChunk();
    if (currentBuffer == null)     return -1;
 else     if (isLastChunk())     endReached=true;
    remaining=getBytesRemainingInChunk();
  }
  int bytesToRead=Math.min(len,remaining);
  System.arraycopy(currentBuffer,localIndex,b,off,bytesToRead);
  localIndex+=bytesToRead;
  index+=bytesToRead;
  return bytesToRead;
}
