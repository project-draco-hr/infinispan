{
  if (trace) {
    log.tracef("Cancelling outbound transfer of segments %s to node %s with topology id %d",segments,destination,topologyId);
  }
synchronized (transfersByDestination) {
    List<OutboundTransferTask> transferTasks=transfersByDestination.get(destination);
    if (transferTasks != null) {
      OutboundTransferTask[] tasks=transferTasks.toArray(new OutboundTransferTask[transferTasks.size()]);
      for (      OutboundTransferTask transferTask : tasks) {
        transferTask.cancelSegments(segments);
      }
    }
  }
}
