{
  final String fileName=key.getFileName();
  final long fileModified=directory.fileModified(fileName);
  final long fileLength=directory.fileLength(fileName);
  final int bufferSize=(int)Math.min(fileLength,(long)autoChunkSize);
  final FileMetadata meta=new FileMetadata(bufferSize);
  meta.setLastModified(fileModified);
  meta.setSize(fileLength);
  return meta;
}
