{
  String persistentStateLocation=TestingUtil.tmpDirectory(this.getClass());
  Util.recursiveFileRemove(persistentStateLocation);
  TestingUtil.withCacheManager(new CacheManagerCallable(createCacheManager(persistentStateLocation)){
    @Override public void call() throws Exception {
      Cache<String,String> protoBufMetadaCache=cm.getCache(ProtobufMetadataManagerConstants.PROTOBUF_METADATA_CACHE_NAME);
      protoBufMetadaCache.put("test.proto","package X;");
    }
  }
);
  TestingUtil.withCacheManager(new CacheManagerCallable(createCacheManager(persistentStateLocation)){
    @Override public void call() throws Exception {
      Cache<String,String> protoBufMetadaCache=cm.getCache(ProtobufMetadataManagerConstants.PROTOBUF_METADATA_CACHE_NAME);
      assertTrue(protoBufMetadaCache.containsKey("test.proto"));
    }
  }
);
}
