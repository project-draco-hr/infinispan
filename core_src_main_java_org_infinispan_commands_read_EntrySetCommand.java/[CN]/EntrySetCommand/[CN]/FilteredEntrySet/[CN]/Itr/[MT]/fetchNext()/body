{
  if (atIt1) {
    boolean found=false;
    while (it1.hasNext()) {
      CacheEntry e=it1.next();
      if (!e.isRemoved()) {
        next=immutableInternalCacheEntry(entryFactory.create(e.getKey(),e.getValue(),e.getMetadata()));
        found=true;
        break;
      }
    }
    if (!found) {
      atIt1=false;
    }
  }
  if (!atIt1) {
    boolean found=false;
    while (it2.hasNext()) {
      InternalCacheEntry ice=it2.next();
      Object key=ice.getKey();
      if (!lookedUpEntries.containsKey(key)) {
        next=ice;
        found=true;
        break;
      }
    }
    if (!found) {
      next=null;
    }
  }
}
