{
  if (atIt1) {
    boolean found=false;
    while (it1.hasNext()) {
      CacheEntry e=it1.next();
      if (e.isCreated()) {
        next=immutableInternalCacheEntry(InternalEntryFactory.create(e.getKey(),e.getValue(),e.getVersion()));
        found=true;
        break;
      }
    }
    if (!found) {
      atIt1=false;
    }
  }
  if (!atIt1) {
    boolean found=false;
    long currentTimeMillis=System.currentTimeMillis();
    while (it2.hasNext()) {
      InternalCacheEntry ice=it2.next();
      Object key=ice.getKey();
      CacheEntry e=lookedUpEntries.get(key);
      if (e == null) {
        next=ice;
        found=true;
        break;
      }
      if (e.isChanged()) {
        next=immutableInternalCacheEntry(InternalEntryFactory.create(key,e.getValue(),e.getVersion()));
        found=true;
        break;
      }
      if (e.isRemoved() || ice.isExpired(currentTimeMillis)) {
        continue;
      }
    }
    if (!found) {
      next=null;
    }
  }
}
