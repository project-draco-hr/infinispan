{
  withCacheManager(new CacheManagerCallable(TestCacheManagerFactory.createCacheManager(new Configuration())){
    @Override public void call() throws Exception {
      Configuration customConfiguration=TestCacheManagerFactory.getDefaultConfiguration(true);
      customConfiguration.setTransactionManagerLookup(new TxManagerLookupA());
      Configuration definedConfiguration=cm.defineConfiguration("aCache",customConfiguration);
      assertTrue(definedConfiguration.getTransactionManagerLookup() instanceof TxManagerLookupA);
      TransactionManager activeTransactionManager=cm.getCache("aCache").getAdvancedCache().getTransactionManager();
      assertNotNull(activeTransactionManager);
      assertTrue(activeTransactionManager instanceof TmA);
    }
  }
);
}
