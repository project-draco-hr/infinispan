{
  Object returnValue=invokeNextInterceptor(ctx,command);
  if (!isStoreEnabled(command) || ctx.isInTxScope())   return returnValue;
  Map<Object,Object> map=command.getMap();
  int count=0;
  for (  Object key : map.keySet()) {
    if (isUsingLockDelegation && command.isForwarded() && !dm.getPrimaryLocation(key).equals(ctx.getOrigin()))     continue;
    if (isProperWriter(ctx,command,key)) {
      InternalCacheEntry se=getStoredEntry(key,ctx);
      store.store(se);
      log.tracef("Stored entry %s under key %s",se,key);
      count++;
    }
  }
  if (getStatisticsEnabled())   cacheStores.getAndAdd(count);
  return returnValue;
}
