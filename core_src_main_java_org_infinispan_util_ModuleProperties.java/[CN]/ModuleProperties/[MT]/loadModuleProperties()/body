{
  Map<String,ModuleProperties> map=new HashMap<String,ModuleProperties>();
  Enumeration<URL> resources=getResources(MODULE_PROPERTIES_FILENAME);
  if (resources != null) {
    while (resources.hasMoreElements()) {
      URL url=null;
      try {
        url=resources.nextElement();
        ModuleProperties props=new ModuleProperties();
        InputStream inStream=url.openStream();
        try {
          props.load(inStream);
        }
  finally {
          Util.close(inStream);
        }
        props.verify();
        map.put(props.getName(),props);
      }
 catch (      Exception e) {
        log.couldNotLoadModuleAtUrl(url,e);
      }
    }
  }
  return map;
}
