{
  Predicate<AttributeDomain> predicate=subscription.getPredicateNode().getPredicate();
  if (predicate.getInterval() != null) {
    if (orderedPredicates != null) {
      IntervalTree.Node<AttributeDomain,Subscriptions> n=orderedPredicates.findNode(predicate.getInterval());
      if (n != null) {
        n.value.remove(subscription);
        if (n.value.subscriptions.isEmpty()) {
          orderedPredicates.remove(n);
        }
      }
 else {
        throwIllegalStateException();
      }
    }
 else {
      throwIllegalStateException();
    }
  }
 else {
    if (unorderedPredicates != null) {
      for (int i=0; i < unorderedPredicates.size(); i++) {
        Predicates.Subscriptions subscriptions=unorderedPredicates.get(i);
        if (subscriptions.predicate.equals(predicate)) {
          subscriptions.remove(subscription);
          if (subscriptions.subscriptions.isEmpty()) {
            unorderedPredicates.remove(i);
          }
          break;
        }
      }
    }
 else {
      throwIllegalStateException();
    }
  }
}
