{
  context=new ContextImpl(new StreamIOAdapter(),new CommandBufferImpl());
  String sopts="hc:v";
  LongOpt[] lopts=new LongOpt[]{new LongOpt("connect",LongOpt.REQUIRED_ARGUMENT,null,'c'),new LongOpt("help",LongOpt.NO_ARGUMENT,null,'h'),new LongOpt("version",LongOpt.NO_ARGUMENT,null,'v')};
  Getopt g=new Getopt("ispn-cli",args,sopts,lopts);
  int c;
  while ((c=g.getopt()) != -1) {
switch (c) {
case 'c':
{
        Connection connection=ConnectionFactory.getConnection(g.getOptarg());
        connection.connect(context);
        context.setConnection(connection);
        break;
      }
case 'h':
    help();
  break;
case 'v':
version();
break;
}
}
config=new ConfigImpl(SystemUtils.getAppConfigFolder("InfinispanShell"));
config.load();
Settings settings=Settings.getInstance();
settings.setReadInputrc(false);
console=new Console(settings);
context.setOutputAdapter(new ConsoleIOAdapter(console));
console.addCompletion(new Completer(context));
}
