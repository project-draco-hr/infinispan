{
synchronized (lock) {
    if (cancelled)     throw new StateTransferCancelledException();
  }
}
