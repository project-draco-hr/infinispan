{
  while (!interrupted()) {
    CacheRpcCommand c=null;
    boolean unlock=false;
    try {
      c=queue.take();
      waitForStart(c);
      handleInternal(c);
      retryQueueLock.lock();
      if (queue.isEmpty()) {
        enqueueing=false;
        enqueuedBlocker.open();
      }
      retryQueueLock.unlock();
    }
 catch (    InterruptedException e) {
      enqueueing=false;
      enqueuedBlocker.open();
      interrupt();
    }
catch (    Throwable throwable) {
      log.exceptionHandlingCommand(c,throwable);
    }
  }
}
