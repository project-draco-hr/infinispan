{
  long failTime=System.currentTimeMillis() + timeout;
  while (System.currentTimeMillis() < failTime) {
    sleepThread(100);
    if (isCacheViewComplete(cache.getCacheManager().getMembers(),cache.getCacheManager().getAddress(),groupSize,barfIfTooManyMembersInView)) {
      return;
    }
  }
  throw new RuntimeException("timed out before caches had complete views");
}
