{
  Set<Cache> running=new HashSet<Cache>();
  for (  String cacheName : cacheContainer.getCacheNames()) {
    if (cacheContainer.isRunning(cacheName)) {
      Cache c=cacheContainer.getCache(cacheName);
      if (c.getStatus().allowInvocations())       running.add(c);
    }
  }
  if (cacheContainer.isDefaultRunning()) {
    Cache defaultCache=((DefaultCacheManager)cacheContainer).getCache();
    if (defaultCache.getStatus().allowInvocations())     running.add(defaultCache);
  }
  return running;
}
