{
  for (Iterator<Message> it=batch.iterator(); it.hasNext(); ) {
    Message msg=it.next();
    if (msg != null && shouldDropUpMessage(msg,msg.getSrc()))     it.remove();
  }
  if (!batch.isEmpty())   up_prot.up(batch);
}
