{
  if (evt.getType() == Event.SET_LOCAL_ADDRESS) {
    localAddress=(Address)evt.getArg();
    if (discard_dialog != null)     discard_dialog.setTitle("Discard dialog (" + localAddress + ")");
  }
  if (evt.getType() == Event.MSG) {
    Message msg=(Message)evt.getArg();
    if (shouldDropUpMessage(msg,msg.getSrc()))     return null;
  }
  return up_prot.up(evt);
}
