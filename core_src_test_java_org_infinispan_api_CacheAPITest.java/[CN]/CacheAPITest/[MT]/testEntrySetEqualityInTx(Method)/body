{
  Map<Integer,String> dataIn=new HashMap<Integer,String>();
  dataIn.put(1,v(m,1));
  dataIn.put(2,v(m,2));
  cache.putAll(dataIn);
  TransactionManager tm=cache.getAdvancedCache().getTransactionManager();
  tm.begin();
  try {
    Map<Integer,String> txDataIn=new HashMap<Integer,String>();
    txDataIn.put(3,v(m,3));
    Map<Integer,String> allEntriesIn=new HashMap<Integer,String>(dataIn);
    allEntriesIn.putAll(txDataIn);
    cache.putAll(txDataIn);
    Set entries=cache.entrySet();
    assertEquals(allEntriesIn.entrySet(),entries);
  }
  finally {
    tm.commit();
  }
}
