{
  if (!discardChecked) {
    List<Protocol> protocols=getProtocolStack().getProtocols();
    for (    Protocol protocol : protocols) {
      if (protocol instanceof DISCARD) {
        discard=(DISCARD)protocol;
        break;
      }
    }
    discardChecked=true;
  }
  if (discard == null || !discard.isDiscardAll()) {
    PingData ping_rsp=new PingData(logical_addr,view,is_server,logical_name,physical_addrs);
    Message rsp_msg=new Message(sender,logical_addr,null);
    rsp_msg.setFlag(Message.OOB);
    PingHeader rsp_hdr=new PingHeader(PingHeader.GET_MBRS_RSP,ping_rsp);
    rsp_msg.putHeader(this.id,rsp_hdr);
    if (log.isTraceEnabled())     log.trace(String.format("%s received GET_MBRS_REQ from %s",this,sender));
    DiscoveryKey key=new DiscoveryKey(testName,clusterName);
    Discovery discovery=all.get(key).get(sender);
    if (log.isTraceEnabled())     log.trace(String.format("%s sending (dest=%s) response: %s",this,sender,ping_rsp));
    discovery.up(new Event(Event.MSG,rsp_msg));
  }
}
