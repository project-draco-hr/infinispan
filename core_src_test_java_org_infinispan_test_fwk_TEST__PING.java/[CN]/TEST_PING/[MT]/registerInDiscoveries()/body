{
  DiscoveryKey key=new DiscoveryKey(testName,group_addr);
  Map<Address,TEST_PING> discoveries=all.get(key);
  if (discoveries == null) {
    discoveries=new HashMap<Address,TEST_PING>();
    Map ret=all.putIfAbsent(key,discoveries);
    if (ret != null)     discoveries=ret;
  }
  boolean traceEnabled=log.isTraceEnabled();
  if (traceEnabled)   log.trace(String.format("Discoveries for %s are : %s",key,discoveries));
  if (!discoveries.containsKey(local_addr)) {
    discoveries.put(local_addr,this);
    if (traceEnabled)     log.trace(String.format("Add discovery for %s to cache.  The cache now contains: %s",local_addr,discoveries));
  }
  return discoveries;
}
