{
  final ByteArrayOutputStream baos=new ByteArrayOutputStream();
  InputStream input=new ByteArrayInputStream(payloadBuffer);
  GZIPOutputStream output=new GZIPOutputStream(baos);
  byte[] buf=new byte[COMPRESSION_COPY_BYTEARRAY_SIZE];
  int bytesRead=input.read(buf);
  while (bytesRead != -1) {
    output.write(buf,0,bytesRead);
    bytesRead=input.read(buf);
  }
  input.close();
  output.close();
  return baos.toByteArray();
}
