{
  Set<Future<?>> futures=new HashSet<Future<?>>(mods.size());
  asyncCommandFutures.set(futures);
  try {
    super.applyModifications(mods);
    if (pollFutures) {
      CacheLoaderException exception=null;
      try {
        for (        Future<?> f : asyncCommandFutures.get())         f.get();
      }
 catch (      InterruptedException ie) {
        Thread.currentThread().interrupt();
      }
catch (      ExecutionException e) {
        if (e.getCause() instanceof CacheLoaderException)         exception=(CacheLoaderException)e.getCause();
 else         exception=new CacheLoaderException(e.getCause());
      }
      throw exception;
    }
  }
  finally {
    asyncCommandFutures.remove();
  }
}
