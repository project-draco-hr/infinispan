{
  assertFalse(cs.containsKey("k"));
  long lifespan=200000;
  long idle=120000;
  InternalCacheEntry se=TestInternalCacheEntryFactory.create("k","v",lifespan,idle);
  InternalCacheValue icv=se.toInternalCacheValue();
  assertEquals(se.getCreated(),icv.getCreated());
  assertEquals(se.getLastUsed(),icv.getLastUsed());
  cs.store(se);
  assertTrue(cs.containsKey("k"));
  InternalCacheEntry ice=cs.load("k");
  assertCorrectExpiry(ice,"v",lifespan,idle,false);
  ice=cs.loadAll().iterator().next();
  assertCorrectExpiry(ice,"v",lifespan,idle,false);
  idle=1;
  se=TestInternalCacheEntryFactory.create("k","v",lifespan,idle);
  cs.store(se);
  Thread.sleep(100);
  purgeExpired();
  assertTrue(se.isExpired(System.currentTimeMillis()));
  assertEventuallyExpires("k");
  assertFalse(cs.containsKey("k"));
  assertTrue(cs.loadAll().isEmpty());
}
