{
  log.tracef("installNewView:members=%s, missing=%s",members,missing);
  final List<org.jgroups.Address> viewMembers=new ArrayList<org.jgroups.Address>();
  for (  Address a : members)   if (!a.equals(missing))   viewMembers.add(getjGroupsAddress((JGroupsAddress)a));
  int viewId=where[0].getGlobalComponentRegistry().getComponent(Transport.class).getViewId() + 1;
  View view=View.create(viewMembers.get(0),viewId,(org.jgroups.Address[])viewMembers.toArray(new org.jgroups.Address[viewMembers.size()]));
  log.trace("Before installing new view:" + viewMembers);
  for (  EmbeddedCacheManager ecm : where) {
    Channel c=((JGroupsTransport)ecm.getGlobalComponentRegistry().getComponent(Transport.class)).getChannel();
    ((GMS)c.getProtocolStack().findProtocol(GMS.class)).installView(view);
  }
}
