{
  List<ServerConfiguration> servers=new ArrayList<ServerConfiguration>();
  if (this.servers.size() > 0)   for (  ServerConfigurationBuilder server : this.servers) {
    servers.add(server.create());
  }
 else {
    servers.add(new ServerConfiguration("127.0.0.1",ConfigurationProperties.DEFAULT_HOTROD_PORT));
  }
  if (marshaller == null) {
    return new Configuration(asyncExecutorFactory.create(),balancingStrategy,classLoader == null ? null : classLoader.get(),connectionPool.create(),connectionTimeout,consistentHashImpl,forceReturnValues,keySizeEstimate,marshallerClass,pingOnStartup,protocolVersion,servers,socketTimeout,tcpNoDelay,transportFactory,valueSizeEstimate);
  }
 else {
    return new Configuration(asyncExecutorFactory.create(),balancingStrategy,classLoader == null ? null : classLoader.get(),connectionPool.create(),connectionTimeout,consistentHashImpl,forceReturnValues,keySizeEstimate,marshaller,pingOnStartup,protocolVersion,servers,socketTimeout,tcpNoDelay,transportFactory,valueSizeEstimate);
  }
}
