{
  assertIsEmpty();
  long lifespan=120000;
  InternalCacheEntry se=TestInternalCacheEntryFactory.create("k",wrap("k","v"),lifespan);
  cl.write(marshalledEntry(se));
  assertContains("k",true);
  MarshalledEntry me=cl.load("k");
  assertCorrectExpiry(me,"v",lifespan,-1,false);
  me=TestingUtil.allEntries(cl).iterator().next();
  assertCorrectExpiry(me,"v",lifespan,-1,false);
  lifespan=1;
  se=TestInternalCacheEntryFactory.create("k",wrap("k","v"),lifespan);
  cl.write(marshalledEntry(se));
  Thread.sleep(100);
  purgeExpired(Collections.singleton("k"),10000);
  assertExpired(se,true);
  assertEventuallyExpires("k");
  assertContains("k",false);
  assertIsEmpty();
}
