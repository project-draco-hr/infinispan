{
  assertIsEmpty();
  long lifespan=7000;
  long idle=5000;
  InternalCacheEntry ice1=internalCacheEntry("k1","v1",lifespan);
  cl.write(marshalledEntry(ice1));
  assertContains("k1",true);
  InternalCacheEntry ice2=internalCacheEntry("k2","v2",-1,idle);
  cl.write(marshalledEntry(ice2));
  assertContains("k2",true);
  InternalCacheEntry ice3=internalCacheEntry("k3","v3",lifespan,idle);
  cl.write(marshalledEntry(ice3));
  assertContains("k3",true);
  InternalCacheEntry ice4=internalCacheEntry("k4","v4",-1,-1);
  cl.write(marshalledEntry(ice4));
  assertContains("k4",true);
  InternalCacheEntry ice5=internalCacheEntry("k5","v5",lifespan * 1000,idle * 1000);
  cl.write(marshalledEntry(ice5));
  assertContains("k5",true);
  timeService.advance(lifespan + 1);
  assertContains("k1",false);
  assertContains("k2",false);
  assertContains("k3",false);
  assertContains("k4",true);
  assertContains("k5",true);
  purgeExpired("k1","k2","k3");
  assertContains("k1",false);
  assertContains("k2",false);
  assertContains("k3",false);
  assertContains("k4",true);
  assertContains("k5",true);
}
