{
  manager(2).stop();
  TestingUtil.blockUntilViewsReceived(10000,true,manager(0),manager(1));
  TestingUtil.blockUntilViewsReceived(10000,true,manager(0),manager(1),manager(2));
  TestingUtil.blockUntilCacheStatusAchieved(manager(0).getCache(),ComponentStatus.RUNNING,10000);
  TestingUtil.blockUntilCacheStatusAchieved(manager(1).getCache(),ComponentStatus.RUNNING,10000);
  InetSocketAddress server3Address=new InetSocketAddress("localhost",hotRodServer3.getPort());
  hotRodServer3.stop();
  expectTopologyChange(server3Address,false);
  assertEquals(2,tcpConnectionFactory.getServers().size());
}
