{
  long total=0;
  int read;
  boolean trace=log.isTraceEnabled();
  if (trace) {
    log.trace("copying " + input + " to "+ output+ " with buffer size: "+ buffer.length);
  }
  while ((read=input.read(buffer)) != -1) {
    output.write(buffer,0,read);
    total+=read;
    if (trace) {
      log.trace("bytes read: " + read + "; total bytes read: "+ total);
    }
  }
  return total;
}
