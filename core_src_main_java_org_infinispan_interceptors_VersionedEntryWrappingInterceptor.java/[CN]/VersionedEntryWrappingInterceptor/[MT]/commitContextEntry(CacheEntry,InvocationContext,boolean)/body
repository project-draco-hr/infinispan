{
  if (ctx.isInTxScope() && !isFromStateTransfer(ctx)) {
    EntryVersion version=((TxInvocationContext)ctx).getCacheTransaction().getUpdatedEntryVersions().get(entry.getKey());
    cdl.commitEntry(entry,version,skipOwnershipCheck,ctx);
  }
 else {
    cdl.commitEntry(entry,entry.getVersion(),skipOwnershipCheck,ctx);
  }
}
