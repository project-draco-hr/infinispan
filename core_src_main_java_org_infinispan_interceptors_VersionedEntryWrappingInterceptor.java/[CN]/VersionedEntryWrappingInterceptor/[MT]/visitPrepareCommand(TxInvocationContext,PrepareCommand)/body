{
  if (!ctx.isOriginLocal() || command.isReplayEntryWrapping()) {
    for (    WriteCommand c : command.getModifications())     c.acceptVisitor(ctx,entryWrappingVisitor);
  }
  Object retval=invokeNextInterceptor(ctx,command);
  if (command.isOnePhaseCommit())   ctx.getCacheTransaction().setUpdatedEntryVersions(((VersionedPrepareCommand)command).getVersionsSeen());
  EntryVersionsMap newVersionData=cll.createNewVersionsAndCheckForWriteSkews(versionGenerator,ctx,(VersionedPrepareCommand)command);
  if (newVersionData != null)   retval=newVersionData;
  if (command.isOnePhaseCommit())   commitContextEntries(ctx);
  return retval;
}
