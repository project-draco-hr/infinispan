{
  List<WorkerThread> workers=new ArrayList<WorkerThread>();
  for (int i=0; i < 20; i++) {
    WorkerThread workerThread=new WorkerThread(remoteCache);
    workers.add(workerThread);
    workerThread.stress();
  }
  while (connectionPool.getNumActive() <= 15) {
    Thread.sleep(10);
  }
  for (  WorkerThread wt : workers) {
    wt.stop();
  }
  for (  WorkerThread wt : workers) {
    wt.awaitTermination();
  }
  Thread.sleep(500 * 3);
  assertEquals(1,connectionPool.getNumIdle());
  assertEquals(0,connectionPool.getNumActive());
}
