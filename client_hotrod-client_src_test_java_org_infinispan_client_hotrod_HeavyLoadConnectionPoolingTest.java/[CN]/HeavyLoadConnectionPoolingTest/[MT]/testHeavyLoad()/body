{
  List<WorkerThread> workers=new ArrayList<WorkerThread>();
  for (int i=0; i < 20; i++) {
    WorkerThread workerThread=new WorkerThread(remoteCache);
    workers.add(workerThread);
    workerThread.stress();
  }
  while (!(connectionPool.getNumActive() > 15)) {
    Thread.sleep(10);
  }
  for (  WorkerThread wt : workers) {
    wt.stopWorker();
    wt.waitToFinish();
  }
  for (int i=0; i < 50; i++) {
    if (connectionPool.getNumIdle() == 1)     break;
    Thread.sleep(1000);
  }
  assertEquals(1,connectionPool.getNumIdle());
  assertEquals(0,connectionPool.getNumActive());
}
