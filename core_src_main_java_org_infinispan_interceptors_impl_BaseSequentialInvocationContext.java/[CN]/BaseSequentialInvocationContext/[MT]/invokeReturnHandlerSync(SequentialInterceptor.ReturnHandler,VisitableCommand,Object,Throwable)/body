{
  if (trace)   log.tracef("Invoking return handler %s with return value/exception: %s/%s",className(returnHandler),className(returnValue),className(throwable));
  CompletableFuture<Object> handlerFuture=returnHandler.handle(this,command,returnValue,throwable);
  if (handlerFuture != null) {
    return CompletableFutures.await(handlerFuture);
  }
  if (throwable != null) {
    throw throwable;
  }
 else {
    return returnValue;
  }
}
