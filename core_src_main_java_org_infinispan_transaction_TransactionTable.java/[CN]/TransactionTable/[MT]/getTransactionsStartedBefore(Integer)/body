{
  Set<CacheTransaction> result=new HashSet<CacheTransaction>();
  for (  CacheTransaction ct : localTransactions.values()) {
    if (ct.getViewId() != CACHE_STOPPED_VIEW_ID && ct.getViewId() < viewId) {
      result.add(ct);
    }
  }
  for (  CacheTransaction ct : remoteTransactions.values()) {
    if (ct.getViewId() != CACHE_STOPPED_VIEW_ID && ct.getViewId() < viewId) {
      result.add(ct);
    }
  }
  return result;
}
