{
  if (flags == null || flags.length == 0)   return this;
 else {
    List<Flag> flagsToAdd=Arrays.asList(flags);
    if (this.flags != null && this.flags.containsAll(flagsToAdd)) {
      return this;
    }
 else {
      EnumSet<Flag> newFlags=EnumSet.copyOf(this.flags);
      newFlags.addAll(flagsToAdd);
      return new DecoratedCache<K,V>(this.cacheImplementation,this.classLoader,newFlags);
    }
  }
}
