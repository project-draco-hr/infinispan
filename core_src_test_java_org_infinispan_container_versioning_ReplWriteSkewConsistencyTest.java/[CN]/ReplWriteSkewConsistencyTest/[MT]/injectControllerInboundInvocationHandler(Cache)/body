{
  ControllerInboundInvocationHandler handler=new ControllerInboundInvocationHandler(extractComponent(cache,InboundInvocationHandler.class));
  replaceComponent(cache.getCacheManager(),InboundInvocationHandler.class,handler,true);
  JGroupsTransport t=(JGroupsTransport)extractComponent(cache,Transport.class);
  CommandAwareRpcDispatcher card=t.getCommandAwareRpcDispatcher();
  replaceField(handler,"inboundInvocationHandler",card,CommandAwareRpcDispatcher.class);
  return handler;
}
