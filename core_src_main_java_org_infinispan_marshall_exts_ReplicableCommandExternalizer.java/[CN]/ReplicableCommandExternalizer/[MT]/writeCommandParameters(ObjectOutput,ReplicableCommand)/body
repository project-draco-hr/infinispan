{
  Object[] args=command.getParameters();
  int numArgs=(args == null ? 0 : args.length);
  UnsignedNumeric.writeUnsignedInt(output,numArgs);
  for (int i=0; i < numArgs; i++) {
    Object arg=args[i];
    if (arg instanceof DeltaAware) {
      DeltaAware dw=(DeltaAware)arg;
      output.writeObject(dw.delta());
    }
 else {
      output.writeObject(arg);
    }
  }
  if (command instanceof TopologyAffectedCommand) {
    output.writeInt(((TopologyAffectedCommand)command).getTopologyId());
  }
}
