{
  if (instance == null) {
synchronized (DummyTransactionManager.class) {
      if (instance == null) {
        instance=new DummyTransactionManager();
        utx=new DummyUserTransaction(instance);
        Properties p=new Properties();
        Context ctx=null;
        try {
          ctx=new InitialContext(p);
          ctx.bind("java:/TransactionManager",instance);
          ctx.bind("UserTransaction",utx);
        }
 catch (        NoInitialContextException nie) {
          log.debug(nie.getMessage());
        }
catch (        NamingException e) {
          log.debug("binding of DummyTransactionManager failed",e);
        }
 finally {
          Util.close(ctx);
        }
      }
    }
  }
  return instance;
}
