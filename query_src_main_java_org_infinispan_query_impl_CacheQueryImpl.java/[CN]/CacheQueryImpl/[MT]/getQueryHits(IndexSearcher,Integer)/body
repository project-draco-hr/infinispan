{
  org.apache.lucene.search.Query query=filterQueryByClasses(luceneQuery);
  buildFilters();
  IndexSearcherWithPayload realSearcher=new IndexSearcherWithPayload(searcher,false,false);
  TimeoutManager timeoutManager=new TimeoutManager();
  QueryHits queryHits;
  if (n == null) {
    queryHits=new QueryHits(realSearcher,query,filter,sort,timeoutManager);
  }
 else {
    queryHits=new QueryHits(realSearcher,query,filter,sort,n,timeoutManager);
  }
  resultSize=queryHits.totalHits;
  return queryHits;
}
