{
  if (configuration.getDataContainer() != null) {
    return (T)configuration.getDataContainer();
  }
 else   if (DefaultDataContainer.class.getName().equals(configuration.getDataContainerClass())) {
    EvictionStrategy st=configuration.getEvictionStrategy();
    int level=configuration.getConcurrencyLevel();
switch (st) {
case NONE:
      return (T)DefaultDataContainer.unBoundedDataContainer(level);
case UNORDERED:
case LRU:
case FIFO:
case LIRS:
    int maxEntries=configuration.getEvictionMaxEntries();
  if (maxEntries < 0) {
    return (T)DefaultDataContainer.unBoundedDataContainer(level);
  }
EvictionThreadPolicy policy=configuration.getEvictionThreadPolicy();
return (T)DefaultDataContainer.boundedDataContainer(level,maxEntries,st,policy);
default :
throw new ConfigurationException("Unknown eviction strategy " + configuration.getEvictionStrategy());
}
}
 else {
DataContainer dataContainer=DataContainer.class.cast(Util.getInstance(configuration.getDataContainerClass(),Thread.currentThread().getContextClassLoader()));
XmlConfigHelper.setValues(dataContainer,configuration.getDataContainerProperties(),false,true);
return (T)dataContainer;
}
}
