{
{
    ThreadFactory tf=new ThreadFactory(){
      @Override public Thread newThread(      Runnable r){
        return new Thread(r,"KeyGeneratorThread");
      }
    }
;
    cacheManager=(EmbeddedCacheManager)caches.get(0).getCacheManager();
    keyAffinityService=(KeyAffinityServiceImpl)KeyAffinityServiceFactory.newLocalKeyAffinityService(cacheManager.getCache(cacheName),new RndKeyGenerator(),Executors.newSingleThreadExecutor(tf),100);
  }
}
