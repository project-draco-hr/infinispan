{
  ByteBuffer result=ByteBuffer.allocate(size);
  try (ByteArrayInputStream in=new ByteArrayInputStream(input);GZIPInputStream gzip=new GZIPInputStream(in);ReadableByteChannel inputChannel=Channels.newChannel(gzip)){
    inputChannel.read(result);
    result.flip();
    CharBuffer decoded=UTF_8.decode(result);
    return decoded.array();
  }
 }
