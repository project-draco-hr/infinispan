{
  FileDescriptorSource fileDescriptorSource=new FileDescriptorSource();
  int size=UnsignedNumeric.readUnsignedInt(input);
  for (int i=0; i < size; i++) {
    String name=input.readUTF();
    int length=UnsignedNumeric.readUnsignedInt(input);
    byte[] compressed=(byte[])input.readObject();
    char[] contents=decompress(compressed,length);
    fileDescriptorSource.addProtoFile(name,String.valueOf(contents));
  }
  return fileDescriptorSource;
}
