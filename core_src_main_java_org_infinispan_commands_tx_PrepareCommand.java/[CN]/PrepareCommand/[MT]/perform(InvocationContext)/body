{
  if (ignored != null)   throw new IllegalStateException("Expected null context!");
  if (recoveryManager != null && recoveryManager.isTransactionPrepared(globalTx)) {
    log.tracef("The transaction %s is already prepared. Skipping prepare call.",globalTx);
    return null;
  }
  RemoteTransaction remoteTransaction=getRemoteTransaction();
  if (hasModifications()) {
    remoteTransaction.setModifications(Arrays.asList(modifications));
  }
  RemoteTxInvocationContext ctx=icf.createRemoteTxInvocationContext(remoteTransaction,getOrigin());
  if (trace)   log.tracef("Invoking remotely originated prepare: %s with invocation context: %s",this,ctx);
  notifier.notifyTransactionRegistered(ctx.getGlobalTransaction(),false);
  return invoker.invoke(ctx,this);
}
