{
  if (resultSize == null) {
    getTimeoutManager().start();
    IndexSearcherWithPayload searcher=buildSearcher(searchFactoryImplementor,false);
    if (searcher == null) {
      resultSize=0;
    }
 else {
      try {
        QueryHits queryHits=getQueryHits(searcher,0);
        resultSize=queryHits.getTotalHits();
      }
 catch (      IOException e) {
        throw new SearchException("Unable to query Lucene index",e);
      }
 finally {
        closeSearcher(searcher);
      }
    }
  }
  return this.resultSize;
}
