{
  StringBuilder sb=new StringBuilder();
  sb.append("<h2>Infinispan configuration options</h2><br/>");
  sb.append("<UL>");
  List<Class<?>> configBeans;
  try {
    configBeans=getConfigBeans();
    System.out.println("Found " + configBeans + " on classpath "+ classpath);
    XMLTreeOutputWalker tw=new XMLTreeOutputWalker(sb);
    TreeNode root=tw.constructTreeFromBeans(configBeans);
    sb.append("<div class=\"" + "source" + "\"><pre>");
    tw.preOrderTraverse(root);
    sb.append("</pre></div>");
    for (    Class<?> clazz : configBeans) {
      ConfigurationElement ces[]=configurationElementsOnBean(clazz);
      for (      ConfigurationElement ce : ces) {
        boolean createdAttributes=false;
        boolean createdProperties=false;
        generateHeaderForConfigurationElement(sb,tw,root,ce);
        for (        Method m : clazz.getMethods()) {
          ConfigurationAttribute a=m.getAnnotation(ConfigurationAttribute.class);
          boolean attribute=a != null && a.containingElement().equals(ce.name());
          if (attribute && !createdAttributes) {
            sb.append("<table class=\"bodyTable\"> ");
            sb.append("<tr class=\"a\"><th>Attribute</th><th>Type</th><th>Default</th><th>Description</th></tr>\n");
            createdAttributes=true;
          }
          if (attribute) {
            generateAttributeTableRow(sb,m,a);
          }
        }
        if (createdAttributes) {
          sb.append("</table></div>");
        }
        for (        Method m : clazz.getMethods()) {
          ConfigurationProperty[] cprops=propertiesElementsOnMethod(m);
          for (          ConfigurationProperty c : cprops) {
            boolean property=c.parentElement().equals(ce.name());
            if (property && !createdProperties) {
              sb.append("\n<table class=\"bodyTable\"> ");
              sb.append("<tr class=\"a\"><th>Property</th><th>Description</th></tr>\n");
              createdProperties=true;
            }
            if (property) {
              generatePropertyTableRow(sb,c);
            }
          }
        }
        if (createdProperties) {
          sb.append("</table></div>");
        }
      }
    }
  }
 catch (  Exception e) {
  }
  return sb.toString();
}
