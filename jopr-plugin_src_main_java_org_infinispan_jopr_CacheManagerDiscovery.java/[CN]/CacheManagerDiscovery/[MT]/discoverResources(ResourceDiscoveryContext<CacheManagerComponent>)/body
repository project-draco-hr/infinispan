{
  boolean trace=log.isTraceEnabled();
  if (trace)   log.trace("Discover resources with context: {0}",ctx);
  Set<DiscoveredResourceDetails> discoveredResources=new HashSet<DiscoveredResourceDetails>();
  DiscoveredResourceDetails resource=null;
  List<Configuration> manualCfgs=ctx.getPluginConfigurations();
  if (!manualCfgs.isEmpty()) {
    Configuration cfg=ctx.getPluginConfigurations().get(0);
    String objectName=cfg.getSimple(OBJECT_NAME_KEY).getStringValue();
    String connectorAddress=cfg.getSimple(JMXDiscoveryComponent.CONNECTOR_ADDRESS_CONFIG_PROPERTY).getStringValue();
    resource=createDiscoveredResource(ctx,objectName,connectorAddress);
    if (trace)     log.trace("Manually discovered resource is {0}",resource);
  }
 else {
    resource=createDiscoveredResource(ctx,MANAGER_OBJECT,REMOTE);
    if (trace)     log.trace("Automatically discovered resource is {0}",resource);
    discoveredResources.add(resource);
  }
  discoveredResources.add(resource);
  return discoveredResources;
}
