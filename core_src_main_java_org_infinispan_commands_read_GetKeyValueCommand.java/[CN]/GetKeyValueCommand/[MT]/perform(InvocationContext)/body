{
  CacheEntry entry=ctx.lookupEntry(key);
  if (entry == null || entry.isNull()) {
    if (trace) {
      log.trace("Entry not found");
    }
    return null;
  }
  if (entry.isRemoved()) {
    if (trace) {
      log.tracef("Entry has been deleted and is of type %s",entry.getClass().getSimpleName());
    }
    return null;
  }
  if (returnEntry) {
    CacheEntry copy=entryFactory.copy(entry);
    if (trace) {
      log.tracef("Found entry %s",entry);
      log.tracef("Returning copied entry %s",copy);
    }
    return copy;
  }
  final Object value=entry.getValue();
  if (trace) {
    log.tracef("Found value %s",toStr(value));
  }
  return value;
}
