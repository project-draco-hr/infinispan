{
  if (type.isArray()) {
    if (genericType instanceof Class) {
      return type.getComponentType();
    }
    GenericArrayType genericArrayType=(GenericArrayType)genericType;
    TypeVariable genericComponentType=(TypeVariable)genericArrayType.getGenericComponentType();
    return (Class)genericComponentType.getBounds()[0];
  }
 else   if (Collection.class.isAssignableFrom(type)) {
    return determineCollectionElementType(genericType);
  }
 else   if (Map.class.isAssignableFrom(type)) {
    return determineMapValueTypeParam(genericType);
  }
  return null;
}
