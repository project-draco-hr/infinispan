{
  Transaction tx=ctx.getRunningTransaction();
  if (!isValid(tx))   try {
    throw new CacheException("Invalid transaction " + tx + ", status = "+ (tx == null ? null : tx.getStatus()));
  }
 catch (  SystemException e) {
    throw new CacheException("Exception trying to analyse status of transaction " + tx,e);
  }
}
