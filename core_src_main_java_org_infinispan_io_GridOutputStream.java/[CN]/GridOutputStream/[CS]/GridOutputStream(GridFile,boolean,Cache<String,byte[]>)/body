{
  fileChunkMapper=new FileChunkMapper(file,cache);
  chunkSize=fileChunkMapper.getChunkSize();
  this.file=file;
  index=append ? (int)file.length() : 0;
  localIndex=ModularArithmetic.mod(index,chunkSize);
  currentBuffer=append && !isLastChunkFull() ? fetchLastChunk() : createEmptyChunk();
  numberOfChunksWhenOpened=getLastChunkNumber() + 1;
}
