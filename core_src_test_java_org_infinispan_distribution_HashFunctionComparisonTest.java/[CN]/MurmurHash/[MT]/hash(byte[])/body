{
  int len=payload.length;
  int offset=0;
  while (len >= 4) {
    int k=payload[offset];
    k|=payload[offset + 1] << 8;
    k|=payload[offset + 2] << 16;
    k|=payload[offset + 3] << 24;
    k*=m;
    k^=k >> r;
    k*=m;
    h*=m;
    h^=k;
    len-=4;
    offset+=4;
  }
switch (len) {
case 3:
    h^=payload[offset + 2] << 16;
case 2:
  h^=payload[offset + 1] << 8;
case 1:
h^=payload[offset];
h*=m;
}
h^=h >> 13;
h*=m;
h^=h >> 15;
return h;
}
