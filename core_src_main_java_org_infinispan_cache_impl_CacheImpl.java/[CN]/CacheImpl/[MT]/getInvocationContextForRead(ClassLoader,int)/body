{
  if (config.transaction().transactionMode().isTransactional()) {
    Transaction transaction=getOngoingTransaction();
    if (transaction != null)     return getInvocationContext(transaction,explicitClassLoader,false);
  }
  InvocationContext result=invocationContextFactory.createInvocationContext(false,keyCount);
  setInvocationContextClassLoader(result,explicitClassLoader);
  return result;
}
