{
  if (response instanceof Exception) {
    throw new ExecutionException((Exception)response);
  }
  Map<Address,Response> mapResult=(Map<Address,Response>)response;
  for (  Entry<Address,Response> e : mapResult.entrySet()) {
    if (e.getValue() instanceof SuccessfulResponse) {
      return (V)((SuccessfulResponse)e.getValue()).getResponseValue();
    }
  }
  throw new ExecutionException(new IllegalStateException("Invalid response " + response));
}
