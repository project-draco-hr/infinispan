{
  super();
  if (masterCacheNode == null)   throw new NullPointerException("Can not use " + masterCacheNode + " cache for DefaultExecutorService");
  ensureProperCacheState(masterCacheNode.getAdvancedCache());
  this.cache=masterCacheNode.getAdvancedCache();
  ComponentRegistry registry=cache.getComponentRegistry();
  GlobalComponentRegistry globalRegistry=cache.getComponentRegistry().getGlobalComponentRegistry();
  this.rpc=cache.getRpcManager();
  this.invoker=registry.getComponent(InterceptorChain.class);
  this.factory=registry.getComponent(CommandsFactory.class);
  this.marshaller=globalRegistry.getComponent(StreamingMarshaller.class);
}
