{
  InetSocketAddress address=new InetSocketAddress(getHost(),getPort());
  Executor masterExecutor=Executors.newCachedThreadPool();
  Executor workerExecutor=Executors.newCachedThreadPool();
  NioServerSocketChannelFactory factory=new NioServerSocketChannelFactory(masterExecutor,workerExecutor,workerThreads());
  ServerBootstrap bootstrap=new ServerBootstrap(factory);
  bootstrap.setPipelineFactory(new WebSocketServerPipelineFactory(cacheManager()));
  bootstrap.setOption("child.tcpNoDelay",tcpNoDelay);
  if (sendBufSize > 0)   bootstrap.setOption("child.sendBufferSize",sendBufSize);
  if (recvBufSize > 0)   bootstrap.setOption("child.receiveBufferSize",recvBufSize);
  bootstrap.bind(address);
}
