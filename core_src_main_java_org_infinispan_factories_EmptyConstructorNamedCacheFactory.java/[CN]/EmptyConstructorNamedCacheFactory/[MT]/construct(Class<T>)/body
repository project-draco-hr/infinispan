{
  if (componentType.isInterface()) {
    Class componentImpl;
    if (componentType.equals(ClusteringDependentLogic.class)) {
      if (configuration.getCacheMode().isReplicated() || !configuration.getCacheMode().isClustered() || configuration.getCacheMode().isInvalidation()) {
        return componentType.cast(new ClusteringDependentLogic.AllNodesLogic());
      }
 else {
        return componentType.cast(new ClusteringDependentLogic.DistributionLogic());
      }
    }
 else     if (componentType.equals(StreamingMarshaller.class)) {
      VersionAwareMarshaller versionAwareMarshaller=getInstance(VersionAwareMarshaller.class);
      return componentType.cast(versionAwareMarshaller);
    }
 else     if (componentType.equals(EntryFactory.class)) {
      return componentType.cast(getInstance(EntryFactoryImpl.class));
    }
 else     if (componentType.equals(InvocationContextContainer.class)) {
      componentImpl=configuration.isTransactionalCache() ? TransactionalInvocationContextContainer.class : NonTransactionalInvocationContextContainer.class;
      return componentType.cast(getInstance(componentImpl));
    }
 else {
      componentImpl=loadClass(componentType.getName() + "Impl",configuration.getClassLoader());
    }
    return componentType.cast(getInstance(componentImpl));
  }
 else {
    return getInstance(componentType);
  }
}
