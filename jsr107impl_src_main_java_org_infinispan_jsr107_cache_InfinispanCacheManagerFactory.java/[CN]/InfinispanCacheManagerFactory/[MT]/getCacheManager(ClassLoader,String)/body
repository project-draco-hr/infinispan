{
  if (classLoader == null) {
    throw new NullPointerException("Invalid classloader specified " + classLoader);
  }
  if (name == null) {
    throw new NullPointerException("Invalid cache name specified " + name);
  }
synchronized (cacheManagers) {
    Map<String,CacheManager> map=cacheManagers.get(classLoader);
    if (map == null) {
      map=new HashMap<String,CacheManager>();
      cacheManagers.put(classLoader,map);
    }
    CacheManager cacheManager=map.get(name);
    if (cacheManager == null) {
      cacheManager=createCacheManager(classLoader,name);
      map.put(name,cacheManager);
    }
    return cacheManager;
  }
}
