{
  if (!skip(ctx,command)) {
    if (ctx.hasModifications()) {
      GlobalTransaction tx=ctx.getGlobalTransaction();
      if (getLog().isTraceEnabled())       getLog().tracef("Calling loader.commit() for transaction %s",tx);
      Transaction xaTx=null;
      if (transactionManager != null) {
        xaTx=transactionManager.suspend();
      }
      try {
        store.commit(tx);
      }
 catch (      Throwable t) {
        throw t;
      }
 finally {
        preparingTxs.remove(tx);
        if (transactionManager != null && xaTx != null) {
          transactionManager.resume(xaTx);
        }
      }
      if (getStatisticsEnabled()) {
        Integer puts=txStores.get(tx);
        if (puts != null) {
          cacheStores.getAndAdd(puts);
        }
        txStores.remove(tx);
      }
      return invokeNextInterceptor(ctx,command);
    }
 else {
      if (getLog().isTraceEnabled())       getLog().trace("Commit called with no modifications; ignoring.");
    }
  }
  return invokeNextInterceptor(ctx,command);
}
