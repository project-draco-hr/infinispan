{
  if (isProperWriter(ctx,command,command.getKey())) {
    if (generateStatistics)     putCount++;
    CacheEntry entry=ctx.lookupEntry(command.getKey());
    InternalCacheEntry ice;
    if (entry instanceof InternalCacheEntry) {
      ice=(InternalCacheEntry)entry;
    }
 else     if (entry instanceof DeltaAwareCacheEntry) {
      AtomicHashMap<?,?> uncommittedChanges=((DeltaAwareCacheEntry)entry).getUncommittedChages();
      ice=entryFactory.create(entry.getKey(),uncommittedChanges,entry.getMetadata(),entry.getLifespan(),entry.getMaxIdle());
    }
 else {
      ice=entryFactory.create(entry);
    }
    modifications.add(new Store(ice));
    affectedKeys.add(command.getKey());
  }
  return null;
}
