{
  MarshallingType marshallingType=typeHints.get(type);
  if (marshallingType != null && marshallingType.isMarshallable != isMarshallable) {
    typeHints.replace(type,new MarshallingType(isMarshallable,marshallingType.sizePredictor));
  }
 else {
    typeHints.putIfAbsent(type,new MarshallingType(isMarshallable,new AdaptiveBufferSizePredictor()));
  }
}
