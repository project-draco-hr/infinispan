{
  Configuration conf=HBaseConfiguration.create();
  try {
    MiniZooKeeperCluster zkCluster=new MiniZooKeeperCluster(conf);
    EmbeddedServerHelper.zooKeeperPort=zkCluster.startup(new File(zkBaseDir + "/" + String.valueOf(System.currentTimeMillis())));
    conf.set("hbase.zookeeper.property.clientPort",Integer.toString(EmbeddedServerHelper.zooKeeperPort));
    conf.set("hbase.rootdir",hbaseRootDir);
    conf.set("hbase.master.dns.interface","lo");
    conf.set("hbase.regionserver.dns.interface","lo");
    LocalHBaseCluster cluster=new LocalHBaseCluster(conf,1,1);
    cluster.startup();
  }
 catch (  Exception ex) {
    System.err.println("Exception happened when running HBase: " + ex.getMessage());
  }
}
