{
  CacheMode cacheMode=getClusteringBuilder().cacheMode();
  boolean _fetchInMemoryState;
  if (fetchInMemoryState != null) {
    _fetchInMemoryState=fetchInMemoryState;
  }
 else   if (cacheMode.isReplicated() || cacheMode.isDistributed()) {
    log.trace("Cache is distributed or replicated but state transfer was not defined, enabling it by default");
    _fetchInMemoryState=true;
  }
 else {
    _fetchInMemoryState=false;
  }
  boolean _awaitInitialTransfer;
  if (awaitInitialTransfer != null) {
    _awaitInitialTransfer=awaitInitialTransfer;
  }
 else   if (cacheMode.isClustered()) {
    log.trace("Cache is distributed or replicated but awaitInitialTransfer was not defined, enabling it by default");
    _awaitInitialTransfer=true;
  }
 else {
    _awaitInitialTransfer=false;
  }
  return new StateTransferConfiguration(_fetchInMemoryState,fetchInMemoryState,timeout,chunkSize,_awaitInitialTransfer,awaitInitialTransfer);
}
