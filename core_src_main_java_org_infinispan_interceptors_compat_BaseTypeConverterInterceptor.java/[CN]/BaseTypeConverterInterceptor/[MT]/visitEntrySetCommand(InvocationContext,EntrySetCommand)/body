{
  Set<CacheEntry> set=(Set<CacheEntry>)super.visitEntrySetCommand(ctx,command);
  TypeConverter<Object,Object,Object,Object> converter=determineTypeConverter(command.getFlags());
  Set<InternalCacheEntry> backingSet=new HashSet<InternalCacheEntry>(set.size());
  for (  CacheEntry entry : set) {
    Object key=converter.unboxKey(entry.getKey());
    Object value=converter.unboxValue(entry.getValue());
    InternalCacheEntry newEntry=entryFactory.create(key,value,entry.getMetadata(),entry.getLifespan(),entry.getMaxIdle());
    backingSet.add(newEntry);
  }
  return EntrySetCommand.createFilteredEntrySet(backingSet,ctx,timerService,entryFactory);
}
