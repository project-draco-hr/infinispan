{
  final CreationalContext<Configuration> ctx=beanManager.createCreationalContext(null);
  final EmbeddedCacheManager defaultCacheManager=cacheManagers.select(new AnnotationLiteral<Default>(){
  }
).get();
  for (  ConfigurationHolder oneConfigurationHolder : configurations) {
    final String cacheName=oneConfigurationHolder.getName();
    final Configuration cacheConfiguration=oneConfigurationHolder.getProducer().produce(ctx);
    final Set<Annotation> cacheQualifiers=oneConfigurationHolder.getQualifiers();
    final Instance<EmbeddedCacheManager> specificCacheManager=cacheManagers.select(cacheQualifiers.toArray(new Annotation[cacheQualifiers.size()]));
    final EmbeddedCacheManager cacheManager=specificCacheManager.isUnsatisfied() ? defaultCacheManager : specificCacheManager.get();
    if (!cacheName.trim().isEmpty()) {
      if (cacheConfiguration != null) {
        cacheManager.defineConfiguration(cacheName,cacheConfiguration);
        log.cacheConfigurationDefined(cacheName,cacheManager);
      }
 else       if (!cacheManager.getCacheNames().contains(cacheName)) {
        cacheManager.defineConfiguration(cacheName,cacheManager.getDefaultCacheConfiguration());
        log.cacheConfigurationDefined(cacheName,cacheManager);
      }
    }
    eventBridge.registerObservers(cacheQualifiers,cacheName,cacheManager);
  }
}
