{
synchronized (this) {
    List<InboundTransferTask> transfers=transfersBySource.get(inboundTransfer.getSource());
    if (transfers != null) {
      if (transfers.remove(inboundTransfer)) {
        if (transfers.isEmpty()) {
          transfersBySource.remove(inboundTransfer.getSource());
        }
        for (        int segmentId : inboundTransfer.getSegments()) {
          transfersBySegment.remove(segmentId);
        }
      }
    }
  }
}
