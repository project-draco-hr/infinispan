{
  ReplicationQueueImpl rqi=new ReplicationQueueImpl();
  ScheduledFuture sf=mock(ScheduledFuture.class);
  when(sf.cancel(eq(true))).thenReturn(true);
  ScheduledExecutorService ses=mock(ScheduledExecutorService.class);
  when(ses.scheduleWithFixedDelay(any(Runnable.class),anyLong(),anyLong(),any(TimeUnit.class))).thenReturn(sf);
  RpcManager rpc=mock(RpcManager.class);
  CommandsFactory commandsFactory=mock(CommandsFactory.class);
  ConfigurationBuilder builder=new ConfigurationBuilder();
  builder.clustering().cacheMode(CacheMode.REPL_ASYNC).async().useReplQueue(true);
  rqi.injectDependencies(ses,rpc,builder.build(),commandsFactory,"");
  rqi.start();
  rqi.stop();
}
