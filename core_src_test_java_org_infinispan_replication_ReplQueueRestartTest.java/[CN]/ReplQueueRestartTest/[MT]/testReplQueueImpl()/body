{
  ReplicationQueueImpl rqi=new ReplicationQueueImpl();
  ScheduledFuture sf=mock(ScheduledFuture.class);
  when(sf.cancel(eq(true))).thenReturn(true);
  ScheduledExecutorService ses=mock(ScheduledExecutorService.class);
  when(ses.scheduleWithFixedDelay(any(Runnable.class),anyLong(),anyLong(),any(TimeUnit.class))).thenReturn(sf);
  RpcManager rpc=mock(RpcManager.class);
  CommandsFactory commandsFactory=mock(CommandsFactory.class);
  Configuration c=new Configuration();
  c.setUseReplQueue(true);
  rqi.injectDependencies(ses,rpc,c,commandsFactory);
  rqi.start();
  rqi.stop();
}
