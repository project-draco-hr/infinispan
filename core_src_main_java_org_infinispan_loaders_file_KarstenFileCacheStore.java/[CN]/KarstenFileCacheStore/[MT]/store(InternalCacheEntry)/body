{
  try {
    byte[] key=getMarshaller().objectToByteBuffer(entry.getKey());
    byte[] data=getMarshaller().objectToByteBuffer(entry.toInternalCacheValue());
    int len=KEY_POS + key.length + data.length;
    FileEntry fe=allocate(len);
    try {
      fe.expiryTime=entry.getExpiryTime();
      fe.keyLen=key.length;
      fe.dataLen=data.length;
      ByteBuffer buf=ByteBuffer.allocate(len);
      buf.putInt(fe.size);
      buf.putInt(fe.keyLen);
      buf.putInt(fe.dataLen);
      buf.putLong(fe.expiryTime);
      buf.put(key);
      buf.put(data);
      buf.flip();
      file.write(buf,fe.offset);
      fe=entries.put(entry.getKey(),fe);
      if (fe == null)       fe=evict();
    }
  finally {
      free(fe);
    }
  }
 catch (  Exception e) {
    throw new CacheLoaderException(e);
  }
}
