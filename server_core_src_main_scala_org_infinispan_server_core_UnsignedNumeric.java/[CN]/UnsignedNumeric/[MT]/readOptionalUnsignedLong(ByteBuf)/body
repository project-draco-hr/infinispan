{
  if (in.readableBytes() < 1) {
    in.resetReaderIndex();
    return OptionalLong.empty();
  }
  byte b=in.readByte();
  long i=b & 0x7F;
  for (int shift=7; (b & 0x80) != 0; shift+=7) {
    if (in.readableBytes() < 1) {
      in.resetReaderIndex();
      return OptionalLong.empty();
    }
    b=in.readByte();
    i|=(b & 0x7FL) << shift;
  }
  return OptionalLong.of(i);
}
