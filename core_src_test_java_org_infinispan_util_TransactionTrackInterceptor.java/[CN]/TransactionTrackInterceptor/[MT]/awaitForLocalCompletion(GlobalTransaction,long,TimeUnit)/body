{
  long endTimeout=unit.toMillis(timeout) + System.currentTimeMillis();
  while (System.currentTimeMillis() < endTimeout && !completedLocalTransactions(globalTransaction)) {
    sleep();
  }
  boolean completed=completedLocalTransactions(globalTransaction);
  log.debugf("[local] is %s completed? %s",globalTransaction.getId(),completed);
  return completed;
}
