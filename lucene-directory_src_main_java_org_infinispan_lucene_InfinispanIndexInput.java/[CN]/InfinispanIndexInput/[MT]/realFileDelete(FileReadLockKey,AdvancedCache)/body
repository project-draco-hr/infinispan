{
  final String indexName=readLockKey.getIndexName();
  final String filename=readLockKey.getFileName();
  int i=0;
  Object removed;
  ChunkCacheKey chunkKey=new ChunkCacheKey(indexName,filename,i);
  do {
    removed=cache.withFlags(Flag.SKIP_LOCKING).remove(chunkKey);
    chunkKey=new ChunkCacheKey(indexName,filename,++i);
  }
 while (removed != null);
  FileCacheKey key=new FileCacheKey(indexName,filename);
  cache.startBatch();
  cache.withFlags(Flag.SKIP_REMOTE_LOOKUP,Flag.SKIP_LOCKING,Flag.SKIP_CACHE_STORE).remove(readLockKey);
  cache.withFlags(Flag.SKIP_REMOTE_LOOKUP,Flag.SKIP_LOCKING).remove(key);
  cache.endBatch(true);
}
