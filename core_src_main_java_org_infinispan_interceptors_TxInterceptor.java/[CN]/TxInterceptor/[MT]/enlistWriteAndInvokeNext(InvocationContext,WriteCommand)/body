{
  if (shouldEnlist(ctx)) {
    TransactionXaAdapter xaAdapter=txEnlistingManager.enlist(ctx);
    InitiatorTxInvocationContext initiatorTxContext=(InitiatorTxInvocationContext)ctx;
    if (!isLocalModeForced(ctx)) {
      xaAdapter.addModification(command);
    }
    initiatorTxContext.setXaCache(xaAdapter);
  }
  if (!ctx.isInTxScope())   transactionLog.logNoTxWrite(command);
  return invokeNextInterceptor(ctx,command);
}
