{
  if (trace) {
    log.trace("Creating transaction for thread " + Thread.currentThread());
  }
  Transaction localTx;
  if (txManager == null)   throw new Exception("Failed to create local transaction; TransactionManager is null");
  txManager.begin();
  localTx=txManager.getTransaction();
  return localTx;
}
