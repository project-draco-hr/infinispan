{
  authzHelper.checkPermission(AuthorizationPermission.ADMIN);
  assertIsNotTerminated();
  if (cacheName == null || configOverride == null)   throw new NullPointerException("Null arguments not allowed");
  if (cacheName.equals(DEFAULT_CACHE_NAME))   throw new IllegalArgumentException("Cache name cannot be used as it is a reserved, internal name");
  if (checkExisting) {
    Configuration existing=configurationOverrides.get(cacheName);
    if (existing != null) {
      ConfigurationBuilder builder=new ConfigurationBuilder();
      builder.read(existing);
      builder.read(configOverride);
      Configuration configuration=builder.build(globalConfiguration);
      configurationOverrides.put(cacheName,configuration);
      return configuration;
    }
  }
  ConfigurationBuilder builder=new ConfigurationBuilder();
  if (defaultConfigIfNotPresent != null) {
    builder.read(defaultConfigIfNotPresent);
  }
 else {
    builder.read(defaultConfiguration);
  }
  builder.read(configOverride);
  Configuration configuration=builder.build(globalConfiguration);
  configurationOverrides.put(cacheName,configuration);
  return configuration;
}
