{
  assertIsNotTerminated();
  if (cacheName == null || configOverride == null)   throw new NullPointerException("Null arguments not allowed");
  if (cacheName.equals(DEFAULT_CACHE_NAME))   throw new IllegalArgumentException("Cache name cannot be used as it is a reserved, internal name");
  if (checkExisting) {
    Configuration existing=configurationOverrides.get(cacheName);
    if (existing != null) {
      ConfigurationBuilder builder=new ConfigurationBuilder();
      builder.read(existing);
      builder.read(configOverride);
      return builder.build();
    }
  }
  ConfigurationBuilder builder=new ConfigurationBuilder();
  builder.read(defaultConfigIfNotPresent);
  builder.read(configOverride);
  Configuration configuration=builder.build();
  configurationOverrides.put(cacheName,configuration);
  return configuration;
}
