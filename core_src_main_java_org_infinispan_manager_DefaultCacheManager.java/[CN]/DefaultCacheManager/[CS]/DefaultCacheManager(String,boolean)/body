{
  try {
    InfinispanConfiguration configuration=InfinispanConfiguration.newInfinispanConfiguration(configurationFile,InfinispanConfiguration.resolveSchemaPath(),Thread.currentThread().getContextClassLoader());
    globalConfiguration=configuration.parseGlobalConfiguration();
    globalConfiguration.accept(configurationValidator);
    defaultConfiguration=configuration.parseDefaultConfiguration();
    for (    Map.Entry<String,Configuration> entry : configuration.parseNamedConfigurations().entrySet()) {
      Configuration c=defaultConfiguration.clone();
      c.applyOverrides(entry.getValue());
      configurationOverrides.put(entry.getKey(),c);
    }
    globalComponentRegistry=new GlobalComponentRegistry(globalConfiguration,this,reflectionCache,caches.keySet());
    cacheCreateLock=new ReentrantLock();
  }
 catch (  RuntimeException re) {
    throw new ConfigurationException(re);
  }
  if (start)   start();
}
