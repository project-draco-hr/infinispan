{
  if (!txLock.isWriteLockedByCurrentThread()) {
    log.debug("Blocking new transactions");
    if (trace)     log.tracef("Acquiring exclusive state transfer shared lock, shared holders: %d",txLock.getReadLockCount());
    txLockLatch.close();
    txLock.writeLock().lockInterruptibly();
    log.trace("Acquired state transfer lock in exclusive mode");
    txLock.writeLock().unlock();
  }
 else {
    if (trace)     log.debug("New transactions were not unblocked by the previous rehash");
  }
}
