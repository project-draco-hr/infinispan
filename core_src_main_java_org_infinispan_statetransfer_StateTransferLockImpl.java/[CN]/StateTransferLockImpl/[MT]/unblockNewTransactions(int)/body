{
synchronized (lock) {
    if (!writesBlocked)     throw new IllegalStateException(String.format("Trying to unblock write commands for cache view %d but they were not blocked",cacheViewId));
    writesShouldBlock=false;
    writesBlocked=false;
    lock.notifyAll();
    if (cacheViewId != blockingCacheViewId && blockingCacheViewId != NO_BLOCKING_CACHE_VIEW)     throw new IllegalStateException(String.format("Trying to unblock write commands for cache view %d, but they were blocked with view id %d",cacheViewId,blockingCacheViewId));
  }
  log.debugf("Unblocked write commands for cache view %d",cacheViewId);
}
