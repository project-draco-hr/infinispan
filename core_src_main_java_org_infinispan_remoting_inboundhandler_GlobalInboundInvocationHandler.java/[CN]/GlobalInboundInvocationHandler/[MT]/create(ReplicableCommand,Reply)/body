{
  return new Runnable(){
    @Override public void run(){
      try {
        globalComponentRegistry.wireDependencies(command);
        Object retVal=command.perform(null);
        if (retVal != null && !(retVal instanceof Response)) {
          retVal=SuccessfulResponse.create(retVal);
        }
        reply.reply(retVal);
      }
 catch (      InterruptedException e) {
        log.shutdownHandlingCommand(command);
        reply.reply(shuttingDownResponse());
      }
catch (      Throwable throwable) {
        log.exceptionHandlingCommand(command,throwable);
        reply.reply(exceptionHandlingCommand(throwable));
      }
    }
  }
;
}
