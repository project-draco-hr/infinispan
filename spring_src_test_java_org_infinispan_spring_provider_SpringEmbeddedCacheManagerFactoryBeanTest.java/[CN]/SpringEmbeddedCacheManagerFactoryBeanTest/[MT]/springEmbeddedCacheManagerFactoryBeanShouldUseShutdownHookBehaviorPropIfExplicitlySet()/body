{
  final SpringEmbeddedCacheManagerFactoryBean objectUnderTest=new SpringEmbeddedCacheManagerFactoryBean();
  objectUnderTest.setShutdownHookBehavior(ShutdownHookBehavior.DONT_REGISTER.name());
  objectUnderTest.afterPropertiesSet();
  final SpringEmbeddedCacheManager springEmbeddedCacheManager=objectUnderTest.getObject();
  assertEquals("SpringEmbeddedCacheManagerFactoryBean should have used explicitly set ShutdownHookBehavior. However, it didn't.",ShutdownHookBehavior.DONT_REGISTER,springEmbeddedCacheManager.getNativeCacheManager().getGlobalConfiguration().getShutdownHookBehavior());
  springEmbeddedCacheManager.stop();
}
