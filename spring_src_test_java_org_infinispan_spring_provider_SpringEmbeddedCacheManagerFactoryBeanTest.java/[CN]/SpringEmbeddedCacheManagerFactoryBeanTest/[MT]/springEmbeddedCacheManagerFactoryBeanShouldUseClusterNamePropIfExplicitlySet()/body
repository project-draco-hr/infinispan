{
  final String expectedClusterName="expected.cluster.Name";
  final SpringEmbeddedCacheManagerFactoryBean objectUnderTest=new SpringEmbeddedCacheManagerFactoryBean();
  objectUnderTest.setClusterName(expectedClusterName);
  objectUnderTest.afterPropertiesSet();
  final SpringEmbeddedCacheManager springEmbeddedCacheManager=objectUnderTest.getObject();
  assertEquals("SpringEmbeddedCacheManagerFactoryBean should have used explicitly set ClusterName. However, it didn't.",expectedClusterName,springEmbeddedCacheManager.getNativeCacheManager().getCacheManagerConfiguration().transport().clusterName());
  springEmbeddedCacheManager.stop();
}
