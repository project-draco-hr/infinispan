{
  final boolean expectedExposeGlobalJmxStatistics=true;
  final SpringEmbeddedCacheManagerFactoryBean objectUnderTest=new SpringEmbeddedCacheManagerFactoryBean(){
    @Override protected EmbeddedCacheManager createCacheManager(    GlobalConfigurationBuilder globalBuilder,    ConfigurationBuilder builder){
      return TestCacheManagerFactory.createCacheManager(globalBuilder,builder);
    }
  }
;
  objectUnderTest.setExposeGlobalJmxStatistics(expectedExposeGlobalJmxStatistics);
  objectUnderTest.afterPropertiesSet();
  final SpringEmbeddedCacheManager springEmbeddedCacheManager=objectUnderTest.getObject();
  assertEquals("SpringEmbeddedCacheManagerFactoryBean should have used explicitly set ExposeGlobalJmxStatistics. However, it didn't.",expectedExposeGlobalJmxStatistics,springEmbeddedCacheManager.getNativeCacheManager().getGlobalConfiguration().isExposeGlobalJmxStatistics());
  springEmbeddedCacheManager.stop();
}
