{
  final MBeanServerLookup expectedMBeanServerLookup=new MBeanServerLookup(){
    @Override public MBeanServer getMBeanServer(    final Properties properties){
      return null;
    }
  }
;
  final SpringEmbeddedCacheManagerFactoryBean objectUnderTest=new SpringEmbeddedCacheManagerFactoryBean();
  objectUnderTest.setMBeanServerLookupClass(expectedMBeanServerLookup.getClass().getName());
  objectUnderTest.afterPropertiesSet();
  final SpringEmbeddedCacheManager springEmbeddedCacheManager=objectUnderTest.getObject();
  assertEquals("SpringEmbeddedCacheManagerFactoryBean should have used explicitly set MBeanServerLookupClass. However, it didn't.",expectedMBeanServerLookup.getClass().getName(),springEmbeddedCacheManager.getNativeCacheManager().getGlobalConfiguration().getMBeanServerLookup());
  springEmbeddedCacheManager.stop();
}
