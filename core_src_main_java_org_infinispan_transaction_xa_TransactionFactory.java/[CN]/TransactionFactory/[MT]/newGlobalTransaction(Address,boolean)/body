{
  GlobalTransaction gtx;
  if (dldEnabled) {
    DldGlobalTransaction globalTransaction;
    if (recoveryEnabled) {
      globalTransaction=new RecoveryAwareDldGlobalTransaction(addr,remote);
    }
 else {
      globalTransaction=new DldGlobalTransaction(addr,remote);
    }
    globalTransaction.setCoinToss(generateRandomId());
    gtx=globalTransaction;
  }
 else {
    if (recoveryEnabled) {
      gtx=new RecoveryAwareGlobalTransaction(addr,remote);
    }
 else {
      gtx=new GlobalTransaction(addr,remote);
    }
  }
  return gtx;
}
