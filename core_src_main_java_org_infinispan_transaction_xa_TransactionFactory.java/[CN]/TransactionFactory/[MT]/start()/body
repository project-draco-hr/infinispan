{
  boolean dldEnabled=configuration.deadlockDetection().enabled();
  boolean xa=!configuration.transaction().useSynchronization();
  boolean recoveryEnabled=configuration.transaction().recovery().enabled();
  boolean batchingEnabled=configuration.invocationBatching().enabled();
  init(dldEnabled,recoveryEnabled,xa,batchingEnabled);
  isClustered=configuration.clustering().cacheMode().isClustered();
  if (recoveryEnabled) {
    Transport transport=rpcManager != null ? rpcManager.getTransport() : null;
    clusterIdGenerator=new ClusterIdGenerator(cm,transport);
  }
}
