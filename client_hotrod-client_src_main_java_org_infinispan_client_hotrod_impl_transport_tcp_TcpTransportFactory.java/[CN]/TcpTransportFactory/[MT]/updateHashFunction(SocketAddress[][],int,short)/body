{
synchronized (lock) {
    SegmentConsistentHash hash=hashFactory.newConsistentHash(hashFunctionVersion);
    if (hash == null) {
      log.noHasHFunctionConfigured(hashFunctionVersion);
    }
 else {
      hash.init(segmentOwners,numSegments);
    }
    consistentHash=hash;
  }
}
