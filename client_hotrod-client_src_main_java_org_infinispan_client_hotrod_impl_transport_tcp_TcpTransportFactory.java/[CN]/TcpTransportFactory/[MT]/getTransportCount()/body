{
  if (Thread.currentThread().isInterrupted()) {
    return -1;
  }
synchronized (lock) {
    if (connectionPool.getMaxActive() > 0) {
      return Math.max(connectionPool.getMaxActive() * servers.size(),connectionPool.getMaxActive());
    }
 else {
      return 10 * servers.size();
    }
  }
}
