{
  mutating.lock();
  try {
    final List<Class<?>> reducedSet=new ArrayList<>(classes.length);
    for (    Class<?> type : classes) {
      if (!isIndexed(type)) {
        reducedSet.add(type);
      }
    }
    if (reducedSet.isEmpty()) {
      return;
    }
    final Class<?>[] newtypes=reducedSet.toArray(new Class<?>[reducedSet.size()]);
    transactionHelper.runSuspendingTx(new Operation(){
      @Override public void execute(){
        boolean isStatisticsEnabled=searchFactory.getStatistics().isStatisticsEnabled();
        searchFactory.addClasses(newtypes);
        searchFactory.getStatistics().setStatisticsEnabled(isStatisticsEnabled);
      }
    }
);
  }
  finally {
    mutating.unlock();
  }
}
