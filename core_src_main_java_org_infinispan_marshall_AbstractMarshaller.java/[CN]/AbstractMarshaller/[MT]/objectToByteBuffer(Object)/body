{
  int estimatedSize=0;
  if (o != null) {
    org.infinispan.commons.marshall.BufferSizePredictor sizePredictor=marshallableTypeHints.getBufferSizePredictor(o.getClass());
    byte[] bytes=objectToByteBuffer(o,sizePredictor.nextSize(o));
    sizePredictor.recordSize(bytes.length);
    return bytes;
  }
 else {
    return objectToByteBuffer(null,1);
  }
}
