{
  Boolean _fetchInMemoryState=fetchInMemoryState;
  if (getClusteringBuilder().cacheMode().isReplicated() && _fetchInMemoryState == null) {
    log.debug("Cache is replicated but state transfer was not defined, so force enabling it");
    _fetchInMemoryState=true;
  }
  if (_fetchInMemoryState == null)   _fetchInMemoryState=false;
  return new StateRetrievalConfiguration(alwaysProvideInMemoryState,_fetchInMemoryState.booleanValue(),fetchInMemoryState,initialRetryWaitTime,logFlushTimeout,maxNonProgressingLogWrites,numRetries,retryWaitTimeIncreaseFactor,timeout);
}
