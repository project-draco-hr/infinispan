{
  addNode(testAddresses[0],"m0",null,null);
  addNode(testAddresses[1],"m1",null,null);
  addNode(testAddresses[2],"m0",null,null);
  addNode(testAddresses[3],"m1",null,null);
  setAddresses();
  assertLocation(ch.locate(testAddresses[0],1),true,testAddresses[0]);
  assertLocation(ch.locate(testAddresses[1],1),true,testAddresses[1]);
  assertLocation(ch.locate(testAddresses[2],1),true,testAddresses[2]);
  assertLocation(ch.locate(testAddresses[3],1),true,testAddresses[3]);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[0],1),false);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[1],1),false);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[2],1),false);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[3],1),false);
  assertLocation(ch.locate(testAddresses[0],2),true,testAddresses[0],testAddresses[1]);
  assertLocation(ch.locate(testAddresses[1],2),true,testAddresses[1],testAddresses[2]);
  assertLocation(ch.locate(testAddresses[2],2),true,testAddresses[2],testAddresses[3]);
  assertLocation(ch.locate(testAddresses[3],2),true,testAddresses[3],testAddresses[0]);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[0],2),false,testAddresses[1],testAddresses[3]);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[1],2),false,testAddresses[0],testAddresses[2]);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[2],2),false,testAddresses[3],testAddresses[1]);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[3],2),false,testAddresses[0],testAddresses[2]);
  assertLocation(ch.locate(testAddresses[0],3),true,testAddresses[0],testAddresses[1],testAddresses[3]);
  assertLocation(ch.locate(testAddresses[1],3),true,testAddresses[1],testAddresses[2],testAddresses[0]);
  assertLocation(ch.locate(testAddresses[2],3),true,testAddresses[2],testAddresses[3],testAddresses[1]);
  assertLocation(ch.locate(testAddresses[3],3),true,testAddresses[3],testAddresses[0],testAddresses[2]);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[0],3),false,testAddresses[1],testAddresses[3]);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[1],3),false,testAddresses[0],testAddresses[2]);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[2],3),false,testAddresses[3],testAddresses[1]);
  assertLocation(ch.getStateProvidersOnLeave(testAddresses[3],3),false,testAddresses[0],testAddresses[2]);
}
