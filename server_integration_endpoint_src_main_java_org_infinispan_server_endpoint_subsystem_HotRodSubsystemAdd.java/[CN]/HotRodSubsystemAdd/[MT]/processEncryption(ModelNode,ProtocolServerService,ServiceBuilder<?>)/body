{
  if (config.hasDefined(ModelKeys.ENCRYPTION) && config.get(ModelKeys.ENCRYPTION,ModelKeys.ENCRYPTION_NAME).isDefined()) {
    EndpointUtils.addSecurityRealmDependency(builder,config.get(ModelKeys.ENCRYPTION,ModelKeys.ENCRYPTION_NAME,ModelKeys.SECURITY_REALM).asString(),service.getEncryptionSecurityRealm());
    config=config.get(ModelKeys.ENCRYPTION,ModelKeys.ENCRYPTION_NAME);
    if (config.get(ModelKeys.SNI).isDefined()) {
      for (      ModelNode sniConfiguration : config.get(ModelKeys.SNI).asList()) {
        if (sniConfiguration.get(0).hasDefined(ModelKeys.SECURITY_REALM)) {
          String sniHostName=sniConfiguration.get(0).get(ModelKeys.HOST_NAME).asString();
          String securityRealm=sniConfiguration.get(0).get(ModelKeys.SECURITY_REALM).asString();
          EndpointUtils.addSecurityRealmDependency(builder,securityRealm,service.getSniSecurityRealm(sniHostName));
        }
      }
    }
  }
}
