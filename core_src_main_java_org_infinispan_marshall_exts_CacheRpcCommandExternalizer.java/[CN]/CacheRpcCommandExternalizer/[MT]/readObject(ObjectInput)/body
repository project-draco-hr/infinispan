{
  byte type=input.readByte();
  byte methodId=(byte)input.readShort();
  ByteString cacheName=ByteString.readObject(input);
  StreamingMarshaller marshaller=getCacheMarshaller(cacheName);
  ObjectInput paramsInput=marshaller.startObjectInput(convertInputStream(input),true);
  if (paramsInput instanceof ExtendedRiverUnmarshaller) {
    ((ExtendedRiverUnmarshaller)paramsInput).setInfinispanMarshaller(marshaller);
  }
  CacheRpcCommand cacheRpcCommand;
  try {
    cacheRpcCommand=cmdExt.fromStream(methodId,type,cacheName);
    cmdExt.readCommandParameters(paramsInput,cacheRpcCommand);
  }
  finally {
    marshaller.finishObjectInput(paramsInput);
  }
  return cacheRpcCommand;
}
