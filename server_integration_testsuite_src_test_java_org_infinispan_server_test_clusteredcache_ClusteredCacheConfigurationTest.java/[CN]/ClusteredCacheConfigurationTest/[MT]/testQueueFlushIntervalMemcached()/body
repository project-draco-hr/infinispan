{
  final MemcachedClient mc1=new MemcachedClient(server1.getMemcachedEndpoint().getInetAddress().getHostName(),server1.getMemcachedEndpoint().getPort());
  final MemcachedClient mc2=new MemcachedClient(server2.getMemcachedEndpoint().getInetAddress().getHostName(),server2.getMemcachedEndpoint().getPort());
  mc1.set("k1","v1");
  assertNotNull(mc1.get("k1"));
  String value=mc2.get("k1");
  if (value == null) {
    eventually(new TestUtil.Condition(){
      @Override public boolean isSatisfied() throws Exception {
        return mc1.get("k1") != null && mc2.get("k1") != null;
      }
    }
,3000,10);
  }
 else {
    mc1.set("k2","v2");
    assertNotNull(mc1.get("k2"));
    assertNull(mc1.get("k2"));
    Thread.sleep(3000);
    assertNotNull(mc1.get("k2"));
  }
}
