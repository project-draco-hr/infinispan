{
  super.processModelNode(context,containerName,cache,builder,dependencies);
  final Mode mode=Mode.valueOf(ClusteredCacheResource.MODE.resolveModelAttribute(context,cache).asString());
  final long remoteTimeout=ClusteredCacheResource.REMOTE_TIMEOUT.resolveModelAttribute(context,cache).asLong();
  final int queueSize=ClusteredCacheResource.QUEUE_SIZE.resolveModelAttribute(context,cache).asInt();
  final long queueFlushInterval=ClusteredCacheResource.QUEUE_FLUSH_INTERVAL.resolveModelAttribute(context,cache).asLong();
  CacheMode cacheMode=mode.apply(this.mode);
  builder.clustering().cacheMode(cacheMode);
  if (cacheMode.isSynchronous()) {
    builder.clustering().sync().replTimeout(remoteTimeout);
  }
 else {
    builder.clustering().async().useReplQueue(queueSize > 0);
    builder.clustering().async().replQueueMaxElements(queueSize);
    builder.clustering().async().replQueueInterval(queueFlushInterval);
  }
}
