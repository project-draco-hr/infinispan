{
  super(cache,cache.getBatchContainer());
  if (cache.getConfiguration().isIndexingEnabled())   throw new ConfigurationException("TreeCache cannot be used with a Cache instance configured to use indexing!");
  assertBatchingSupported(cache.getConfiguration());
  if (cache instanceof DecoratedCacheAdapter) {
    flagsOnCache=((DecoratedCacheAdapter)cache).getFlags();
  }
 else   if (cache instanceof DecoratedCache) {
    flagsOnCache=((DecoratedCache)cache).getFlags();
  }
 else {
    flagsOnCache=null;
  }
  createRoot();
}
