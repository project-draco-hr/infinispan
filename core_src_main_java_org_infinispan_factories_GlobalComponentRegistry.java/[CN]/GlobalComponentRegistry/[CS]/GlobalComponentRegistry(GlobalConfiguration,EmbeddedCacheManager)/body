{
  if (configuration == null)   throw new NullPointerException("GlobalConfiguration cannot be null!");
  try {
    globalConfiguration=configuration;
    registerDefaultClassLoader(null);
    registerComponent(this,GlobalComponentRegistry.class);
    registerComponent(cacheManager,EmbeddedCacheManager.class);
    registerComponent(configuration,GlobalConfiguration.class);
    registerComponent(new CacheManagerJmxRegistration(),CacheManagerJmxRegistration.class);
    registerComponent(new CacheManagerNotifierImpl(),CacheManagerNotifier.class);
  }
 catch (  Exception e) {
    throw new CacheException("Unable to construct a GlobalComponentRegistry!",e);
  }
}
