{
  NettyChannelUpstreamHandler handler=new NettyChannelUpstreamHandler(commandHandler,acceptedChannels);
  this.pipeline=new NettyChannelPipelineFactory(decoder,handler);
  this.address=address;
  if (workerThreads == 0) {
    factory=new NioServerSocketChannelFactory(masterExecutor,workerExecutor);
  }
 else {
    factory=new NioServerSocketChannelFactory(masterExecutor,workerExecutor,workerThreads);
  }
}
