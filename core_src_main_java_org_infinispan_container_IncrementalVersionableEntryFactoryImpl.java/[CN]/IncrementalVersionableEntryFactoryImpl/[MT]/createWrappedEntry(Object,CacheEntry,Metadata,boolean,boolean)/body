{
  Metadata metadata;
  Object value;
  if (cacheEntry != null) {
    value=cacheEntry.getValue();
    Metadata entryMetadata=cacheEntry.getMetadata();
    if (providedMetadata != null && entryMetadata != null) {
      metadata=providedMetadata.builder().read(entryMetadata).build();
    }
 else     if (providedMetadata == null) {
      metadata=entryMetadata;
    }
 else {
      metadata=providedMetadata;
    }
  }
 else {
    value=null;
    metadata=providedMetadata;
  }
  if (value == null && !isForInsert)   return forRemoval ? new NullMarkerEntryForRemoval(key,metadata) : NullMarkerEntry.getInstance();
  return new ClusteredRepeatableReadEntry(key,value,metadata);
}
