{
  int currentSize=0;
  int loopCounter=0;
  while (currentSize < expectedSize) {
    try {
      Thread.sleep(10);
    }
 catch (    InterruptedException e) {
      throw new AssertionFailedError(e.getMessage());
    }
    currentSize=clusterSize(node,entityType);
    if (loopCounter > 200) {
      throw new AssertionFailedError("timeout while waiting for all nodes to join in cluster");
    }
  }
}
