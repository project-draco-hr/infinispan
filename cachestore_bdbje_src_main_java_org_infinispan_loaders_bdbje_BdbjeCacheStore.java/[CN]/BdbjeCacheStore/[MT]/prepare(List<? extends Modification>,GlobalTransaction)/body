{
  if (trace)   log.tracef("preparing transaction %s",tx);
  try {
    transactionRunner.prepare(new ModificationsTransactionWorker(this,mods));
    Transaction txn=currentTransaction.getTransaction();
    if (trace)     log.tracef("transaction %s == sleepycat transaction %s",tx,txn);
    txnMap.put(tx,txn);
    ((ThreadLocal)ReflectionUtil.getValue(currentTransaction,"localTrans")).remove();
  }
 catch (  Exception e) {
    throw convertToCacheLoaderException("Problem preparing transaction",e);
  }
}
