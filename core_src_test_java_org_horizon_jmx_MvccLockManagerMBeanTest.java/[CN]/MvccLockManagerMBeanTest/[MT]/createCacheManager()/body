{
  GlobalConfiguration globalConfiguration=GlobalConfiguration.getNonClusteredDefault();
  globalConfiguration.setExposeGlobalJmxStatistics(true);
  globalConfiguration.setMBeanServerLookup(PerThreadMBeanServerLookup.class.getName());
  globalConfiguration.setJmxDomain("MvccLockManagerMBeanTest");
  cacheManager=TestCacheManagerFactory.createCacheManager(globalConfiguration);
  Configuration configuration=getDefaultClusteredConfig(Configuration.CacheMode.LOCAL);
  configuration.setExposeJmxStatistics(true);
  configuration.setTransactionManagerLookupClass(DummyTransactionManagerLookup.class.getName());
  configuration.setConcurrencyLevel(CONCURRENCY_LEVEL);
  cacheManager.defineCache("test",configuration);
  cache=cacheManager.getCache("test");
  lockManagerObjName=new ObjectName("MvccLockManagerMBeanTest:cache-name=test(local),jmx-resource=MvccLockManager");
  threadMBeanServer=PerThreadMBeanServerLookup.getThreadMBeanServer();
  return cacheManager;
}
