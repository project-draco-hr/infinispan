{
  if (hasSkipLocking(command)) {
    return ctx.continueInvocation();
  }
  if (!ctx.isInTxScope()) {
    ctx.onReturn(unlockAllReturnHandler);
  }
  lockAllAndRecord(ctx,Arrays.asList(command.getKeys()),getLockTimeoutMillis(command));
  return ctx.continueInvocation();
}
