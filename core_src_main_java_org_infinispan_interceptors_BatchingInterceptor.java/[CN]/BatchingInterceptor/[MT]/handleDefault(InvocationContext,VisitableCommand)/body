{
  Transaction tx;
  if (!ctx.isOriginLocal())   return invokeNextInterceptor(ctx,command);
  if (transactionManager.getTransaction() == null && (tx=batchContainer.getBatchTransaction()) != null) {
    try {
      transactionManager.resume(tx);
      InvocationContext txContext=icc.createInvocationContext(true);
      txContext.setFlags(ctx.getFlags());
      return invokeNextInterceptor(txContext,command);
    }
  finally {
      if (transactionManager.getTransaction() != null && batchContainer.isSuspendTxAfterInvocation())       transactionManager.suspend();
    }
  }
 else {
    return invokeNextInterceptor(ctx,command);
  }
}
