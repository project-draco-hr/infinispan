{
  Value append=new Value(flags,data);
  Value current=(Value)cache.get(key);
  if (current != null) {
    byte[] concatenated=concat(current.getData(),append.getData());
    Value next=new Value(current.getFlags(),concatenated);
    boolean replaced=cache.replace(key,current,next);
    if (replaced)     return Reply.STORED;
 else     return Reply.NOT_STORED;
  }
 else {
    return Reply.NOT_STORED;
  }
}
