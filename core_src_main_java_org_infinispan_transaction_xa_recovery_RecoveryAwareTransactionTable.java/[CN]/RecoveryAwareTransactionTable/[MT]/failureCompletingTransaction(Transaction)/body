{
  RecoveryAwareLocalTransaction remove=(RecoveryAwareLocalTransaction)localTransactions.get(tx);
  if (remove == null)   throw new CacheException(String.format("Local transaction for transaction (%s) not found",tx));
  remove.setCompletionFailed(true);
  if (log.isTraceEnabled())   log.tracef("Marked as completion failed %s",remove);
  localTransactions.remove(tx);
}
