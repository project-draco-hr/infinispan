{
  this.config=cache.getCacheConfiguration();
  this.cacheName=cache.getName();
  for (  BackupConfiguration bc : config.sites().enabledBackups()) {
    if (bc.backupFailurePolicy() == BackupFailurePolicy.CUSTOM) {
      String backupPolicy=bc.failurePolicyClass();
      if (backupPolicy == null) {
        throw new IllegalStateException("Backup policy class missing for custom failure policy!");
      }
      CustomFailurePolicy instance=Util.getInstance(backupPolicy,globalConfig.classLoader());
      siteFailurePolicy.put(bc.site(),instance);
    }
    OfflineStatus offline=new OfflineStatus(bc.takeOffline());
    offlineStatus.put(bc.site(),offline);
  }
}
