{
  if (cache == null) {
    throw new NullPointerException("The cache parameter passed in is null");
  }
  if (!cache.getConfiguration().isInvocationBatchingEnabled()) {
    throw new ConfigurationException("invocationBatching is not enabled. Make sure this is enabled by" + " calling config.setInvocationBatchingEnabled(true)");
  }
  return new TreeCacheImpl<K,V>(cache);
}
