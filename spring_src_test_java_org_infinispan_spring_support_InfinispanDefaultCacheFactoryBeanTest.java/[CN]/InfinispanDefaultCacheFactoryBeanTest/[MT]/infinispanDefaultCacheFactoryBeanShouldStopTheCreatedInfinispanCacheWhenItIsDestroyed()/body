{
  final InfinispanDefaultCacheFactoryBean<Object,Object> objectUnderTest=new InfinispanDefaultCacheFactoryBean<Object,Object>();
  objectUnderTest.setInfinispanCacheContainer(new DefaultCacheManager());
  objectUnderTest.afterPropertiesSet();
  final Cache<Object,Object> cache=objectUnderTest.getObject();
  objectUnderTest.destroy();
  assertEquals("InfinispanDefaultCacheFactoryBean should have stopped the created Infinispan cache when being destroyed. " + "However, the created Infinispan is not yet terminated.",ComponentStatus.TERMINATED,cache.getStatus());
}
