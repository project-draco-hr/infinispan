{
  if (!ctx.hasFlag(Flag.SKIP_LOCKING))   txLock.readLock().lock();
  if (loggingEnabled) {
    GlobalTransaction gtx;
    if (!uncommittedPrepares.containsKey(gtx=ctx.getGlobalTransaction()))     uncommittedPrepares.put(gtx,cf.buildPrepareCommand(gtx,ctx.getModifications(),false));
  }
}
