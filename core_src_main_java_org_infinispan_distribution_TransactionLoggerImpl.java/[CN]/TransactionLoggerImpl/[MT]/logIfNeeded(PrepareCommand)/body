{
  if (enabled) {
    loggingLock.readLock().lock();
    try {
      if (enabled) {
        if (trace)         log.trace("Logging prepare for tx {0}",command.getGlobalTransaction());
        uncommittedPrepares.put(command.getGlobalTransaction(),command);
      }
    }
  finally {
      loggingLock.readLock().unlock();
    }
  }
}
