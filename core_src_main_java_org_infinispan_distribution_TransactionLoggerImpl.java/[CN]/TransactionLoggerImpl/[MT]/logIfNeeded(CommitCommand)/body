{
  if (enabled) {
    loggingLock.readLock().lock();
    try {
      if (enabled) {
        if (trace)         log.trace("Logging commit for tx {0}",command.getGlobalTransaction());
        PrepareCommand pc=uncommittedPrepares.remove(command.getGlobalTransaction());
        logModificationsInTransaction(pc);
      }
    }
  finally {
      loggingLock.readLock().unlock();
    }
  }
}
