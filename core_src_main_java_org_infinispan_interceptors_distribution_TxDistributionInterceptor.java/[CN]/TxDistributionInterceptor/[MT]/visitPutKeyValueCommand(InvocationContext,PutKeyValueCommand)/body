{
  if (command.hasFlag(Flag.PUT_FOR_EXTERNAL_READ)) {
    return handleNonTxWriteCommand(ctx,command);
  }
  Object returnValue=handleTxWriteCommand(ctx,command,command.getKey());
  if (ctx.isOriginLocal()) {
    command.setValueMatcher(command.isSuccessful() ? ValueMatcher.MATCH_ALWAYS : ValueMatcher.MATCH_NEVER);
  }
  return ctx.shortCircuit(returnValue);
}
