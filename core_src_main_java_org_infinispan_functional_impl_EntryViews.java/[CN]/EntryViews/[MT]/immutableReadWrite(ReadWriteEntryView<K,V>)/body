{
  K key=view.key();
  Optional<V> maybeV=view.find();
  Metadata metadata;
  if (view instanceof EntryBackedReadWriteView)   metadata=((EntryBackedReadWriteView)view).entry.getMetadata();
 else   if (view instanceof EntryAndPreviousReadWriteView)   metadata=((EntryAndPreviousReadWriteView)view).prevMetadata;
 else   throw new IllegalStateException("Unknow read-write view: " + view);
  return new ImmutableReadWriteView<>(key,maybeV,metadata);
}
