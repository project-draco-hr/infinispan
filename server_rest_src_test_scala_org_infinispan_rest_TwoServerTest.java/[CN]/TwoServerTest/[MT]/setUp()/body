{
  ConfigurationBuilder cfgBuilder=AbstractCacheTest.getDefaultClusteredCacheConfig(CacheMode.DIST_SYNC,true);
  cfgBuilder.transaction().transactionManagerLookup(new DummyTransactionManagerLookup());
  cfgBuilder.clustering().hash().numOwners(2);
  cfgBuilder.clustering().stateTransfer().fetchInMemoryState(true);
  cfgBuilder.clustering().stateTransfer().timeout(20000);
  RestServerConfigurationBuilder restCfgBuilder=new RestServerConfigurationBuilder();
  addServer("1",8890,TestCacheManagerFactory.createClusteredCacheManager(cfgBuilder),restCfgBuilder.build());
  addServer("2",8891,TestCacheManagerFactory.createClusteredCacheManager(cfgBuilder),restCfgBuilder.build());
  startServers();
  TestingUtil.blockUntilViewsReceived(10000,getCacheManager("1").getCache(BasicCacheContainer.DEFAULT_CACHE_NAME),getCacheManager("2").getCache(BasicCacheContainer.DEFAULT_CACHE_NAME));
  createClient();
}
