{
  String queryString1="from org.infinispan.objectfilter.test.model.Person p where p.name = 'John'";
  String queryString2="from org.infinispan.objectfilter.test.model.Person p where p.phoneNumbers.number = '004012345'";
  BaseMatcher matcher=createMatcher();
  final int[] matchCount1=new int[1];
  matcher.registerFilter(queryString1,new FilterCallback(){
    @Override public void onFilterResult(    Object instance,    Object[] projection,    boolean isMatching){
      if (isMatching) {
        matchCount1[0]++;
      }
    }
  }
);
  final int[] matchCount2=new int[1];
  matcher.registerFilter(queryString2,new FilterCallback(){
    @Override public void onFilterResult(    Object instance,    Object[] projection,    boolean isMatching){
      if (isMatching) {
        matchCount2[0]++;
      }
    }
  }
);
  matcher.match(createPerson());
  assertEquals(1,matchCount1[0]);
  assertEquals(1,matchCount2[0]);
}
