{
  currentCh=newCh;
  try {
    stateTransferLock.blockNewTransactions(topologyId);
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
  }
  stateProvider.onTopologyUpdate(topologyId,newCh);
  stateConsumer.onTopologyUpdate(topologyId,newCh);
}
