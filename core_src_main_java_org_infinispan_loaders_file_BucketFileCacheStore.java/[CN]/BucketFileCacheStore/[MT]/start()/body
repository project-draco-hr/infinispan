{
  super.start();
  root=getBackupLocation(configuration.location(),cache.getName());
  if (!root.exists()) {
    root=getLocation(configuration.location(),cache.getName());
    if (!root.exists()) {
      log.bucketCacheStoreDeprecated(root);
      if (!root.mkdirs())       log.problemsCreatingDirectory(root);
    }
  }
  streamBufferSize=configuration.streamBufferSize();
  FileCacheStoreConfigurationBuilder.FsyncMode fsyncMode=configuration.fsyncMode();
switch (fsyncMode) {
case DEFAULT:
    fileSync=new BufferedFileSync();
  break;
case PER_WRITE:
fileSync=new PerWriteFileSync();
break;
case PERIODIC:
fileSync=new PeriodicFileSync(configuration.fsyncInterval());
break;
}
log.debugf("Using %s file sync mode",fsyncMode);
}
