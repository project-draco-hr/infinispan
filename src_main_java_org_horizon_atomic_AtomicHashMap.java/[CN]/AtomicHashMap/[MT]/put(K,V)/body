{
  PutOperation<K,V> op=new PutOperation<K,V>();
  op.key=key;
  op.newValue=value;
  op.oldValue=delegate.put(key,value);
  delta.addOperation(op);
  return op.oldValue;
}
