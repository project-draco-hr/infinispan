{
  boolean suppressExceptions=false;
  if (trace)   log.trace("Invoked with command " + command + " and InvocationContext ["+ ctx+ "]");
  if (ctx == null)   throw new IllegalStateException("Null context not allowed!!");
  if (ctx.hasFlag(Flag.FAIL_SILENTLY)) {
    suppressExceptions=true;
  }
  try {
    return invokeNextInterceptor(ctx,command);
  }
 catch (  Throwable th) {
    if (suppressExceptions) {
      log.trace("Exception while executing code, failing silently...",th);
      return null;
    }
 else {
      if (ctx.isInTxScope() && ctx.isOriginLocal()) {
        if (trace)         log.trace("Transaction marked for rollback as exception was received.");
        markTxForRollbackAndRethrow(ctx,th);
        throw new IllegalStateException("This should not be reached");
      }
      log.error("Execution error: ",th);
      throw th;
    }
  }
 finally {
    ctx.reset();
  }
}
