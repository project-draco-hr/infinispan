{
  try {
    int numFiles=objectInput.readInt();
    byte[] buffer=new byte[streamBufferSize];
    int bytesRead, totalBytesRead=0;
    for (int i=0; i < numFiles; i++) {
      String fName=(String)objectInput.readObject();
      int numBytes=objectInput.readInt();
      FileOutputStream fos=new FileOutputStream(root.getAbsolutePath() + File.separator + fName);
      BufferedOutputStream bos=new BufferedOutputStream(fos,streamBufferSize);
      while (numBytes > totalBytesRead) {
        if ((numBytes - totalBytesRead) > streamBufferSize) {
          bytesRead=objectInput.read(buffer,0,streamBufferSize);
        }
 else {
          bytesRead=objectInput.read(buffer,0,numBytes - totalBytesRead);
        }
        if (bytesRead == -1)         break;
        totalBytesRead+=bytesRead;
        bos.write(buffer,0,bytesRead);
      }
      bos.flush();
      safeClose(bos);
      fos.flush();
      safeClose(fos);
      totalBytesRead=0;
    }
  }
 catch (  IOException e) {
    throw new CacheLoaderException("I/O error",e);
  }
catch (  ClassNotFoundException e) {
    throw new CacheLoaderException("Unexpected exception",e);
  }
}
