{
  final PathAddress address=PathAddress.pathAddress(operation.require(OP_ADDR));
  final String cacheContainerName=address.getLastElement().getValue();
  final String attrName=operation.require(ModelDescriptionConstants.NAME).asString();
  final ServiceController<?> controller=context.getServiceRegistry(false).getService(EmbeddedCacheManagerService.getServiceName(cacheContainerName));
  DefaultEmbeddedCacheManager cacheManager=(DefaultEmbeddedCacheManager)controller.getValue();
  CacheManagerMetrics metric=CacheManagerMetrics.getStat(attrName);
  ModelNode result=new ModelNode();
  if (metric == null) {
    context.getFailureDescription().set(String.format("Unknown metric %s",attrName));
  }
 else   if (cacheManager == null) {
    context.getFailureDescription().set(String.format("Unavailable cache container %s",attrName));
  }
 else {
switch (metric) {
case CACHE_MANAGER_STATUS:
      result.set(SecurityActions.getCacheManagerStatus(cacheManager).toString());
    break;
case IS_COORDINATOR:
  result.set(SecurityActions.getCacheManagerIsCoordinator(cacheManager));
break;
case LOCAL_ADDRESS:
Address localAddress=SecurityActions.getCacheManagerLocalAddress(cacheManager);
result.set(localAddress != null ? localAddress.toString() : "N/A");
break;
case COORDINATOR_ADDRESS:
Address coordinatorAddress=SecurityActions.getCacheManagerCoordinatorAddress(cacheManager);
result.set(coordinatorAddress != null ? coordinatorAddress.toString() : "N/A");
break;
case CLUSTER_NAME:
String clusterName=SecurityActions.getCacheManagerClusterName(cacheManager);
result.set(clusterName != null ? clusterName : "N/A");
}
context.getResult().set(result);
}
context.stepCompleted();
}
