{
  InternalCacheRegistry icr=cr.getGlobalComponentRegistry().getComponent(InternalCacheRegistry.class);
  if (!icr.isInternalCache(cacheName)) {
    ProtobufMetadataManagerImpl protobufMetadataManager=(ProtobufMetadataManagerImpl)cr.getGlobalComponentRegistry().getComponent(ProtobufMetadataManager.class);
    protobufMetadataManager.getCache();
    cr.registerComponent(new ProtobufMatcher(protobufMetadataManager.getSerializationContext()),ProtobufMatcher.class);
    if (cfg.compatibility().enabled()) {
      cr.registerComponent(new CompatibilityReflectionMatcher(protobufMetadataManager.getSerializationContext()),CompatibilityReflectionMatcher.class);
    }
    if (cfg.indexing().index().isEnabled() && !cfg.compatibility().enabled()) {
      log.infof("Registering RemoteValueWrapperInterceptor for cache %s",cacheName);
      createRemoteValueWrapperInterceptor(cr,cfg);
    }
  }
}
