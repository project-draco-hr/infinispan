{
  if (log.isTraceEnabled()) {
    log.trace("afterCompletion(%s) called for %s.",status,localTransaction);
  }
  if (status == Status.STATUS_COMMITTED) {
    try {
      txCoordinator.commit(localTransaction,false);
    }
 catch (    XAException e) {
      throw new CacheException("Could not commit.",e);
    }
  }
 else   if (status == Status.STATUS_ROLLEDBACK) {
    try {
      txCoordinator.rollback(localTransaction);
    }
 catch (    XAException e) {
      throw new CacheException("Could not commit.",e);
    }
  }
 else {
    throw new IllegalArgumentException("Unknown status: " + status);
  }
}
