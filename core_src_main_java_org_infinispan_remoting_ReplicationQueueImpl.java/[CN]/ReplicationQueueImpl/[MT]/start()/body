{
  AsyncConfiguration asyncCfg=configuration.clustering().async();
  long interval=asyncCfg.replQueueInterval();
  trace=log.isTraceEnabled();
  if (trace)   log.tracef("Starting replication queue, with interval %d and maxElements %s",interval,maxElements);
  this.maxElements=asyncCfg.replQueueMaxElements();
  enabled=asyncCfg.useReplQueue();
  if (enabled && interval > 0) {
    scheduledFuture=scheduledExecutor.scheduleWithFixedDelay(new Runnable(){
      @Override public void run(){
        LogFactory.pushNDC(cacheName,trace);
        try {
          flush();
        }
  finally {
          LogFactory.popNDC(trace);
        }
      }
    }
,interval,interval,TimeUnit.MILLISECONDS);
  }
}
