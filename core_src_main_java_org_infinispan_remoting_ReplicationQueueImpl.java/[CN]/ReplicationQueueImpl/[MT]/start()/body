{
  long interval=configuration.getReplQueueInterval();
  trace=log.isTraceEnabled();
  if (trace)   log.tracef("Starting replication queue, with interval %d and maxElements %s",interval,maxElements);
  this.maxElements=configuration.getReplQueueMaxElements();
  enabled=configuration.isUseReplQueue();
  if (enabled && interval > 0) {
    scheduledFuture=scheduledExecutor.scheduleWithFixedDelay(new Runnable(){
      public void run(){
        LogFactory.pushNDC(configuration.getName(),trace);
        try {
          flush();
        }
  finally {
          LogFactory.popNDC(trace);
        }
      }
    }
,interval,interval,TimeUnit.MILLISECONDS);
  }
}
