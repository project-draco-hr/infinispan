{
  long interval=configuration.getReplQueueInterval();
  log.tracef("Starting replication queue, with interval %s and maxElements %s",interval,maxElements);
  this.maxElements=configuration.getReplQueueMaxElements();
  enabled=configuration.isUseReplQueue();
  if (enabled && interval > 0) {
    scheduledFuture=scheduledExecutor.scheduleWithFixedDelay(new Runnable(){
      public void run(){
        NDC.push(configuration.getName());
        try {
          flush();
        }
  finally {
          NDC.pop();
        }
      }
    }
,interval,interval,TimeUnit.MILLISECONDS);
  }
}
