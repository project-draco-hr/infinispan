{
  Set<AbstractComponentRegistry.Component> components=cache.getComponentRegistry().getRegisteredComponents();
  GlobalConfiguration configuration=cache.getConfiguration().getGlobalConfiguration();
  MBeanServer beanServer=getMBeanServer(configuration);
  ComponentsJmxRegistration registrator=new ComponentsJmxRegistration(beanServer,components,getGroupName());
  GlobalConfiguration globalConfiguration=cache.getConfiguration().getGlobalConfiguration();
  updateDomain(registrator,cache.getAdvancedCache().getComponentRegistry().getGlobalComponentRegistry(),beanServer);
  return registrator;
}
