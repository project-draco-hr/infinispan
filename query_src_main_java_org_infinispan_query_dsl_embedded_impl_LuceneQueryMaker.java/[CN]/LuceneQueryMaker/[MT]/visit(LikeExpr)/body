{
  PropertyValueExpr propertyValueExpr=(PropertyValueExpr)likeExpr.getChild();
  String[] propertyPath=propertyValueExpr.getPropertyPath();
  ensureNotAnalyzed(propertyPath);
  StringBuilder lucenePattern=new StringBuilder(likeExpr.getPattern());
  for (int i=0; i < lucenePattern.length(); i++) {
switch (lucenePattern.charAt(i)) {
case LUCENE_MULTIPLE_CHARACTERS_WILDCARD:
case LUCENE_SINGLE_CHARACTER_WILDCARD:
      lucenePattern.insert(i,'\\');
    i++;
  break;
case '%':
lucenePattern.setCharAt(i,LUCENE_MULTIPLE_CHARACTERS_WILDCARD);
break;
case '_':
lucenePattern.setCharAt(i,LUCENE_SINGLE_CHARACTER_WILDCARD);
break;
}
}
return applyFieldBridge(propertyPath,queryBuilder.keyword().wildcard().onField(StringHelper.join(propertyPath))).matching(lucenePattern.toString()).createQuery();
}
