{
  BaseEvictionAlgorithmConfig config=getNewEvictionAlgorithmConfig();
  config.setMaxEntries(3);
  config.setMinEntries(20);
  BlockingQueue<EvictionEvent> eventQueue=new LinkedBlockingQueue<EvictionEvent>();
  eventQueue.put(new EvictionEvent("one",ADD_ENTRY_EVENT));
  eventQueue.put(new EvictionEvent("two",ADD_ENTRY_EVENT));
  eventQueue.put(new EvictionEvent("three",ADD_ENTRY_EVENT));
  eventQueue.put(new EvictionEvent("four",ADD_ENTRY_EVENT));
  EvictionAlgorithm algo=createAndInit(config);
  EvictionAction mockAction=createMock(EvictionAction.class);
  algo.setEvictionAction(mockAction);
  if (timeOrderedQueue()) {
    if (reverseOrder()) {
      EasyMock.expect(mockAction.evict(eq("four"))).andReturn(true).once();
    }
 else {
      EasyMock.expect(mockAction.evict(eq("one"))).andReturn(true).once();
    }
  }
 else {
    EasyMock.expect(mockAction.evict(anyObject())).andReturn(true).once();
  }
  EasyMock.replay(mockAction);
  algo.process(eventQueue);
  EasyMock.verify(mockAction);
}
