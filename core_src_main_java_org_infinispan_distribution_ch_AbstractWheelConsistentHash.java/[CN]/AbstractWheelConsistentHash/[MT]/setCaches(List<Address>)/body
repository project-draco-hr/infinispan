{
  super.setCaches(caches);
  addresses=new ArrayList<Address>(caches);
  addresses.trimToSize();
  positions=new TreeMap<Integer,Address>();
  addressToHashIds=new HashMap<Address,Integer>();
  for (  Address a : addresses) {
    int positionIndex=Math.abs(hash(a)) % HASH_SPACE;
    while (positions.containsKey(positionIndex))     positionIndex=positionIndex + 1 % HASH_SPACE;
    positions.put(positionIndex,a);
    if (!addressToHashIds.containsKey(a))     addressToHashIds.put(a,positionIndex);
  }
  addresses.clear();
  for (  Address a : positions.values())   addresses.add(a);
  if (log.isTraceEnabled()) {
    log.trace("Position are: " + positions);
  }
}
