{
  Object value=new Object();
  Future future=fork(new Callable<Object>(){
    @Override public Object call() throws Exception {
      return sync.get();
    }
  }
);
  try {
    future.get(50,TimeUnit.MILLISECONDS);
    fail("Should have thrown a timeout exception");
  }
 catch (  TimeoutException e) {
  }
  sync.runL1UpdateIfPossible(value,Mockito.mock(GetKeyValueCommand.class));
  assertEquals(value,future.get(1,TimeUnit.SECONDS));
}
