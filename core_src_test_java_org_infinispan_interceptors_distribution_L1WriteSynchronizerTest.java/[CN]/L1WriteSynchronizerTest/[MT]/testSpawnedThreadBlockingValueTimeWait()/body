{
  Object value=new Object();
  Future future=fork(new Callable<Object>(){
    @Override public Object call() throws Exception {
      return sync.get(500,TimeUnit.MILLISECONDS);
    }
  }
);
  try {
    future.get(50,TimeUnit.MILLISECONDS);
    fail("Should have thrown a timeout exception");
  }
 catch (  TimeoutException e) {
  }
  InternalCacheEntry ice=new ImmortalCacheEntry(value,value);
  sync.runL1UpdateIfPossible(ice);
  assertEquals(value,future.get(1,TimeUnit.SECONDS));
}
