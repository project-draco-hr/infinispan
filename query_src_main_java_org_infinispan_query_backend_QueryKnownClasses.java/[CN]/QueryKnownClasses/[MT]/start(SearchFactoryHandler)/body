{
  if (indexedEntities != null) {
    throw new IllegalStateException("Cannot start internal cache unless we are in autodetect mode");
  }
  if (searchFactoryHandler == null) {
    throw new IllegalArgumentException("null argument not allowed");
  }
  this.searchFactoryHandler=searchFactoryHandler;
  startInternalCache();
  knownClassesCache.addListener(searchFactoryHandler.getCacheListener(),new KeyFilter<KeyValuePair<String,Class<?>>>(){
    @Override public boolean accept(    KeyValuePair<String,Class<?>> key){
      return key.getKey().equals(cacheName);
    }
  }
);
}
