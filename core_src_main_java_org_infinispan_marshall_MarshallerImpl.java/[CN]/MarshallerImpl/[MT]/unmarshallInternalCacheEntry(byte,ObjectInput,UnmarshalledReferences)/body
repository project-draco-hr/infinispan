{
  Object k=unmarshallObject(in,refMap);
  Object v=unmarshallObject(in,refMap);
switch (magic) {
case MAGICNUMBER_ICE_IMMORTAL:
    return InternalEntryFactory.create(k,v);
case MAGICNUMBER_ICE_MORTAL:
  return InternalEntryFactory.create(k,v,readUnsignedLong(in),(Long)unmarshallObject(in,refMap),-1,-1);
case MAGICNUMBER_ICE_TRANSIENT:
return InternalEntryFactory.create(k,v,-1,-1,readUnsignedLong(in),(Long)unmarshallObject(in,refMap));
case MAGICNUMBER_ICE_TRANSIENT_MORTAL:
return InternalEntryFactory.create(k,v,readUnsignedLong(in),(Long)unmarshallObject(in,refMap),readUnsignedLong(in),(Long)unmarshallObject(in,refMap));
}
throw new IllegalArgumentException("Unknown magic number " + magic);
}
