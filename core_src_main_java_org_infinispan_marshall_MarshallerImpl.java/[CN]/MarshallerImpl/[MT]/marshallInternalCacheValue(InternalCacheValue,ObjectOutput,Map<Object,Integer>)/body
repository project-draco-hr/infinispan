{
  if (icv.getClass().equals(ImmortalCacheValue.class)) {
    out.writeByte(MAGICNUMBER_ICV_IMMORTAL);
    marshallObject(icv.getValue(),out,refMap);
  }
 else   if (icv.getClass().equals(MortalCacheValue.class)) {
    out.writeByte(MAGICNUMBER_ICV_MORTAL);
    marshallObject(icv.getValue(),out,refMap);
    writeUnsignedLong(out,icv.getCreated());
    marshallObject(icv.getLifespan(),out,refMap);
  }
 else   if (icv.getClass().equals(TransientCacheValue.class)) {
    out.writeByte(MAGICNUMBER_ICV_TRANSIENT);
    marshallObject(icv.getValue(),out,refMap);
    writeUnsignedLong(out,icv.getLastUsed());
    marshallObject(icv.getMaxIdle(),out,refMap);
  }
 else   if (icv.getClass().equals(TransientMortalCacheValue.class)) {
    out.writeByte(MAGICNUMBER_ICV_TRANSIENT_MORTAL);
    marshallObject(icv.getValue(),out,refMap);
    writeUnsignedLong(out,icv.getCreated());
    marshallObject(icv.getLifespan(),out,refMap);
    writeUnsignedLong(out,icv.getLastUsed());
    marshallObject(icv.getMaxIdle(),out,refMap);
  }
}
