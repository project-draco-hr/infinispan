{
  boolean releaseLocks=releaseLockOnTxCompletion(ctx);
  try {
    return super.visitCommitCommand(ctx,command);
  }
 catch (  OutdatedTopologyException e) {
    releaseLocks=false;
    throw e;
  }
 finally {
    if (releaseLocks)     lockManager.unlockAll(ctx);
  }
}
