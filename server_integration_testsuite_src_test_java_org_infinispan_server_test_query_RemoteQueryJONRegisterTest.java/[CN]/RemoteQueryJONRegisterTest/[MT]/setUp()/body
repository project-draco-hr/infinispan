{
  jmxConnectionProvider=new MBeanServerConnectionProvider(getServer().getHotrodEndpoint().getInetAddress().getHostName(),9999);
  rcmFactory=new RemoteCacheManagerFactory();
  ConfigurationBuilder clientBuilder=new ConfigurationBuilder();
  clientBuilder.addServer().host(getServer().getHotrodEndpoint().getInetAddress().getHostName()).port(getServer().getHotrodEndpoint().getPort()).marshaller(new ProtoStreamMarshaller());
  remoteCacheManager=rcmFactory.createManager(clientBuilder);
  remoteCache=remoteCacheManager.getCache(cacheName);
  URL resource=getClass().getResource("/sample_bank_account/bank.protobin");
  ModelControllerClient client=ModelControllerClient.Factory.create(getServer().getHotrodEndpoint().getInetAddress().getHostName(),9999);
  ModelNode addProtobufFileOp=getOperation("local","upload-proto-file",new ModelNode().add().set("proto-url",resource.toString()));
  ModelNode result=client.execute(addProtobufFileOp);
  Assert.assertEquals(SUCCESS,result.get(OUTCOME).asString());
  client.close();
  MarshallerRegistration.registerMarshallers(ProtoStreamMarshaller.getSerializationContext(remoteCacheManager));
}
