{
  if (isMarkedForRollback()) {
    throw new CacheException("This transaction is marked for rollback and cannot acquire locks!");
  }
  if (lookedUpEntries == null) {
    lookedUpEntries=new HashMap<Object,CacheEntry>(entries);
  }
 else {
    lookedUpEntries.putAll(entries);
  }
}
