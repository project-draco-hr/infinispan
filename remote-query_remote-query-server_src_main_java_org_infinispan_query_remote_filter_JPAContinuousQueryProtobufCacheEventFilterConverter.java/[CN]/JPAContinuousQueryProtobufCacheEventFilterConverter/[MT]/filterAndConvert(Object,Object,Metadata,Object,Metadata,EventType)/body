{
  if (usesValueWrapper) {
    if (oldValue instanceof ProtobufValueWrapper) {
      oldValue=((ProtobufValueWrapper)oldValue).getBinary();
    }
    if (newValue instanceof ProtobufValueWrapper) {
      newValue=((ProtobufValueWrapper)newValue).getBinary();
    }
  }
  ContinuousQueryResult continuousQueryResult=filterAndConvert(key,oldValue,newValue);
  if (continuousQueryResult != null) {
    try {
      return ProtobufUtil.toByteArray(serCtx,continuousQueryResult);
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
  return null;
}
