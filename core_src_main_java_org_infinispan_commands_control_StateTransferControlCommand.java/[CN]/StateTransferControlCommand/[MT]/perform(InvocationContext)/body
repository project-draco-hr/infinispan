{
  final boolean trace=log.isTraceEnabled();
  LogFactory.pushNDC(configuration.getName(),trace);
  stateTransferManager.waitForJoinToStart();
  try {
switch (type) {
case APPLY_STATE:
      stateTransferManager.applyState(state,sender,viewId);
    return null;
default :
  throw new CacheException("Unknown rehash control command type " + type);
}
}
 catch (Throwable t) {
log.exceptionHandlingCommand(this,t);
return null;
}
 finally {
LogFactory.popNDC(trace);
}
}
