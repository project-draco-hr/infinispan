{
synchronized (localCache) {
    final Map<K,V> currentContent=localCache.get();
    final int currentSize=currentContent.size();
    if (currentSize == 0) {
      localCache.lazySet(Collections.singletonMap(key,value));
    }
 else {
      Map<K,V> updatedContent=new HashMap<K,V>(currentSize + 1);
      updatedContent.putAll(currentContent);
      updatedContent.put(key,value);
      localCache.lazySet(Collections.unmodifiableMap(updatedContent));
    }
  }
}
