{
  if (buffer.size() + capacity >= bufferSize) {
    flush();
  }
}
