{
  ExposedByteArrayOutputStream baos=new ExposedByteArrayOutputStream(128);
  ObjectOutput out=startObjectOutput(baos,false);
  try {
    defaultMarshaller.objectToObjectStream(obj,out);
  }
  finally {
    finishObjectOutput(out);
  }
  return new ByteBuffer(baos.getRawBuffer(),0,baos.size());
}
