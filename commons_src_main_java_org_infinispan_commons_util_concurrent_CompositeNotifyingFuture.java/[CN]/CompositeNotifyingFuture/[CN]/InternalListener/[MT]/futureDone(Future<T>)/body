{
synchronized (this) {
    Throwable error=null;
    try {
      results.add(future.get());
    }
 catch (    Throwable e) {
      error=e;
    }
    remaining.countDown();
    if (remaining.getCount() == 0) {
      if (error != null) {
        if (error instanceof ExecutionException) {
          notifyException(((ExecutionException)error).getCause());
        }
 else {
          notifyException(error);
        }
      }
 else {
        notifyDone(results);
      }
      setFuture(new NoOpFuture<>(results));
    }
  }
}
