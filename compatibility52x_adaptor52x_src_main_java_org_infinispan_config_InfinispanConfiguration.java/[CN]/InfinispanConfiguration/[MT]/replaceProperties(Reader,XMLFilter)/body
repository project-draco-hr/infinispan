{
  BufferedReader br=new BufferedReader(config);
  StringBuilder w=new StringBuilder();
  String line;
  while ((line=br.readLine()) != null) {
    int dollar=line.indexOf('$');
    if (dollar > 0 && line.indexOf('{',dollar) > 0 && line.indexOf('}',dollar) > 0) {
      String replacedLine=StringPropertyReplacer.replaceProperties(line);
      if (line.equals(replacedLine)) {
        log.propertyCouldNotBeReplaced(line.substring(line.indexOf('{') + 1,line.indexOf('}')));
      }
      w.append(replacedLine);
    }
 else {
      w.append(line);
    }
  }
  return new SAXSource(filter,new InputSource(new StringReader(w.toString())));
}
