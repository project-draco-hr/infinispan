{
  int length=UnsignedNumeric.readUnsignedInt(input);
  byte[] raw=new byte[length];
  input.readFully(raw);
  int hc=input.readInt();
  StreamingMarshaller marshaller;
  if (input instanceof ExtendedRiverUnmarshaller) {
    StreamingMarshaller ispnMarshaller=((ExtendedRiverUnmarshaller)input).getInfinispanMarshaller();
    if (ispnMarshaller != null)     marshaller=ispnMarshaller;
 else     marshaller=globalMarshaller;
  }
 else {
    marshaller=globalMarshaller;
  }
  return new MarshalledValue(raw,hc,marshaller);
}
