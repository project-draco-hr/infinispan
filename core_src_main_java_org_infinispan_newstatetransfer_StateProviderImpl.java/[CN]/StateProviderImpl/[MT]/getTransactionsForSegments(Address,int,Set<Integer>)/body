{
  List<TransactionInfo> transactions=new ArrayList<TransactionInfo>();
  if (transactionTable != null) {
    try {
      stateTransferLock.acquireTTExclusiveLock();
      collectTransactionsToTransfer(transactions,transactionTable.getRemoteTransactions(),segments);
      collectTransactionsToTransfer(transactions,transactionTable.getLocalTransactions(),segments);
      log.debugf("Found %d transfer to transfer",transactions.size());
    }
  finally {
      stateTransferLock.releaseTTExclusiveLock();
    }
  }
  return transactions;
}
