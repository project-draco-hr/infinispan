{
  if (trace) {
    log.trace("Shutting down StateProvider");
  }
synchronized (transfersByDestination) {
    for (Iterator<List<OutboundTransferTask>> it=transfersByDestination.values().iterator(); it.hasNext(); ) {
      List<OutboundTransferTask> transfers=it.next();
      it.remove();
      for (      OutboundTransferTask outboundTransfer : transfers) {
        outboundTransfer.cancel();
      }
    }
  }
}
