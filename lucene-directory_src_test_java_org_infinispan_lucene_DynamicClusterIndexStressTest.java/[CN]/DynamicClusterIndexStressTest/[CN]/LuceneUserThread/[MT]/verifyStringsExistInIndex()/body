{
  Set<String> strings=new HashSet<String>();
  stringsInIndex.drainTo(strings,50);
  IndexSearcher searcher=new IndexSearcher(directory);
  for (  String term : strings) {
    Query query=new TermQuery(new Term("main",term));
    TopDocs docs=searcher.search(query,null,1);
    if (docs.totalHits != 1) {
      failed=true;
      failureMessage="couldn't find expected term in index";
    }
  }
  stringsInIndex.addAll(strings);
}
