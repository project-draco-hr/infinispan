{
  Log log=getLog();
  if (responseObject instanceof Response) {
    Response response=(Response)responseObject;
    if (response instanceof ExceptionResponse) {
      ExceptionResponse exceptionResponse=(ExceptionResponse)response;
      Exception e=exceptionResponse.getException();
      if (e instanceof SuspectException)       throw log.thirdPartySuspected(sender,(SuspectException)e);
      if (e instanceof AvailabilityException || e instanceof OutdatedTopologyException)       throw e;
      throw log.remoteException(sender,e);
    }
    return true;
  }
 else   if (responseObject != null) {
    Class<?> responseClass=responseObject.getClass();
    log.tracef("Unexpected response object type from %s: %s",sender,responseClass);
    throw new CacheException(String.format("Unexpected response object type from %s: %s",sender,responseClass));
  }
  return false;
}
