{
  Log log=getLog();
  if (responseObject instanceof Response) {
    Response response=(Response)responseObject;
    if (response instanceof ExceptionResponse) {
      ExceptionResponse exceptionResponse=(ExceptionResponse)response;
      Exception e=exceptionResponse.getException();
      if (!(e instanceof RpcException)) {
        if (shouldThrowException(e)) {
          throw log.remoteException(sender,e);
        }
 else {
          if (log.isDebugEnabled())           log.debug("Received exception from " + sender,e);
        }
      }
    }
    return true;
  }
 else   if (responseObject != null) {
    Class<?> responseClass=responseObject.getClass();
    log.tracef("Unexpected response object type from %s: %s",sender,responseClass);
    throw new CacheException(String.format("Unexpected response object type from %s: %s",sender,responseClass));
  }
  return false;
}
