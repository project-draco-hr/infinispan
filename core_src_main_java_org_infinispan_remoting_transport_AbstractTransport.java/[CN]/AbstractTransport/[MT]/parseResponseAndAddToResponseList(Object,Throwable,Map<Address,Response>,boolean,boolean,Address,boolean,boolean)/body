{
  Log log=getLog();
  boolean invalidResponse=true;
  if (!wasSuspected && wasReceived) {
    invalidResponse=false;
    if (exception != null) {
      log.tracef(exception,"Unexpected exception from %s",sender);
      throw log.remoteException(sender,exception);
    }
    if (checkResponse(responseObject,sender)) {
      responseListToAddTo.put(sender,(Response)responseObject);
    }
 else     if (!ignoreLeavers && responseObject instanceof CacheNotFoundResponse) {
      throw new SuspectException("Cache is stopping on node " + sender,sender);
    }
  }
 else   if (wasSuspected) {
    if (!ignoreLeavers) {
      throw new SuspectException("Suspected member: " + sender,sender);
    }
 else {
      log.tracef("Target node %s left during remote call, ignoring",sender);
      invalidResponse=false;
      responseListToAddTo.put(sender,CacheNotFoundResponse.INSTANCE);
    }
  }
 else {
    if (!usedResponseFilter)     throw new TimeoutException("Replication timeout for " + sender);
  }
  return invalidResponse;
}
