{
  Map<Object,Object> previousValues=new HashMap<Object,Object>();
  for (  Entry<Object,Object> e : map.entrySet()) {
    Object key=e.getKey();
    MVCCEntry me=lookupMvccEntry(ctx,key);
    if (me != null) {
      Object value=me.getValue();
      previousValues.put(key,value);
      notifier.notifyCacheEntryModified(key,value,value == null,true,ctx,this);
      me.setValue(e.getValue());
      me.setChanged(true);
    }
  }
  return previousValues;
}
