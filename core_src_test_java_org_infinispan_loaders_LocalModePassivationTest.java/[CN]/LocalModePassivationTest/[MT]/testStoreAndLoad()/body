{
  final int numKeys=300;
  for (int i=0; i < numKeys; i++) {
    cache().put(i,i);
  }
  int keysInDataContainer=cache().getAdvancedCache().getDataContainer().keySet().size();
  assertTrue(keysInDataContainer != numKeys);
  CacheLoaderManager cml=cache().getAdvancedCache().getComponentRegistry().getComponent(CacheLoaderManager.class);
  int keysInCacheStore=cml.getCacheLoader().loadAll().size();
  if (passivationEnabled) {
    assertEquals(numKeys,keysInDataContainer + keysInCacheStore);
  }
 else {
    assertEquals(numKeys,keysInCacheStore);
  }
  cache().stop();
  cache().start();
  cml=cache().getAdvancedCache().getComponentRegistry().getComponent(CacheLoaderManager.class);
  assertEquals(numKeys,cml.getCacheLoader().loadAll().size());
  for (int i=0; i < numKeys; i++) {
    assertEquals(i,cache().get(i));
  }
}
