{
  ConfigurationBuilder configurationBuilder=new ConfigurationBuilder();
  CacheMode cacheMode=isClustered() ? CacheMode.REPL_SYNC : CacheMode.LOCAL;
  configurationBuilder.clustering().cacheMode(cacheMode);
  configurationBuilder.transaction().transactionMode(TransactionMode.TRANSACTIONAL).transactionManagerLookup(null).invocationBatching().enable();
  configurationBuilder.clustering().stateTransfer().fetchInMemoryState(cacheMode.needsStateTransfer());
  configurationBuilder.security().authorization().disable();
  return configurationBuilder.build();
}
