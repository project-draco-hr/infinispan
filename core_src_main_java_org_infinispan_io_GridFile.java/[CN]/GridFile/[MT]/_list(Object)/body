{
  if (!isDirectory())   return null;
  Set<String> keys=metadataCache.keySet();
  Collection<String> list=new LinkedList<String>();
  for (  String str : keys) {
    if (isChildOf(getPath(),str)) {
      if (filter instanceof FilenameFilter && !((FilenameFilter)filter).accept(new File(name),filename(str)))       continue;
 else       if (filter instanceof FileFilter && !((FileFilter)filter).accept(new File(str)))       continue;
      list.add(filename(str));
    }
  }
  return list.toArray(new String[list.size()]);
}
