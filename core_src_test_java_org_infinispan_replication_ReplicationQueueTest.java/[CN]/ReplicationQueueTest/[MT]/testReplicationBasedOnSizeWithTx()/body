{
  TransactionManager transactionManager=TestingUtil.getTransactionManager(cache1);
  for (int i=0; i < REPL_QUEUE_MAX_ELEMENTS; i++) {
    transactionManager.begin();
    cache1.put("key" + i,"value" + i);
    transactionManager.commit();
  }
  eventually(new Condition(){
    @Override public boolean isSatisfied() throws Exception {
      return cache2.size() == REPL_QUEUE_MAX_ELEMENTS;
    }
  }
);
  for (int i=0; i < REPL_QUEUE_MAX_ELEMENTS; i++) {
    assertEquals("value" + i,cache2.get("key" + i));
  }
}
