{
  super(reflectionCache);
  try {
    this.cacheName=cacheName;
    if (cacheName == null)     throw new ConfigurationException("Cache name cannot be null!");
    if (globalComponents == null)     throw new NullPointerException("GlobalComponentRegistry cannot be null!");
    this.globalComponents=globalComponents;
    registerDefaultClassLoader(null);
    registerComponent(this,ComponentRegistry.class);
    registerComponent(configuration,Configuration.class);
    registerComponent(new BootstrapFactory(cache,configuration,this),BootstrapFactory.class);
    Map<Byte,ModuleCommandInitializer> initializers=ModuleProperties.moduleCommandInitializers();
    if (initializers != null && !initializers.isEmpty()) {
      registerComponent(initializers,KnownComponentNames.MODULE_COMMAND_INITIALIZERS);
      for (      ModuleCommandInitializer mci : initializers.values())       registerComponent(mci,mci.getClass());
    }
  }
 catch (  Exception e) {
    throw new CacheException("Unable to construct a ComponentRegistry!",e);
  }
}
