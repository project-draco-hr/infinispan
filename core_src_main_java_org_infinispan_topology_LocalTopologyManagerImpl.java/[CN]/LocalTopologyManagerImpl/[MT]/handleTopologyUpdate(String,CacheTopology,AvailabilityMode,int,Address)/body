{
  if (!running) {
    log.tracef("Ignoring consistent hash update %s for cache %s, the local cache manager is not running",cacheTopology.getTopologyId(),cacheName);
    return;
  }
  final LocalCacheStatus cacheStatus=runningCaches.get(cacheName);
  if (cacheStatus == null) {
    log.tracef("Ignoring consistent hash update %s for cache %s that doesn't exist locally",cacheTopology.getTopologyId(),cacheName);
    return;
  }
  cacheStatus.getTopologyUpdatesCompletionService().submit(new Runnable(){
    @Override public void run(){
      doHandleTopologyUpdate(cacheName,cacheTopology,availabilityMode,viewId,sender,cacheStatus);
    }
  }
,null);
  cacheStatus.getTopologyUpdatesCompletionService().drainCompletionQueue();
}
