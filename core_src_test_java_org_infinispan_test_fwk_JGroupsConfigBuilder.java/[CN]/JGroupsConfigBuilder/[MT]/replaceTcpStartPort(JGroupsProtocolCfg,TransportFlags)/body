{
  Map<String,String> props=jgroupsCfg.getProtocol(TCP).getProperties();
  Integer startPort=threadTcpStartPort.get();
  if (transportFlags.isSiteIndexSpecified()) {
    int sitePortRange=10;
    int maxIndex=TCP_PORT_RANGE_PER_THREAD / sitePortRange - 1;
    if (transportFlags.siteIndex() > maxIndex) {
      throw new IllegalStateException("Currently we only support " + (maxIndex + 1) + " sites!");
    }
    startPort+=transportFlags.siteIndex() * sitePortRange;
  }
  props.put("bind_port",startPort.toString());
  return replaceProperties(jgroupsCfg,props,TCP);
}
