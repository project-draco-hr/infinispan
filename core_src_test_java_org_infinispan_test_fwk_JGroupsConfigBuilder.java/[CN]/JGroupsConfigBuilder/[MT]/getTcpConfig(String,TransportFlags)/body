{
  JGroupsProtocolCfg jgroupsCfg=getJGroupsProtocolCfg(tcpConfigurator.getProtocolStack());
  if (!flags.withFD())   removeFailureDetectionTcp(jgroupsCfg);
  if (!flags.withMerge())   removeMerge(jgroupsCfg);
  if (jgroupsCfg.containsProtocol(TEST_PING)) {
    replaceTcpStartPort(jgroupsCfg);
    if (fullTestName == null)     return jgroupsCfg.toString();
 else     return getTestPingDiscovery(fullTestName,jgroupsCfg);
  }
 else {
    return replaceMCastAddressAndPort(jgroupsCfg);
  }
}
