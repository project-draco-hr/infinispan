{
  String jGroupsFile=System.getProperty("EC2Demo-jgroups-config");
  if (jGroupsFile == null)   throw new RuntimeException("Need to set system property EC2Demo-jgroups-config to point to the jgroups configuration file");
  GlobalConfiguration gc=GlobalConfiguration.getClusteredDefault();
  gc.setClusterName("infinispan-demo-cluster");
  gc.setTransportClass(JGroupsTransport.class.getName());
  Properties p=new Properties();
  p.setProperty("configurationFile",jGroupsFile);
  gc.setTransportProperties(p);
  Configuration c=new Configuration();
  c.setCacheMode(Configuration.CacheMode.DIST_SYNC);
  c.setExposeJmxStatistics(true);
  c.setUnsafeUnreliableReturnValues(true);
  c.setNumOwners(3);
  c.setL1CacheEnabled(true);
  c.setInvocationBatchingEnabled(true);
  c.setUseReplQueue(true);
  c.setL1Lifespan(6000000);
  cache_manager=new DefaultCacheManager(gc,c,false);
}
