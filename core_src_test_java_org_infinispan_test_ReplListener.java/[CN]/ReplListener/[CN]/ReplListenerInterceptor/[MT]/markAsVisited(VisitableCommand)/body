{
  expectationSetupLock.lock();
  try {
    log.info("Cache [" + c + "] saw command "+ cmd);
    if (expectedCommands != null) {
      expectedCommands.remove(cmd.getClass());
      sawAtLeastOneInvocation=true;
      if (expectedCommands.isEmpty())       latch.countDown();
    }
 else {
      if (recordCommandsEagerly)       eagerCommands.add(cmd.getClass());
    }
  }
  finally {
    expectationSetupLock.unlock();
  }
}
