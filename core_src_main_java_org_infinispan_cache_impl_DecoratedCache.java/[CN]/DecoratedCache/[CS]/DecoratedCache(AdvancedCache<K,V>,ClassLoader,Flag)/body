{
  super(delegate);
  if (flags == null && classLoader == null)   throw new IllegalArgumentException("There is no point in using a DecoratedCache if neither a ClassLoader nor any Flags are set.");
  if (flags == null || flags.length == 0)   this.flags=EnumUtil.EMPTY_BIT_SET;
 else {
    this.flags=EnumUtil.bitSetOf(flags);
  }
  this.classLoader=new WeakReference<>(classLoader);
  cacheImplementation=(CacheImpl<K,V>)delegate;
}
