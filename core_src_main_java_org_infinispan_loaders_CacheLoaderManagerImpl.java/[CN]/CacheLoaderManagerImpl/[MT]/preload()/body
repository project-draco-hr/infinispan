{
  if (loader != null) {
    if (clmConfig.isPreload()) {
      long start=0;
      boolean debugTiming=log.isDebugEnabled();
      if (debugTiming) {
        start=System.currentTimeMillis();
        log.debug("Preloading transient state from cache loader {0}",loader);
      }
      Set<InternalCacheEntry> state;
      try {
        state=loadState();
      }
 catch (      CacheLoaderException e) {
        throw new CacheException("Unable to preload!",e);
      }
      for (      InternalCacheEntry e : state)       cache.getAdvancedCache().withFlags(SKIP_CACHE_STATUS_CHECK,CACHE_MODE_LOCAL).put(e.getKey(),e.getValue(),e.getLifespan(),MILLISECONDS,e.getMaxIdle(),MILLISECONDS);
      if (debugTiming) {
        long stop=System.currentTimeMillis();
        log.debug("Preloaded {0} keys in {1} milliseconds",state.size(),stop - start);
      }
    }
  }
}
