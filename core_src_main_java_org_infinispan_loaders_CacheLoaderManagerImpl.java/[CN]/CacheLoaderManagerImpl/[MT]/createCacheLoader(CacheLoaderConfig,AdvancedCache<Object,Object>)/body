{
  CacheLoader tmpLoader=(CacheLoader)Util.getInstance(cfg.getCacheLoaderClassName(),cache.getClassLoader());
  if (tmpLoader != null) {
    if (cfg instanceof CacheStoreConfig) {
      CacheStore tmpStore=(CacheStore)tmpLoader;
      CacheStoreConfig cfg2=(CacheStoreConfig)cfg;
      if (cfg2.getAsyncStoreConfig().isEnabled()) {
        tmpStore=createAsyncStore(tmpStore,cfg2);
        tmpLoader=tmpStore;
      }
      if (cfg2.isIgnoreModifications()) {
        tmpStore=new ReadOnlyStore(tmpStore);
        tmpLoader=tmpStore;
      }
      SingletonStoreConfig ssc=cfg2.getSingletonStoreConfig();
      if (ssc != null && ssc.isSingletonStoreEnabled()) {
        tmpStore=new SingletonStore(tmpStore,cache,ssc);
        tmpLoader=tmpStore;
      }
    }
    tmpLoader.init(cfg,cache,m);
  }
  return tmpLoader;
}
