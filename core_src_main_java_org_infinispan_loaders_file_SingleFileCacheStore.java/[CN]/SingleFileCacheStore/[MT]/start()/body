{
  super.start();
  try {
    String location=configuration.location();
    if (location == null || location.trim().length() == 0)     location="Infinispan-SingleFileCacheStore";
    File f=new File(location + File.separator + cache.getName()+ ".dat");
    if (!f.exists()) {
      File dir=f.getParentFile();
      if (!dir.exists() && !dir.mkdirs()) {
        throw log.directoryCannotBeCreated(dir.getAbsolutePath());
      }
    }
    file=new RandomAccessFile(f,"rw").getChannel();
    final Map<Object,FileEntry> entryMap;
    if (configuration.maxEntries() > 0)     entryMap=new LinkedHashMap<Object,FileEntry>(16,0.75f,true);
 else     entryMap=new HashMap<Object,FileEntry>();
    entries=Collections.synchronizedMap(entryMap);
    freeList=Collections.synchronizedSortedSet(new TreeSet<FileEntry>());
    byte[] header=new byte[MAGIC.length];
    if (file.read(ByteBuffer.wrap(header),0) == MAGIC.length && Arrays.equals(MAGIC,header))     rebuildIndex();
 else     clear();
  }
 catch (  Exception e) {
    throw new CacheLoaderException(e);
  }
}
