{
  boolean locked=false;
synchronized (cache) {
    Transaction tx=null;
    try {
      if ((tx=tm.getTransaction()) != null) {
        tm.suspend();
      }
      locked=cache.containsKey(new FileCacheKey(indexName,lockName,true));
    }
 catch (    Exception e) {
      log.error("Error in suspending transaction",e);
    }
 finally {
      if (tx != null) {
        try {
          tm.resume(tx);
        }
 catch (        Exception e) {
          throw new CacheException("Unable to resume suspended transaction " + tx,e);
        }
      }
    }
  }
  return locked;
}
