{
  Object keys=super.visitKeySetCommand(ctx,command);
  if (enabled && !shouldSkipCacheLoader(command)) {
    Set<Object> keysSet=(Set<Object>)keys;
    final ConcurrentHashSet<Object> union=new ConcurrentHashSet<Object>();
    for (    Object k : keysSet)     union.add(k);
    persistenceManager.processOnAllStores(new CollectionKeyFilter(union),new AdvancedCacheLoader.CacheLoaderTask(){
      @Override public void processEntry(      MarshalledEntry marshalledEntry,      AdvancedCacheLoader.TaskContext taskContext) throws InterruptedException {
        union.add(marshalledEntry.getKey());
      }
    }
,false,false);
    return Collections.unmodifiableSet(union);
  }
  return keys;
}
