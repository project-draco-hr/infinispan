{
  NodeList interceptorNodes=e.getElementsByTagName("interceptor");
  List<CustomInterceptorConfig> interceptorConfigs=new ArrayList<CustomInterceptorConfig>(interceptorNodes.getLength());
  for (int i=0; i < interceptorNodes.getLength(); i++) {
    boolean first=false;
    boolean last=false;
    int index=-1;
    String after=null;
    String before=null;
    Element interceptorElement=(Element)interceptorNodes.item(i);
    String position=parser.getAttributeValue(interceptorElement,"position");
    if (parser.existsAttribute(position) && "first".equalsIgnoreCase(position)) {
      first=true;
    }
    if (parser.existsAttribute(position) && "last".equalsIgnoreCase(position)) {
      last=true;
    }
    String indexStr=parser.getAttributeValue(interceptorElement,"index");
    index=parser.existsAttribute(indexStr) ? parser.getInt(indexStr) : -1;
    before=parser.getAttributeValue(interceptorElement,"before");
    if (!parser.existsAttribute(before))     before=null;
    after=parser.getAttributeValue(interceptorElement,"after");
    if (!parser.existsAttribute(after))     after=null;
    CommandInterceptor interceptor=buildCommandInterceptor(interceptorElement);
    CustomInterceptorConfig customInterceptorConfig=new CustomInterceptorConfig(interceptor,first,last,index,after,before);
    interceptorConfigs.add(customInterceptorConfig);
  }
  ((Configuration)bean).setCustomInterceptors(interceptorConfigs);
}
