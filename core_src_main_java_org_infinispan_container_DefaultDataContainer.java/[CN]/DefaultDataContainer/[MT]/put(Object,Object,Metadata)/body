{
  InternalCacheEntry e=entries.get(k);
  if (e != null) {
    e.setValue(v);
    InternalCacheEntry original=e;
    e=entryFactory.update(e,metadata);
    if (original == e) {
      e.reincarnate(timeService.wallClockTime());
    }
  }
 else {
    e=entryFactory.create(k,v,metadata);
  }
  entries.put(k,e);
}
