{
  InternalCacheEntry e=entries.get(k);
  if (trace) {
    log.tracef("Creating new ICE for writing. Existing=%s, metadata=%s, new value=%s",e,metadata,v);
  }
  if (e != null) {
    e=entryFactory.update(e,v,metadata);
  }
 else {
    e=entryFactory.create(k,v,metadata);
  }
  if (trace)   log.tracef("Store %s in container",e);
  extendedMap.putAndActivate(e);
}
