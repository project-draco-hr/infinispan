{
  long currentTimeMillis=System.currentTimeMillis();
  for (Iterator<InternalCacheEntry> purgeCandidates=entries.values().iterator(); purgeCandidates.hasNext(); ) {
    InternalCacheEntry e=purgeCandidates.next();
    if (isAsyncStore && e instanceof InternalNullEntry) {
      InternalNullEntry nullEntry=(InternalNullEntry)e;
      if (nullEntry.isExpired(asyncStore.getAsyncProcessorId())) {
        purgeCandidates.remove();
        continue;
      }
    }
    if (e.isExpired(currentTimeMillis)) {
      purgeCandidates.remove();
    }
  }
}
