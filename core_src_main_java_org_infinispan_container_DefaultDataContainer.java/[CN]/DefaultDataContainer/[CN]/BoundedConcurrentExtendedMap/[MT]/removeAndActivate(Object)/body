{
  final BoundedConcurrentHashMap<Object,InternalCacheEntry<K,V>> boundedMap=((BoundedConcurrentHashMap<Object,InternalCacheEntry<K,V>>)entries);
  boundedMap.lock(key);
  try {
    InternalCacheEntry<K,V> oldEntry=boundedMap.remove(key);
    activator.onRemove(key,oldEntry == null);
    return oldEntry;
  }
  finally {
    boundedMap.unlock(key);
  }
}
