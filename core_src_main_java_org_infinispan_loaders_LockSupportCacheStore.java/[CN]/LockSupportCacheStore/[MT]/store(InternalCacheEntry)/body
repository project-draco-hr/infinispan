{
  if (trace) {
    log.tracef("store(%s)",ed);
  }
  if (ed == null) {
    return;
  }
  if (ed.isExpired(System.currentTimeMillis())) {
    if (containsKey(ed.getKey())) {
      if (trace) {
        log.tracef("Entry %s is expired!  Removing!",ed);
      }
      remove(ed.getKey());
    }
 else {
      if (trace) {
        log.tracef("Entry %s is expired!  Not doing anything.",ed);
      }
    }
    return;
  }
  L keyHashCode=getLockFromKey(ed.getKey());
  lockForWriting(keyHashCode);
  try {
    storeLockSafe(ed,keyHashCode);
  }
  finally {
    unlock(keyHashCode);
  }
  if (trace) {
    log.tracef("exit store(%s)",ed);
  }
}
