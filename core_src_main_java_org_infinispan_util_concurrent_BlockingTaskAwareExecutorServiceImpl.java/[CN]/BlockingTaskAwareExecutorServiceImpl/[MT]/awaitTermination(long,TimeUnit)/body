{
  final long endTime=timeService.expectedEndTime(timeout,unit);
synchronized (blockedTasks) {
    long waitTime=timeService.remainingTime(endTime,TimeUnit.MILLISECONDS);
    while (!blockedTasks.isEmpty() && waitTime > 0) {
      wait(waitTime);
    }
  }
  return isTerminated();
}
