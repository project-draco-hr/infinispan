{
  Cache cache1=cache(0,"replSync");
  Transport mockTransport=mock(Transport.class);
  RpcManagerImpl rpcManager=(RpcManagerImpl)TestingUtil.extractComponent(cache1,RpcManager.class);
  Transport originalTransport=TestingUtil.extractComponent(cache1,Transport.class);
  try {
    Address mockAddress1=mock(Address.class);
    List<Address> memberList=new ArrayList<Address>(1);
    memberList.add(mockAddress1);
    when(mockTransport.getMembers()).thenReturn(memberList);
    when(mockTransport.getAddress()).thenReturn(null);
    rpcManager.setTransport(mockTransport);
    cache1.put(key,value);
  }
  finally {
    if (rpcManager != null)     rpcManager.setTransport(originalTransport);
  }
}
