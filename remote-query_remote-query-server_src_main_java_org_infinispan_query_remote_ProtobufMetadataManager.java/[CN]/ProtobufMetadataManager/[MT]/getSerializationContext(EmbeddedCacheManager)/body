{
  if (cacheManager == null) {
    throw new IllegalArgumentException("cacheManager cannot be null");
  }
  ProtobufMetadataManager metadataManager=cacheManager.getGlobalComponentRegistry().getComponent(ProtobufMetadataManager.class);
  if (metadataManager == null) {
    throw new IllegalStateException("ProtobufMetadataManager not initialised yet!");
  }
  return new DelegatingSerializationContext(metadataManager);
}
