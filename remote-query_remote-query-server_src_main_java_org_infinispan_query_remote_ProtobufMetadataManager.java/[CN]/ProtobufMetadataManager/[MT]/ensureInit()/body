{
  if (registryListener == null) {
synchronized (this) {
      if (registryListener == null) {
        registryListener=new ProtobufMetadataRegistryListener();
        clusterRegistry.addListener(REGISTRY_SCOPE,registryListener);
        FileDescriptorSource descriptorSource=getFileDescriptorSource();
        if (!descriptorSource.getFileDescriptors().isEmpty()) {
          try {
            serCtx.registerProtoFiles(descriptorSource);
          }
 catch (          Exception e) {
            log.error(e);
          }
        }
      }
    }
  }
}
