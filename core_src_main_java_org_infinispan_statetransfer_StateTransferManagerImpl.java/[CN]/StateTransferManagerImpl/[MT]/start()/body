{
  log.tracef("Data container is %s",Util.hexIdHashCode(dataContainer));
  cs=clm == null ? null : clm.getCacheStore();
  transientState=configuration.isFetchInMemoryState();
  alwaysProvideTransientState=configuration.isAlwaysProvideInMemoryState();
  persistentState=cs != null && clm.isEnabled() && clm.isFetchPersistentState() && !clm.isShared();
  maxNonProgressingLogWrites=configuration.getStateRetrievalMaxNonProgressingLogWrites();
  flushTimeout=configuration.getStateRetrievalLogFlushTimeout();
  if (transientState || persistentState) {
    long startTime=0;
    if (log.isDebugEnabled()) {
      log.debug("Initiating state transfer process");
      startTime=System.currentTimeMillis();
    }
    rpcManager.retrieveState(cache.getName(),configuration.getStateRetrievalTimeout());
    if (log.isDebugEnabled()) {
      long duration=System.currentTimeMillis() - startTime;
      log.debugf("State transfer process completed in %s",Util.prettyPrintTime(duration));
    }
  }
}
