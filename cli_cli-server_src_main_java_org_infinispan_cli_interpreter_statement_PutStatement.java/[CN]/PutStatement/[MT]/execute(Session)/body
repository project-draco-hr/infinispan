{
  Cache<Object,Object> cache=session.getCache(keyData.getCacheName());
  Codec codec=session.getCodec();
  boolean overwrite=true;
  if (options.size() > 0) {
    for (    Option option : options) {
switch (option.toEnum(Options.class)) {
case CODEC:
{
          if (option.getParameter() == null) {
            throw log.missingOptionParameter(option.getName());
          }
 else {
            codec=session.getCodec(option.getParameter());
          }
          break;
        }
case IFABSENT:
{
        overwrite=false;
        break;
      }
  }
}
}
Object encodedKey=codec.encodeKey(keyData.getKey());
Object encodedValue=codec.encodeValue(value);
if (expires == null) {
if (overwrite) {
  cache.put(encodedKey,encodedValue);
}
 else {
  cache.putIfAbsent(encodedKey,encodedValue);
}
}
 else if (maxIdle == null) {
if (overwrite) {
  cache.put(encodedKey,encodedValue,expires,TimeUnit.MILLISECONDS);
}
 else {
  cache.putIfAbsent(encodedKey,encodedValue,expires,TimeUnit.MILLISECONDS);
}
}
 else {
if (overwrite) {
  cache.put(encodedKey,encodedValue,expires,TimeUnit.MILLISECONDS,maxIdle,TimeUnit.MILLISECONDS);
}
 else {
  cache.putIfAbsent(encodedKey,encodedValue,expires,TimeUnit.MILLISECONDS,maxIdle,TimeUnit.MILLISECONDS);
}
}
return EmptyResult.RESULT;
}
