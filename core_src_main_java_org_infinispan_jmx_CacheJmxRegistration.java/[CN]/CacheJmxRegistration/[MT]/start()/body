{
  if (cache == null)   throw new IllegalStateException("The cache should had been injected before a call to this method");
  Configuration config=cache.getConfiguration();
  if (config.isExposeJmxStatistics()) {
    Set<Component> components=cache.getComponentRegistry().getRegisteredComponents();
    nonCacheComponents=getNonCacheComponents(components);
    registerMBeans(components,cache.getConfiguration().getGlobalConfiguration());
    log.mbeansSuccessfullyRegistered();
  }
}
