{
  if (cache == null)   throw new IllegalStateException("The cache should had been injected before a call to this method");
  Configuration config=cache.getCacheConfiguration();
  if (config.jmxStatistics().enabled()) {
    Set<Component> components=cache.getComponentRegistry().getRegisteredComponents();
    nonCacheComponents=getNonCacheComponents(components);
    registerMBeans(components,cache.getCacheManager().getCacheManagerConfiguration());
    log.mbeansSuccessfullyRegistered();
  }
}
