{
  File f=new File(root,b.getBucketName());
  if (f.exists()) {
    if (!f.delete())     log.warn("Had problems removing file {0}",f);
  }
 else   if (log.isTraceEnabled()) {
    log.trace("Successfully deleted file: '" + f.getName() + "'");
  }
  if (!b.getEntries().isEmpty()) {
    FileOutputStream fos=null;
    ObjectOutputStream oos=null;
    try {
      fos=new FileOutputStream(f);
      oos=new ObjectOutputStream(fos);
      oos.writeObject(b);
      oos.flush();
      fos.flush();
    }
 catch (    IOException ex) {
      log.error("Exception while saving bucket " + b,ex);
      throw new CacheLoaderException(ex);
    }
 finally {
      safeClose(oos);
      safeClose(fos);
    }
  }
}
