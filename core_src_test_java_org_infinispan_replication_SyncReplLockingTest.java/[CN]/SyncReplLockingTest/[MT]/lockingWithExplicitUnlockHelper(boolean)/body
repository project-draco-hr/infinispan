{
  assertClusterSize("Should only be 2  caches in the cluster!!!",2);
  assertNull("Should be null",cache1.get(k));
  assertNull("Should be null",cache2.get(k));
  String name="Vladimir";
  TransactionManager mgr=TestingUtil.getTransactionManager(cache1);
  mgr.begin();
  if (lockPriorToPut)   cache1.getAdvancedCache().lock(k);
  cache1.put(k,v);
  cache1.put(k,name);
  if (!lockPriorToPut)   cache1.getAdvancedCache().lock(k);
  cache1.getAdvancedCache().unlock(k);
  mgr.commit();
  assertEquals(name,cache1.get(k));
  assertEquals("Should have replicated",name,cache2.get(k));
  cache2.remove(k);
  cleanup();
}
