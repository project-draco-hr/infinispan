{
  Class<?> entityMetadata=getEntityMetadata(typeName);
  if (entityMetadata == null) {
    throw new IllegalStateException("Unknown entity name " + typeName);
  }
  EntityIndexBinding entityIndexBinding=searchFactory.getIndexBinding(entityMetadata);
  if (entityIndexBinding == null) {
    throw log.getNoIndexedEntityException(typeName);
  }
  return entityIndexBinding.getDocumentBuilder();
}
