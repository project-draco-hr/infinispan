{
  failIfNeeded();
  if (!(rpcCommand instanceof ClusteredGetCommand) && !(rpcCommand instanceof LockControlCommand)) {
    System.out.println(Thread.currentThread().getName() + " -- replication trigger called!");
    try {
      replicationLatch.await();
    }
 catch (    Exception e) {
      throw new RuntimeException("Unexpected exception!",e);
    }
  }
}
