{
  if (log.isTraceEnabled())   log.tracef("About to obtain a reference to the recovery cache: %s",recoveryCacheName);
  Cache recoveryCache=cm.getCache(recoveryCacheName);
  String txLookup=recoveryCache.getConfiguration().getTransactionManagerLookupClass();
  final TransactionManagerLookup tml=recoveryCache.getConfiguration().getTransactionManagerLookup();
  if (txLookup != null || tml != null) {
    throw new ConfigurationException("The recovery cache shouldn't be transactional.");
  }
  if (log.isTraceEnabled())   log.tracef("Obtained a reference to the recovery cache: %s",recoveryCacheName);
  return new RecoveryManagerImpl(recoveryCache,cacheName);
}
