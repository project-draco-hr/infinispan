{
  DocumentExtractor extractor=mock(DocumentExtractor.class);
  when(extractor.extract(anyInt())).thenAnswer(new Answer<EntityInfo>(){
    @Override public EntityInfo answer(    InvocationOnMock invocation) throws Throwable {
      int index=(Integer)invocation.getArguments()[0];
      return entityInfos.get(index);
    }
  }
);
  HSQuery hsQuery=mock(HSQuery.class);
  cache=mock(AdvancedCache.class);
  when(hsQuery.queryDocumentExtractor()).thenReturn(extractor);
  when(hsQuery.queryResultSize()).thenReturn(entityInfos.size());
  EagerIterator iterator=new EagerIterator(entityInfos,new EntityLoader(cache,new KeyTransformationHandler()),getFetchSize());
}
