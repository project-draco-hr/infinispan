{
  boolean doCommit=true;
  if (!dm.isLocal(entry.getKey()).isLocal()) {
    if (configuration.isL1CacheEnabled()) {
      dm.transformForL1(entry);
    }
 else {
      doCommit=false;
    }
  }
  if (doCommit)   entry.commit(dataContainer);
 else   entry.rollback();
}
