{
  BaseLockFactory baseLockFactory=BaseLockFactory.INSTANCE;
  Lock luceneLockA=baseLockFactory.makeLock(directory1,writeLockProvider);
  Lock luceneLockB=baseLockFactory.makeLock(directory1,writeLockProvider);
  Lock anotherLock=baseLockFactory.makeLock(directory3,writeLockProvider);
  assertTrue(luceneLockA.obtain());
  assertTrue(luceneLockB.isLocked());
  assertFalse(anotherLock.isLocked());
  assertFalse(luceneLockA.obtain());
  assertFalse(luceneLockB.obtain());
  luceneLockA.close();
  assertFalse(luceneLockB.isLocked());
  assertTrue(luceneLockB.obtain());
  luceneLockA.close();
  assertFalse(luceneLockB.isLocked());
}
