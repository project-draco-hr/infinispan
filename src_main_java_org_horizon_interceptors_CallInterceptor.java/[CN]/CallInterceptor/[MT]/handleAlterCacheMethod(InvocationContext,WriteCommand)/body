{
  Object result=invokeCommand(ctx,command);
  if (ctx.isValidTransaction()) {
    GlobalTransaction gtx=ctx.getGlobalTransaction();
    if (gtx == null) {
      if (log.isDebugEnabled()) {
        log.debug("didn't find GlobalTransaction for " + ctx.getTransaction() + "; won't add modification to transaction list");
      }
    }
 else {
      ctx.getTransactionContext().addModification(command);
    }
  }
  return result;
}
