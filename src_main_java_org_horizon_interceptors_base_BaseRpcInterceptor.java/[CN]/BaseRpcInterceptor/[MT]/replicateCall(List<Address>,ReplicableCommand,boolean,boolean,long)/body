{
  if (trace)   log.trace("Broadcasting call " + call + " to recipient list "+ recipients);
  if (!sync && replicationQueue != null) {
    if (log.isDebugEnabled())     log.debug("Putting call " + call + " on the replication queue.");
    replicationQueue.add(call);
  }
 else {
    List<Address> callRecipients=recipients;
    if (callRecipients == null) {
      callRecipients=null;
      if (trace)       log.trace("Setting call recipients to " + callRecipients + " since the original list of recipients passed in is null.");
    }
    ReplicateCommand command=commandsFactory.buildReplicateCommand(call);
    List rsps=rpcManager.invokeRemotely(callRecipients,command,sync ? ResponseMode.SYNCHRONOUS : ResponseMode.ASYNCHRONOUS,timeout,useOutOfBandMessage);
    if (trace)     log.trace("responses=" + rsps);
    if (sync)     checkResponses(rsps);
  }
}
