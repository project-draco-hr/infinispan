{
  final SyncForkSupport syncForkSupport=new SyncForkSupport(r);
  Thread t=new Thread(syncForkSupport);
  t.start();
  if (sync) {
    eventually(new Condition(){
      @Override public boolean isSatisfied() throws Exception {
        return syncForkSupport.done;
      }
    }
);
  }
}
