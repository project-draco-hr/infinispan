{
  ClassLoader existingCl=Thread.currentThread().getContextClassLoader();
  CacheManager dcm=null;
  Cache<Object,Object> sampleDistributedCache2=null;
  try {
    ClassLoader delegatingCl=new Jbc2InfinispanTransformerTest.TestClassLoader(existingCl);
    Thread.currentThread().setContextClassLoader(delegatingCl);
    String fileName=getFileName(coherenceFileName);
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    convertor.parse(fileName,baos,XSLT_FILE);
    dcm=TestCacheManagerFactory.fromStream(new ByteArrayInputStream(baos.toByteArray()),true);
    Cache<Object,Object> defaultCache=dcm.getCache();
    defaultCache.put("key","value");
  }
  finally {
    Thread.currentThread().setContextClassLoader(existingCl);
    TestingUtil.killCaches(sampleDistributedCache2);
    TestingUtil.killCacheManagers(dcm);
  }
}
