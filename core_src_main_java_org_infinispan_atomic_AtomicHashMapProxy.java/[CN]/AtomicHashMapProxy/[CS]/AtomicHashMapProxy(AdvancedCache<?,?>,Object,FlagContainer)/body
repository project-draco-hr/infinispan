{
  this.cache=(AdvancedCache<Object,AtomicMap<K,V>>)cache;
  Flag[] flags=new Flag[2];
  flags[0]=Flag.SKIP_REMOTE_LOOKUP;
  if (cache.getCacheConfiguration().loaders().passivation())   flags[1]=Flag.DELTA_WRITE;
 else   flags[1]=Flag.SKIP_CACHE_LOAD;
  this.cacheForWriting=this.cache.withFlags(flags);
  this.deltaMapKey=deltaMapKey;
  this.batchContainer=cache.getBatchContainer();
  this.flagContainer=flagContainer;
  transactionTable=cache.getComponentRegistry().getComponent(TransactionTable.class);
  transactionManager=cache.getTransactionManager();
}
