{
  CacheEntry cacheEntry=getFromContext(ctx,key);
  if (cacheEntry == null) {
    cacheEntry=getFromContainer(key);
    if (useRepeatableRead) {
      MVCCEntry mvccEntry=null;
      if (cacheEntry == null) {
        mvccEntry=createWrappedEntry(key,null,null,false,false,-1);
      }
 else {
        mvccEntry=createWrappedEntry(key,cacheEntry.getValue(),cacheEntry.getVersion(),false,false,cacheEntry.getLifespan());
        if (cacheEntry instanceof StateChangingEntry && mvccEntry != null)         mvccEntry.copyStateFlagsFrom((StateChangingEntry)cacheEntry);
      }
      if (mvccEntry != null)       ctx.putLookedUpEntry(key,mvccEntry);
      return mvccEntry;
    }
 else     if (cacheEntry != null) {
      ctx.putLookedUpEntry(key,cacheEntry);
    }
    return cacheEntry;
  }
  return cacheEntry;
}
