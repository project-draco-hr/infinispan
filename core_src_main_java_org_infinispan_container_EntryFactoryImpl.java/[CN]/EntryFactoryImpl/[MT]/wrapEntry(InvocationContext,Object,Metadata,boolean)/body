{
  CacheEntry cacheEntry=getFromContext(ctx,key);
  MVCCEntry mvccEntry=null;
  if (cacheEntry != null) {
    mvccEntry=wrapMvccEntryForPut(ctx,key,cacheEntry,providedMetadata,true);
  }
 else {
    InternalCacheEntry ice=getFromContainer(key,false);
    if (ice != null || clusterModeWriteSkewCheck) {
      mvccEntry=wrapInternalCacheEntryForPut(ctx,key,ice,providedMetadata,skipRead);
    }
  }
  if (mvccEntry != null)   mvccEntry.copyForUpdate(container);
  return mvccEntry;
}
