{
  Object value=cacheEntry != null ? cacheEntry.getValue() : null;
  Metadata metadata=providedMetadata != null ? providedMetadata : cacheEntry != null ? cacheEntry.getMetadata() : null;
  if (value == null && !isForInsert && !useRepeatableRead)   return null;
  return useRepeatableRead ? new RepeatableReadEntry(key,value,metadata) : new ReadCommittedEntry(key,value,metadata);
}
