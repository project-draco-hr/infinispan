{
  if (cache.getStatus().needToInitializeBeforeStart()) {
    if (log.isDebugEnabled())     log.debug("Cache not started.  Starting cache first.");
    cache.start();
  }
  checkInterceptorChain(cache);
  if (classes.length == 0) {
    throw new IllegalArgumentException("You haven't passed in any classes to index.");
  }
  validateClasses(classes);
  if (properties == null)   log.debug("Properties is null.");
  this.cache=cache;
  this.properties=properties;
  this.classes=classes;
  SearchConfiguration config=new SearchableCacheConfiguration(classes,properties);
  searchFactory=new SearchFactoryBuilder().configuration(config).buildSearchFactory();
  applyProperties(cache.getConfiguration());
}
