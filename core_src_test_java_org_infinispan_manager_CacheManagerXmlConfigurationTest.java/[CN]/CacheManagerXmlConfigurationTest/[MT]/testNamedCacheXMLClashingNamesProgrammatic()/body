{
  String xml=INFINISPAN_START_TAG + "\n" + "<global/>\n"+ "    <default>\n"+ "        <locking concurrencyLevel=\"100\" lockAcquisitionTimeout=\"1000\" />\n"+ "    </default>\n"+ "\n"+ "    <namedCache name=\"c1\">\n"+ "        <transaction transactionManagerLookupClass=\"org.infinispan.transaction.lookup.GenericTransactionManagerLookup\"/>\n"+ "    </namedCache>\n"+ INFINISPAN_END_TAG;
  ByteArrayInputStream bais=new ByteArrayInputStream(xml.getBytes());
  cm=TestCacheManagerFactory.fromStream(bais);
  assertNotNull(cm.getCache());
  assertNotNull(cm.getCache("c1"));
  Configuration c1Config=cm.getCache("c1").getCacheConfiguration();
  assertNotNull(c1Config);
  Configuration redefinedConfig=cm.defineConfiguration("c1",new ConfigurationBuilder().read(c1Config).build());
  assertEquals(c1Config,redefinedConfig);
}
