{
  Object comp;
  Marshaller configMarshaller=globalConfiguration.serialization().marshaller();
  boolean isVersionAwareMarshaller=configMarshaller instanceof VersionAwareMarshaller;
  if (isVersionAwareMarshaller) {
    if (componentName.equals(GLOBAL_MARSHALLER))     comp=new GlobalMarshaller((VersionAwareMarshaller)configMarshaller);
 else     if (componentName.equals(CACHE_MARSHALLER))     comp=new CacheMarshaller(new VersionAwareMarshaller());
 else     throw new CacheException("Don't know how to handle type " + componentType);
  }
 else {
    comp=configMarshaller;
  }
  try {
    return componentType.cast(comp);
  }
 catch (  Exception e) {
    throw new CacheException("Problems casting bootstrap component " + comp.getClass() + " to type "+ componentType,e);
  }
}
