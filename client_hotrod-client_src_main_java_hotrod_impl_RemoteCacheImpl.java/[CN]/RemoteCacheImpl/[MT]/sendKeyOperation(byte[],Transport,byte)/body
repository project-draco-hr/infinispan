{
  long messageId=writeHeader(transport,code);
  transport.writeByteArray(key);
  transport.flush();
  byte status=readHeaderAndValidate(transport,messageId,code);
  processResponseStatus(status,messageId);
  return status;
}
