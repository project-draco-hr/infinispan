{
  final int actualReplCount=Math.min(replCount,caches.size());
  final int normalizedHash=getNormalizedHash(getGrouping(key));
  final List<Address> owners=new ArrayList<Address>(actualReplCount);
  final boolean virtualNodesEnabled=isVirtualNodesEnabled();
  for (Iterator<Address> it=getPositionsIterator(normalizedHash); it.hasNext(); ) {
    Address a=it.next();
    if (!(virtualNodesEnabled && owners.contains(a))) {
      if (target != null && target.equals(a))       return null;
      owners.add(a);
      if (owners.size() >= actualReplCount)       return owners;
    }
  }
  return owners;
}
