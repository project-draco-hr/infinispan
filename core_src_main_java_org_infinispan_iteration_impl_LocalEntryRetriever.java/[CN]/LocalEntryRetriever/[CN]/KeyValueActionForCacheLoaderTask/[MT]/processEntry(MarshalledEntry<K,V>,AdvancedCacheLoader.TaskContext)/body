{
  if (!taskContext.isStopped()) {
    InternalMetadata metadata=marshalledEntry.getMetadata();
    if (metadata == null || !metadata.isExpired(timeService.wallClockTime())) {
      InternalCacheEntry<K,V> ice=PersistenceUtil.convert(marshalledEntry,entryFactory);
      action.accept(marshalledEntry.getKey(),ice);
    }
    if (Thread.interrupted()) {
      throw new InterruptedException();
    }
  }
}
