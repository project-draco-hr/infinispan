{
  if (flags == null || !flags.contains(Flag.CACHE_MODE_LOCAL)) {
    partitionListener.iterators.add(itr);
    if (partitionListener.currentMode != AvailabilityMode.AVAILABLE) {
      partitionListener.iterators.remove(itr);
      throw log.partitionDegraded();
    }
  }
}
