{
  Configuration configuration=getDefaultClusteredConfig(Configuration.CacheMode.DIST_SYNC,true);
  configuration.fluent().locking().useLockStriping(false);
  configuration.fluent().transaction().transactionManagerLookupClass(RecoveryDummyTransactionManagerLookup.class).recovery();
  configuration.fluent().clustering().hash().rehashEnabled(false);
  createCluster(configuration,2);
  waitForClusterToForm();
  ComponentRegistry componentRegistry=this.cache(0).getAdvancedCache().getComponentRegistry();
  XaTransactionTable txTable=(XaTransactionTable)componentRegistry.getComponent(TransactionTable.class);
  txTable.setRecoveryManager(new RecoveryManagerDelegate(txTable.getRecoveryManager()));
}
