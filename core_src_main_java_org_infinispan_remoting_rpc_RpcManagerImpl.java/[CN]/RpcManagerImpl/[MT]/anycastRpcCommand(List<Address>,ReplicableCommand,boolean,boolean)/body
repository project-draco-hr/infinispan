{
  if (trace) {
    log.trace("Broadcasting call " + rpc + " to recipient list "+ recipients);
  }
  if (useReplicationQueue(sync)) {
    replicationQueue.add(rpc);
  }
 else {
    if (!(rpc instanceof CacheRpcCommand)) {
      rpc=cf.buildSingleRpcCommand(rpc);
    }
    List rsps;
    try {
      rsps=invokeRemotely(recipients,rpc,getResponseMode(sync),configuration.getSyncReplTimeout(),usePriorityQueue);
      if (trace)       log.trace("responses=" + rsps);
      if (sync)       checkResponses(rsps);
    }
 catch (    CacheException e) {
      log.error("Replication exception",e);
      throw e;
    }
catch (    Exception ex) {
      log.error("Unexpected exception",ex);
      throw new ReplicationException("Unexpected exception while replicating",ex);
    }
  }
}
