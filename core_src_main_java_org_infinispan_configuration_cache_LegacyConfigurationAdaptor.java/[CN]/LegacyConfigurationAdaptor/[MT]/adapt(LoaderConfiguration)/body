{
  CacheLoaderConfig clc=null;
  if (loader instanceof LegacyLoaderAdapter<?>) {
    return ((LegacyLoaderAdapter<?>)loader).adapt();
  }
 else   if (loader instanceof StoreConfiguration) {
    if (loader instanceof LegacyStoreConfiguration) {
      LegacyStoreConfiguration store=(LegacyStoreConfiguration)loader;
      CacheLoader cacheStore=store.cacheStore();
      clc=getLoaderConfig(loader,cacheStore);
    }
    CacheStoreConfig csc=(CacheStoreConfig)clc;
    StoreConfiguration store=(StoreConfiguration)loader;
    adapt(store,csc);
  }
 else   if (loader instanceof LegacyLoaderConfiguration) {
    CacheLoader cacheLoader=((LegacyLoaderConfiguration)loader).cacheLoader();
    clc=getLoaderConfig(loader,cacheLoader);
  }
  if (clc instanceof AbstractCacheStoreConfig) {
    AbstractCacheStoreConfig acsc=(AbstractCacheStoreConfig)clc;
    Properties p=loader.properties();
    acsc.setProperties(p);
    if (p != null)     XmlConfigHelper.setValues(clc,p,false,true);
    if (loader instanceof LegacyStoreConfiguration)     acsc.purgerThreads(((LegacyStoreConfiguration)loader).purgerThreads());
  }
 else   if (clc instanceof CacheLoaderConfig) {
    Properties p=loader.properties();
    if (p != null)     XmlConfigHelper.setValues(clc,p,false,true);
  }
  return clc;
}
