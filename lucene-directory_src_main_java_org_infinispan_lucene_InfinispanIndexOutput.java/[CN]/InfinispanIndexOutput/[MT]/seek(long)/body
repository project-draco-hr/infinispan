{
  int requestedChunkNumber=getChunkNumberFromPosition(pos,bufferSize);
  if (pos > file.getSize()) {
    resizeFileIfNeeded();
    if (pos > file.getSize())     throw new IOException(fileKey.getFileName() + ": seeking past end of file");
  }
  if (requestedChunkNumber != currentChunkNumber) {
    storeCurrentBuffer();
    buffer=getChunkById(chunksCache,fileKey,requestedChunkNumber,bufferSize);
    currentChunkNumber=requestedChunkNumber;
  }
  positionInBuffer=getPositionInBuffer(pos,bufferSize);
  filePosition=pos;
}
