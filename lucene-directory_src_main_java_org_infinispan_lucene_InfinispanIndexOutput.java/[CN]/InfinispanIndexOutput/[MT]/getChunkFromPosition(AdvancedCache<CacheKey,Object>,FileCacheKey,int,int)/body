{
  CacheKey key=new ChunkCacheKey(fileKey.getIndexName(),fileKey.getFileName(),getChunkNumberFromPosition(pos,bufferSize));
  byte[] readBuffer=(byte[])cache.withFlags(Flag.SKIP_LOCKING).get(key);
  if (readBuffer == null) {
    return new byte[bufferSize];
  }
 else   if (readBuffer.length == bufferSize) {
    return readBuffer;
  }
 else {
    byte[] newBuffer=new byte[bufferSize];
    System.arraycopy(readBuffer,0,newBuffer,0,readBuffer.length);
    return newBuffer;
  }
}
