{
  if (configuration.getCacheMode() == Configuration.CacheMode.LOCAL && configuration.isWriteSkewCheck() && configuration.getIsolationLevel() == IsolationLevel.REPEATABLE_READ) {
    lockAcquisitionVisitor=new LocalWriteSkewCheckingLockAcquisitionVisitor();
    needToMarkReads=true;
  }
 else {
    lockAcquisitionVisitor=new LockAcquisitionVisitor();
    needToMarkReads=false;
  }
}
