{
  Object component=cr.getComponent(SearchIntegrator.class);
  SearchIntegrator searchFactory=null;
  if (component instanceof SearchIntegrator) {
    searchFactory=(SearchIntegrator)component;
  }
  if (searchFactory == null) {
    GlobalComponentRegistry globalComponentRegistry=cr.getGlobalComponentRegistry();
    EmbeddedCacheManager uninitializedCacheManager=globalComponentRegistry.getComponent(EmbeddedCacheManager.class);
    indexingProperties=addProgrammaticMappings(indexingProperties,cr);
    SearchConfiguration config=new SearchableCacheConfiguration(new Class[0],indexingProperties,uninitializedCacheManager,cr);
    searchFactory=new SearchFactoryBuilder().configuration(config).buildSearchFactory();
    cr.registerComponent(searchFactory,SearchIntegrator.class);
  }
  return searchFactory;
}
