{
  Object component=cr.getComponent(SearchFactoryIntegrator.class);
  SearchFactoryIntegrator searchFactory=null;
  if (component instanceof SearchFactoryIntegrator) {
    searchFactory=(SearchFactoryIntegrator)component;
  }
  if (searchFactory == null) {
    GlobalComponentRegistry globalComponentRegistry=cr.getGlobalComponentRegistry();
    EmbeddedCacheManager uninitializedCacheManager=globalComponentRegistry.getComponent(EmbeddedCacheManager.class);
    SearchConfiguration config=new SearchableCacheConfiguration(new Class[0],indexingProperties,uninitializedCacheManager,cr);
    searchFactory=new SearchFactoryBuilder().configuration(config).buildSearchFactory();
    cr.registerComponent(searchFactory,SearchFactoryIntegrator.class);
  }
  return searchFactory;
}
