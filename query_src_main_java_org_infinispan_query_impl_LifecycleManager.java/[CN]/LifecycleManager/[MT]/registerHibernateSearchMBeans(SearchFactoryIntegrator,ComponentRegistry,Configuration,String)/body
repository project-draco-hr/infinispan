{
  GlobalConfiguration globalCfg=cr.getGlobalComponentRegistry().getGlobalConfiguration();
  mbeanServer=JmxUtil.lookupMBeanServer(globalCfg);
  String queryStatsGroupName="type=Query,name=" + ObjectName.quote(cacheName) + ",component=Statistics";
  String jmxDomain=JmxUtil.buildJmxDomain(globalCfg,mbeanServer,queryStatsGroupName);
  Statistics stats=sf.getStatistics();
  stats.setStatisticsEnabled(cfg.jmxStatistics().enabled());
  try {
    statsObjName=new ObjectName(jmxDomain + ":" + queryStatsGroupName);
    JmxUtil.registerMBean(new StatisticsInfo(stats),statsObjName,mbeanServer);
  }
 catch (  Exception e) {
    throw new CacheException("Unable to register query module statistics mbean",e);
  }
}
