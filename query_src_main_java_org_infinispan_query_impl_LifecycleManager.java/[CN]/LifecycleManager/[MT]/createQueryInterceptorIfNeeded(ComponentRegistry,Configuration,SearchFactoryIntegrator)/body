{
  QueryInterceptor queryInterceptor=cr.getComponent(QueryInterceptor.class);
  if (queryInterceptor == null) {
    queryInterceptor=buildQueryInterceptor(cfg,searchFactory);
    cr.registerComponent(queryInterceptor,QueryInterceptor.class);
    CustomInterceptorPosition customInterceptorPosition=cfg.fluent().customInterceptors().add(queryInterceptor);
    if (cfg.getCacheMode().isDistributed()) {
      customInterceptorPosition.after(DistLockingInterceptor.class);
    }
 else {
      customInterceptorPosition.after(LockingInterceptor.class);
    }
  }
}
