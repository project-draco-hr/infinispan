{
  if (defaultSynchronous) {
    RpcOptionsBuilder builder=rpcManager.getRpcOptionsBuilder(ResponseMode.SYNCHRONOUS_IGNORE_LEAVERS,DeliverOrder.TOTAL);
    if (responseFilter != null) {
      builder.responseFilter(responseFilter);
    }
    Map<Address,Response> responseMap=rpcManager.invokeRemotely(recipients,prepareCommand,builder.build());
    if (responseFilter != null) {
      responseFilter.validate();
    }
    return responseMap;
  }
 else {
    RpcOptionsBuilder builder=rpcManager.getRpcOptionsBuilder(ResponseMode.ASYNCHRONOUS,DeliverOrder.TOTAL);
    return rpcManager.invokeRemotely(recipients,prepareCommand,builder.build());
  }
}
