{
  CacheViewInfo cacheViewInfo=viewsInfo.get(cacheName);
  final List<Address> validTargets=new ArrayList<Address>(targets);
  validTargets.removeAll(cacheViewInfo.getPendingChanges().getLeavers());
  log.tracef("%s: Committing cache view %d on members %s",cacheName,viewId,targets);
  try {
    final CacheViewControlCommand cmd=new CacheViewControlCommand(cacheName,CacheViewControlCommand.Type.COMMIT_VIEW,self,viewId);
    Map<Address,Response> rspList=transport.invokeRemotely(validTargets,cmd,ResponseMode.SYNCHRONOUS_IGNORE_LEAVERS,timeout,false,null,false);
    checkRemoteResponse(cacheName,cmd,rspList);
  }
 catch (  Exception e) {
    log.cacheViewCommitFailure(e,cacheName,viewId);
  }
  if (includeCoordinator || validTargets.contains(self)) {
    handleCommitView(cacheName,viewId);
  }
}
