{
  CacheViewInfo cacheViewInfo=viewsInfo.get(cacheName);
  final List<Address> validTargets=new ArrayList<Address>(targets);
  validTargets.removeAll(cacheViewInfo.getPendingChanges().getLeavers());
  log.tracef("%s: Committing cache view %d on members %s",cacheName,viewId,targets);
  try {
    final CacheViewControlCommand cmd=new CacheViewControlCommand(cacheName,CacheViewControlCommand.Type.COMMIT_VIEW,self,viewId);
    Map<Address,Response> rspList=transport.invokeRemotely(validTargets,cmd,ResponseMode.SYNCHRONOUS_IGNORE_LEAVERS,timeout,false,null);
    checkRemoteResponse(cacheName,cmd,rspList);
  }
 catch (  Throwable t) {
    log.cacheViewCommitFailure(t,viewId,cacheName);
  }
  if (includeCoordinator || validTargets.contains(self)) {
    try {
      handleCommitView(cacheName,viewId);
    }
 catch (    Throwable t) {
      log.cacheViewCommitFailure(t,viewId,cacheName);
    }
  }
}
