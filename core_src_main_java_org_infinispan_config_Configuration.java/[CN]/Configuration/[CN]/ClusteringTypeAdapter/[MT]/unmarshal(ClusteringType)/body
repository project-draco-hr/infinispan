{
  if (ct.stringMode != null) {
    String mode=ct.stringMode.toLowerCase();
    if (mode.startsWith("r")) {
      if (ct.isSynchronous())       ct.setMode(REPL_SYNC);
 else       ct.setMode(REPL_ASYNC);
    }
 else     if (mode.startsWith("i")) {
      if (ct.isSynchronous())       ct.setMode(INVALIDATION_SYNC);
 else       ct.setMode(INVALIDATION_ASYNC);
    }
 else     if (mode.startsWith("d")) {
      if (ct.isSynchronous())       ct.setMode(DIST_SYNC);
 else       ct.setMode(DIST_ASYNC);
    }
 else     if (mode.startsWith("l")) {
      ct.setMode(LOCAL);
    }
 else {
      throw new CacheConfigurationException("Invalid clustering mode " + ct.stringMode);
    }
  }
  return ct;
}
