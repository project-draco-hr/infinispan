{
  if (ct.stringMode != null) {
    String mode=ct.stringMode.toLowerCase();
    if (mode.startsWith("r")) {
      if (ct.isSynchronous())       ct.setMode(CacheMode.REPL_SYNC);
 else       ct.setMode(CacheMode.REPL_ASYNC);
    }
 else     if (mode.startsWith("i")) {
      if (ct.isSynchronous())       ct.setMode(CacheMode.INVALIDATION_SYNC);
 else       ct.setMode(CacheMode.INVALIDATION_ASYNC);
    }
 else     if (mode.startsWith("d")) {
      if (ct.isSynchronous())       ct.setMode(CacheMode.DIST_SYNC);
 else       ct.setMode(CacheMode.DIST_ASYNC);
    }
 else {
      throw new ConfigurationException("Invalid clustering mode" + ct.stringMode);
    }
  }
  return ct;
}
