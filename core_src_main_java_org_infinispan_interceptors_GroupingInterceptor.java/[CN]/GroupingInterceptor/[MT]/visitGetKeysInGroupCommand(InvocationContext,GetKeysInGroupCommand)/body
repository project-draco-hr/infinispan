{
  final String groupName=command.getGroupName();
  command.setGroupOwner(isGroupOwner(groupName));
  if (!command.isGroupOwner() || !isPassivationEnabled) {
    Object result=invokeNextInterceptor(ctx,command);
    if (result instanceof List) {
      filter((List<CacheEntry>)result);
    }
    return result;
  }
  KeyListener listener=new KeyListener(groupName,groupManager,factory);
  cacheNotifier.addListener(listener);
  try {
    Object result=invokeNextInterceptor(ctx,command);
    if (result instanceof List) {
      ((List)result).addAll(listener.activatedKeys);
      filter((List<CacheEntry>)result);
    }
 else     if (result instanceof Map) {
      for (      CacheEntry entry : listener.activatedKeys) {
        ((Map)result).put(entry.getKey(),entry.getValue());
      }
    }
    return result;
  }
  finally {
    cacheNotifier.removeListener(listener);
  }
}
