{
  if (cache == null) {
    throw new NullPointerException("Cache cannot be null!");
  }
  if (filter == null) {
    throw new NullPointerException("Filter cannot be null!");
  }
  this.filter=filter;
  this.converter=converter;
  AdvancedCache<K,V> advancedCache=cache.getAdvancedCache();
  if (flags != null) {
    this.cache=advancedCache.withFlags(flags.toArray(new Flag[flags.size()]));
  }
 else {
    this.cache=advancedCache;
  }
}
