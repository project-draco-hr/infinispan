{
  Stream<CacheEntry<K,C>> resultingStream;
  if (filter instanceof KeyValueFilterConverter && (filter == converter || converter == null)) {
    resultingStream=CacheFilters.filterAndConvert(stream,(KeyValueFilterConverter)filter);
  }
 else {
    if (filter != null) {
      stream=stream.filter(CacheFilters.predicate(filter));
    }
    if (converter != null) {
      resultingStream=stream.map(CacheFilters.function(converter));
    }
 else {
      resultingStream=(Stream)stream;
    }
  }
  return resultingStream;
}
