{
  String fullPathKey=fullPathKey("y");
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  ObjectOutputStream oo=new ObjectOutputStream(bout);
  Integer i1=42;
  oo.writeObject(i1);
  oo.flush();
  byte[] byteData=bout.toByteArray();
  put(fullPathKey,byteData,"application/x-java-serialized-object");
  HttpResponse resp=get(fullPathKey,null,HttpServletResponse.SC_OK,false,"Accept","application/x-java-serialized-object");
  int respLength=new Long(resp.getEntity().getContentLength()).intValue();
  byte[] bytesBack=new byte[respLength];
  resp.getEntity().getContent().read(bytesBack,0,respLength);
  EntityUtils.consume(resp.getEntity());
  assertEquals(byteData.length,bytesBack.length);
  ObjectInputStream oin=new ObjectInputStream(new ByteArrayInputStream(bytesBack));
  Integer i2=(Integer)oin.readObject();
  assertEquals(i1,i2);
}
