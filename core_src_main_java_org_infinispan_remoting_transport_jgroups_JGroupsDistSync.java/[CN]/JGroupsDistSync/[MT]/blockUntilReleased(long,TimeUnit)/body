{
  int initState=flushBlockGateCount.get();
  try {
    if (!flushBlockGate.await(timeout,timeUnit))     throw new TimeoutException("Timed out waiting for a cluster-wide sync to be released. (timeout = " + prettyPrintTime(timeout) + ")");
  }
 catch (  InterruptedException ie) {
    currentThread().interrupt();
  }
  return initState == flushWaitGateCount.get() ? SyncResponse.STATE_PREEXISTED : SyncResponse.STATE_ACHIEVED;
}
