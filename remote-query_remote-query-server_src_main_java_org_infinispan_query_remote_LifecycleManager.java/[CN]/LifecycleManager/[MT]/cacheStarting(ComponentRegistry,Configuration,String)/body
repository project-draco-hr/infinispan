{
  if (!cacheName.equals(ProtobufMetadataManager.PROTOBUF_METADATA_CACHE_NAME)) {
    ProtobufMetadataManager protobufMetadataManager=cr.getGlobalComponentRegistry().getComponent(ProtobufMetadataManager.class);
    protobufMetadataManager.getCache();
    cr.registerComponent(new ProtobufMatcher(protobufMetadataManager.getSerializationContext()),ProtobufMatcher.class);
    if (cfg.compatibility().enabled()) {
      cr.registerComponent(new CompatibilityReflectionMatcher(protobufMetadataManager.getSerializationContext()),CompatibilityReflectionMatcher.class);
    }
    if (cfg.indexing().index().isEnabled() && !cfg.compatibility().enabled()) {
      log.infof("Registering RemoteValueWrapperInterceptor for cache %s",cacheName);
      createRemoteValueWrapperInterceptor(cr,cfg);
    }
  }
}
