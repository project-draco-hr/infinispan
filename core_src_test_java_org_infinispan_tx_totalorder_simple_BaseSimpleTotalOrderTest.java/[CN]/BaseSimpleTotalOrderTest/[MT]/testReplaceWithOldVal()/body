{
  preCheckBeforeTest(KEY_1);
  cache(index1).put(KEY_1,VALUE_1);
  assertTransactionSeenByEverybody(index1,true,KEY_1);
  assertCacheValue(KEY_1,VALUE_1);
  cache(index1).put(KEY_1,VALUE_2);
  assertTransactionSeenByEverybody(index1,true,KEY_1);
  assertCacheValue(KEY_1,VALUE_2);
  assertEquals(cache(index1).replace(KEY_1,VALUE_1),VALUE_2);
  assertTransactionSeenByEverybody(index1,true,KEY_1);
  assertCacheValue(KEY_1,VALUE_1);
  cache(index1).put(KEY_1,VALUE_3);
  assertTransactionSeenByEverybody(index1,true,KEY_1);
  assertCacheValue(KEY_1,VALUE_3);
  assertEquals(cache(index2).replace(KEY_1,VALUE_1),VALUE_3);
  assertTransactionSeenByEverybody(index2,true,KEY_1);
  assertCacheValue(KEY_1,VALUE_1);
  assertNoTransactions();
}
