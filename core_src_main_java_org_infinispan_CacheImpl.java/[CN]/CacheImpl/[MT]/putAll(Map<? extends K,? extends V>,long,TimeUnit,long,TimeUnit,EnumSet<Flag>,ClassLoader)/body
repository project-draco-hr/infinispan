{
  assertKeysNotNull(map);
  InvocationContext ctx=getInvocationContextWithImplicitTransaction(explicitFlags,explicitClassLoader,map.size());
  PutMapCommand command=commandsFactory.buildPutMapCommand(map,lifespanUnit.toMillis(lifespan),idleTimeUnit.toMillis(maxIdleTime),ctx.getFlags());
  executeCommandAndCommitIfNeeded(ctx,command);
}
