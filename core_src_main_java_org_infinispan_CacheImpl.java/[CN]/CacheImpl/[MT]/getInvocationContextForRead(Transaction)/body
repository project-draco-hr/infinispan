{
  if (config.isTransactionalCache()) {
    Transaction transaction=tx == null ? getOngoingTransaction() : tx;
    if (transaction != null)     return getInvocationContext(transaction);
  }
  InvocationContext result=icc.createInvocationContext(false);
  setInvocationContextFlags(result);
  return result;
}
