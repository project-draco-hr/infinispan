{
  if (!config.transaction().transactionMode().isTransactional())   throw new UnsupportedOperationException("Calling lock() on non-transactional caches is not allowed");
  if (keys == null || keys.isEmpty()) {
    throw new IllegalArgumentException("Cannot lock empty list of keys");
  }
  InvocationContext ctx=getInvocationContextForWrite(explicitFlags,explicitClassLoader,UNBOUNDED,false);
  LockControlCommand command=commandsFactory.buildLockControlCommand((Collection<Object>)keys,ctx.getFlags());
  return (Boolean)invoker.invoke(ctx,command);
}
