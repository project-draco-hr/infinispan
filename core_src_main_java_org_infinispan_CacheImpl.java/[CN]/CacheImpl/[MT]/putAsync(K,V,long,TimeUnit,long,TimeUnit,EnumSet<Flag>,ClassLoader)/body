{
  final NotifyingFutureAdaptor<V> result=new NotifyingFutureAdaptor<V>();
  final InvocationContext ctx=getInvocationContextWithImplicitTransactionForAsyncOps(false,explicitClassLoader,1);
  Future<V> returnValue=asyncExecutor.submit(new Callable<V>(){
    @Override public V call() throws Exception {
      try {
        associateImplicitTransactionWithCurrentThread(ctx);
        return putInternal(key,value,lifespan,lifespanUnit,maxIdle,maxIdleUnit,explicitFlags,ctx);
      }
  finally {
        try {
          result.notifyDone();
          log.trace("Finished notifying");
        }
 catch (        Throwable e) {
          log.trace("Exception while notifying the future",e);
        }
      }
    }
  }
);
  result.setActual(returnValue);
  return result;
}
