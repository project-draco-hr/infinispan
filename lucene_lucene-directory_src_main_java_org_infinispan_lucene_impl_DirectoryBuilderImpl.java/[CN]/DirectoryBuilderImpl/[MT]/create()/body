{
  if (lockFactory == null) {
    lockFactory=makeDefaultLockFactory(distLocksCache,indexName);
  }
  if (srl == null) {
    srl=makeDefaultSegmentReadLocker(metadataCache,chunksCache,distLocksCache,indexName);
  }
  return new InfinispanDirectory(metadataCache,chunksCache,indexName,lockFactory,chunkSize,srl);
}
