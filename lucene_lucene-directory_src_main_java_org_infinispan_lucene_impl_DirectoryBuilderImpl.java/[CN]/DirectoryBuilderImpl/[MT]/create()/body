{
  if (lockFactory == null) {
    lockFactory=makeDefaultLockFactory(distLocksCache,indexName);
  }
  if (srl == null) {
    srl=makeDefaultSegmentReadLocker(metadataCache,chunksCache,distLocksCache,indexName);
  }
  if (deleteExecutor == null) {
    deleteExecutor=new WithinThreadExecutor();
  }
  return new DirectoryLuceneV4(metadataCache,chunksCache,indexName,lockFactory,chunkSize,srl,writeFileListAsync,deleteExecutor);
}
