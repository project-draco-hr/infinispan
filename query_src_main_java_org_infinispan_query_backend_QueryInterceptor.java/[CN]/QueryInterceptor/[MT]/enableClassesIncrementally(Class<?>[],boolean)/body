{
  ArrayList<Class<?>> toAdd=null;
  for (  Class<?> type : classes) {
    if (!knownClasses.containsKey(type)) {
      if (toAdd == null)       toAdd=new ArrayList<Class<?>>(classes.length);
      toAdd.add(type);
    }
  }
  if (toAdd == null) {
    return;
  }
  if (locked) {
    Class[] array=toAdd.toArray(new Class[toAdd.size()]);
    final Transaction transaction=suspend();
    try {
      searchFactory.addClasses(array);
    }
  finally {
      resume(transaction);
    }
    for (    Class<?> type : toAdd) {
      knownClasses.put(type,isIndexed(type));
    }
  }
 else {
    mutating.lock();
    try {
      enableClassesIncrementally(classes,true);
    }
  finally {
      mutating.unlock();
    }
  }
}
