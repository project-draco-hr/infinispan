{
  ArrayList<Class<?>> toAdd=null;
  for (  Class<?> type : classes) {
    if (!clusterRegistry.containsKey(knownClassesScope,type)) {
      if (toAdd == null)       toAdd=new ArrayList<Class<?>>(classes.length);
      toAdd.add(type);
    }
  }
  if (toAdd == null) {
    return;
  }
  if (locked) {
    final Transaction transaction=suspend();
    try {
      boolean isStatisticsEnabled=searchFactory.getStatistics().isStatisticsEnabled();
      searchFactory.addClasses(toAdd.toArray(new Class[toAdd.size()]));
      searchFactory.getStatistics().setStatisticsEnabled(isStatisticsEnabled);
    }
  finally {
      resume(transaction);
    }
    for (    Class<?> type : toAdd) {
      clusterRegistry.put(knownClassesScope,type,isIndexed(type));
    }
  }
 else {
    mutating.lock();
    try {
      enableClassesIncrementally(classes,true);
    }
  finally {
      mutating.unlock();
    }
  }
}
