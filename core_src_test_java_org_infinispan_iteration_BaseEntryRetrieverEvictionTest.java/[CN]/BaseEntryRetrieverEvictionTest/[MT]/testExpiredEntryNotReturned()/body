{
  Cache<Object,String> cache=cache(0,CACHE_NAME);
  Map<Object,String> valuesInserted=new LinkedHashMap<Object,String>();
  for (int i=0; i < 5; ++i) {
    Object key=i;
    String value=key + " stay in cache";
    cache.put(key,value);
    valuesInserted.put(key,value);
  }
  int expectedTime=2;
  long beforeInsert=System.nanoTime();
  cache.put("expired","this shouldn't be returned",expectedTime,TimeUnit.SECONDS);
  waitUntil(beforeInsert + TimeUnit.SECONDS.toNanos(2) + 50);
  cache.getAdvancedCache().filterEntries(new KeyFilterAsKeyValueFilter<Object,String>(new CollectionKeyFilter<>(Collections.emptySet())));
  Map<Object,String> results;
  try (EntryIterable<Object,String> iterable=cache.getAdvancedCache().filterEntries(new KeyFilterAsKeyValueFilter<Object,String>(new CollectionKeyFilter<>(Collections.emptySet())))){
    results=mapFromIterable(iterable);
  }
   assertEquals(valuesInserted,results);
}
