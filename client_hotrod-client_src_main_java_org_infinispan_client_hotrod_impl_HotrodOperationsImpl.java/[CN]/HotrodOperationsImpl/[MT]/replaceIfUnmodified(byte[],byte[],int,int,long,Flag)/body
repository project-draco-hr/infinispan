{
  Transport transport=getTransport();
  try {
    long messageId=writeHeader(transport,REPLACE_IF_UNMODIFIED_REQUEST,flags);
    transport.writeByteArray(key);
    transport.writeVInt(lifespan);
    transport.writeVInt(maxIdle);
    transport.writeVLong(version);
    transport.writeByteArray(value);
    return returnVersionedOperationResponse(transport,messageId,flags);
  }
  finally {
    releaseTransport(transport);
  }
}
