{
  Transport transport=getTransport();
  try {
    long messageId=writeHeader(transport,REPLACE_IF_UNMODIFIED_REQUEST,flags);
    transport.writeArray(key);
    transport.writeVInt(lifespan);
    transport.writeVInt(maxIdle);
    transport.writeLong(version);
    transport.writeArray(value);
    return returnVersionedOperationResponse(transport,messageId,REPLACE_IF_UNMODIFIED_RESPONSE,flags);
  }
  finally {
    releaseTransport(transport);
  }
}
