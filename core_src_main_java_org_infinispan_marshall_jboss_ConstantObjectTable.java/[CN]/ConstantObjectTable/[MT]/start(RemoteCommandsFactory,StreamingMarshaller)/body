{
  HashSet<Integer> ids=new HashSet<Integer>();
  for (  Map.Entry<String,String> entry : JDK_EXTERNALIZERS.entrySet()) {
    try {
      Class clazz=Util.loadClassStrict(entry.getKey());
      Externalizer ext=null;
      ext=(Externalizer)Util.getInstanceStrict(entry.getValue());
      Marshallable marshallable=ReflectionUtil.getAnnotation(ext.getClass(),Marshallable.class);
      int id=marshallable.id();
      ids.add(id);
      ExternalizerAdapter adapter=new ExternalizerAdapter(id,ext);
      writers.put(clazz,adapter);
      readers.put(id,adapter);
    }
 catch (    Exception e) {
      if (log.isDebugEnabled()) {
        log.debug("Unable to load class {0}",e.getMessage());
      }
    }
  }
  for (  String marshallableClass : MARSHALLABLES) {
    try {
      Class clazz=Util.loadClassStrict(marshallableClass);
      Marshallable marshallable=ReflectionUtil.getAnnotation(clazz,Marshallable.class);
      if (marshallable != null && !marshallable.externalizer().equals(Externalizer.class)) {
        int id=marshallable.id();
        Externalizer ext=null;
        ext=Util.getInstance(marshallable.externalizer());
        if (!ids.add(id))         throw new CacheException("Duplicate id found! id=" + id + " in "+ ext.getClass().getName()+ " is shared by another marshallable class.");
        if (ext instanceof ReplicableCommandExternalizer) {
          ((ReplicableCommandExternalizer)ext).inject(cmdFactory);
        }
        if (ext instanceof MarshalledValue.Externalizer) {
          ((MarshalledValue.Externalizer)ext).inject(ispnMarshaller);
        }
        ExternalizerAdapter adapter=new ExternalizerAdapter(id,ext);
        writers.put(clazz,adapter);
        readers.put(id,adapter);
      }
    }
 catch (    ClassNotFoundException e) {
      if (!marshallableClass.startsWith("org.infinispan")) {
        if (log.isDebugEnabled())         log.debug("Unable to load class {0}",e.getMessage());
      }
    }
  }
  started=true;
  if (log.isTraceEnabled())   log.trace("Constant object table was started and contains these externalizer readers: {0}",readers);
}
