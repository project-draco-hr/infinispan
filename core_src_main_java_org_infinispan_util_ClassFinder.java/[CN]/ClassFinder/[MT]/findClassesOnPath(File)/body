{
  List<Class<?>> classes=new ArrayList<Class<?>>();
  Class<?> claz=null;
  if (path.isDirectory()) {
    List<File> classFiles=new ArrayList<File>();
    dir(classFiles,path);
    for (    File cf : classFiles) {
      try {
        claz=Util.loadClass(toClassName(cf.getAbsolutePath().toString()));
        classes.add(claz);
      }
 catch (      Throwable e) {
        log.warn("Could not load class " + cf.getAbsolutePath().toString());
      }
    }
  }
 else {
    if (path.isFile() && path.getName().endsWith("jar") && path.canRead()) {
      JarFile jar=null;
      try {
        jar=new JarFile(path);
      }
 catch (      Exception ex) {
        log.warn("Could not create jar file on path " + path);
        return classes;
      }
      Enumeration<JarEntry> en=jar.entries();
      while (en.hasMoreElements()) {
        JarEntry entry=en.nextElement();
        if (entry.getName().endsWith("class")) {
          try {
            claz=Util.loadClass(toClassName(entry.getName()));
            classes.add(claz);
          }
 catch (          Throwable e) {
            log.warn("Could not load class " + entry.getName());
          }
        }
      }
    }
  }
  return classes;
}
