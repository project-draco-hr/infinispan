{
  List<File> files=new ArrayList<File>();
  String javaClassPath=System.getProperty("java.class.path") + File.pathSeparator + System.getProperty("surefire.test.class.path");
  for (  String path : javaClassPath.split(File.pathSeparator)) {
    if ((path.contains("infinispan") && path.endsWith("jar")) || !path.endsWith("jar")) {
      files.add(new File(path));
    }
  }
  if (files.isEmpty())   return Collections.emptyList();
 else   if (files.size() == 1)   return findClassesOnPath(files.get(0));
 else {
    Set<Class<?>> classFiles=new HashSet<Class<?>>();
    for (    File file : files) {
      classFiles.addAll(findClassesOnPath(file));
    }
    return new ArrayList<Class<?>>(classFiles);
  }
}
