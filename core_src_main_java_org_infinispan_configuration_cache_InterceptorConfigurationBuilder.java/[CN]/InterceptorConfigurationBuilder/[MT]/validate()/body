{
  int positions=0;
  if (!attributes.attribute(BEFORE).isNull())   positions++;
  if (!attributes.attribute(AFTER).isNull())   positions++;
  if (attributes.attribute(INDEX).get() > -1)   positions++;
  if (attributes.attribute(POSITION).isModified())   positions++;
  CommandInterceptor interceptor=attributes.attribute(INTERCEPTOR).get();
switch (positions) {
case 0:
    throw log.missingCustomInterceptorPosition(interceptor.getClass().getName());
case 1:
  break;
default :
throw log.multipleCustomInterceptorPositions(interceptor.getClass().getName());
}
if (interceptor == null) {
throw log.customInterceptorMissingClass();
}
 else if (!(interceptor instanceof BaseCustomInterceptor)) {
final String className=interceptor.getClass().getName();
if (!className.startsWith("org.infinispan.")) {
log.suggestCustomInterceptorInheritance(className);
}
}
}
