{
  verifyRebalanceWith3rdNode();
  setAttribute(provider(0),LOCAL_TOPOLOGY_MANAGER,REBALANCE_ENABLED_ATTR_NAME,false);
  controller.stop(CONTAINER3);
  checkRpcManagerStatistics(new String[]{"null",OWNERS_2_MEMBERS_NODE0_NODE1},OWNERS_2_MEMBERS_NODE0_NODE1,provider(0),provider(1));
  Thread.sleep(5000);
  checkRebalanceStatus(false,provider(0),provider(1));
  assertTrue(server(0).getCacheManager(getCacheManagerName()).getCache(getCacheName()).getNumberOfEntries() < 100);
  assertTrue(server(1).getCacheManager(getCacheManagerName()).getCache(getCacheName()).getNumberOfEntries() < 100);
  setAttribute(provider(1),LOCAL_TOPOLOGY_MANAGER,REBALANCE_ENABLED_ATTR_NAME,true);
  checkRebalanceStatus(true,provider(0),provider(1));
  checkRpcManagerStatistics(new String[]{"null",OWNERS_2_MEMBERS_NODE0_NODE1},OWNERS_2_MEMBERS_NODE0_NODE1,provider(0),provider(1));
  assertTrue(server(0).getCacheManager(getCacheManagerName()).getCache(getCacheName()).getNumberOfEntries() == 100);
  assertTrue(server(1).getCacheManager(getCacheManagerName()).getCache(getCacheName()).getNumberOfEntries() == 100);
}
