{
  if (trace) {
    log.tracef("Transaction.commit() invoked in transaction with Xid=%s",xid);
  }
  checkDone("Cannot commit transaction.");
  runPrepare();
  runCommit(false);
  if (firstRollbackException != null) {
    throw firstRollbackException;
  }
}
