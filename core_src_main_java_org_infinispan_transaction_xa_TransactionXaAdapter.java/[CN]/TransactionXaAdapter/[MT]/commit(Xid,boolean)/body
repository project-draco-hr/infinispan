{
  Xid xid=convertXid(externalXid);
  LocalXaTransaction localTransaction=getLocalTransactionAndValidate(xid);
  if (trace)   log.tracef("Committing transaction %s",localTransaction.getGlobalTransaction());
  txCoordinator.commit(localTransaction,isOnePhase);
  forgetSuccessfullyCompletedTransaction(recoveryManager,xid,localTransaction);
}
