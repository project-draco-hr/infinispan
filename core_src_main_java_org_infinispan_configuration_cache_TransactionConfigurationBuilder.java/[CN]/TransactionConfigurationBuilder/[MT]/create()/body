{
  if (useEagerLocking) {
    lockingMode=LockingMode.PESSIMISTIC;
  }
  if (transactionMode == null && getBuilder().invocationBatching().enabled)   transactionMode=TransactionMode.TRANSACTIONAL;
 else   if (transactionMode == null)   transactionMode=TransactionMode.NON_TRANSACTIONAL;
  return new TransactionConfiguration(autoCommit,cacheStopTimeout,eagerLockingSingleNode,lockingMode,syncCommitPhase,syncRollbackPhase,transactionManagerLookup,transactionSynchronizationRegistryLookup,transactionMode,useEagerLocking,useSynchronization,use1PcForAutoCommitTransactions,recovery.create());
}
