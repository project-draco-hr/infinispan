{
  Object returnValue=invokeNextInterceptor(ctx,command);
  if (!isSingleOwnerAndLocal(rg)) {
    List<Address> recipients=rg.generateRecipients();
    if (!command.isSuccessful() && recipients.contains(rpcManager.getAddress())) {
      log.tracef("Skipping remote invocation as the command hasn't executed correctly on owner %s",rpcManager.getAddress());
    }
 else {
      Map<Address,Response> responseMap=rpcManager.invokeRemotely(recipients,command,rpcManager.getDefaultRpcOptions(sync));
      if (sync && !recipients.isEmpty()) {
        Address primaryOwner=recipients.get(0);
        if (!primaryOwner.equals(rpcManager.getAddress())) {
          returnValue=getResponseFromPrimaryOwner(primaryOwner,responseMap);
        }
      }
    }
  }
  return returnValue;
}
