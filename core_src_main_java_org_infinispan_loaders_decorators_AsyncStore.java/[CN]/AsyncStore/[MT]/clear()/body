{
  stateLock.writeLock(1);
  try {
    state=newState(true,state.next);
  }
  finally {
    stateLock.reset(1);
    stateLock.writeUnlock();
  }
}
