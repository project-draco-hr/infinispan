{
  try {
    if (stopped.get()) {
      throw new CacheException("AsyncStore stopped; no longer accepting more entries.");
    }
    if (trace)     log.trace("Enqueuing modification {0}",mod);
    Modification prev=null;
    int c=-1;
    boolean unlock=false;
    try {
      acquireLock(read);
      unlock=true;
      prev=state.put(key,mod);
    }
  finally {
      if (unlock)       read.unlock();
    }
    if (prev == null)     c=count.getAndIncrement();
    if (c == 0)     signalNotEmpty();
  }
 catch (  Exception e) {
    throw new CacheException("Unable to enqueue asynchronous task",e);
  }
}
