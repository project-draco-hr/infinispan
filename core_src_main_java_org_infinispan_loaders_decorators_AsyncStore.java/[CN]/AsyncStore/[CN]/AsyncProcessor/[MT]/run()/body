{
  while (!Thread.interrupted() && !stopped.get()) {
    try {
      run0();
    }
 catch (    InterruptedException e) {
      break;
    }
  }
  try {
    if (trace)     log.trace("Process remaining batch {0}",swap.size());
    put(swap);
    if (trace)     log.trace("Process remaining queued {0}",state.size());
    while (!state.isEmpty())     run0();
  }
 catch (  InterruptedException e) {
    if (trace)     log.trace("Remaining interrupted");
  }
}
