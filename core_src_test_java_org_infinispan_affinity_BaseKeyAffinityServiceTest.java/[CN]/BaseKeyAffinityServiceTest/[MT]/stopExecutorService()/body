{
  keyAffinityService.stop();
  executor.shutdown();
  boolean terminatedGracefully=executor.awaitTermination(100,TimeUnit.MILLISECONDS);
  if (!terminatedGracefully) {
    executor.shutdownNow();
    Assert.fail("KeyGenerator Executor not terminated in expected time");
  }
}
