{
  InterceptorChain chain=TestingUtil.extractComponent(injectInCache,InterceptorChain.class);
  List<CommandInterceptor> list=chain.getInterceptorsWhichExtend(CacheWriterInterceptor.class);
  if (list.isEmpty()) {
    list=chain.getInterceptorsWhichExtend(CacheLoaderInterceptor.class);
  }
  if (list.isEmpty()) {
    throw new IllegalStateException("Should not happen!");
  }
  injectInCache.getAdvancedCache().addInterceptorAfter(this,list.get(0).getClass());
  return this;
}
