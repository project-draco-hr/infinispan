{
  if (defaultSynchronous) {
    RpcOptionsBuilder builder=rpcManager.getRpcOptionsBuilder(ResponseMode.SYNCHRONOUS_IGNORE_LEAVERS,false);
    if (responseFilter != null) {
      builder.responseFilter(responseFilter);
    }
 else {
      builder.responseFilter(getIgnoreExtraResponseFilter(recipients));
    }
    builder.totalOrder(true);
    return rpcManager.invokeRemotely(recipients,prepareCommand,builder.build());
  }
 else {
    RpcOptionsBuilder builder=rpcManager.getRpcOptionsBuilder(ResponseMode.getAsyncResponseMode(cacheConfiguration),false);
    builder.totalOrder(true);
    return rpcManager.invokeRemotely(recipients,prepareCommand,builder.build());
  }
}
