{
  Object retVal=invokeNextInterceptor(ctx,command);
  if (ctx.isOriginLocal()) {
    boolean sync=!command.isUnlock();
    command.setFlags(ctx.getFlags());
    ((LocalTxInvocationContext)ctx).remoteLocksAcquired(rpcManager.getTransport().getMembers());
    ctx.addAffectedKeys(command.getKeys());
    rpcManager.broadcastRpcCommand(command,sync,false);
  }
  return retVal;
}
