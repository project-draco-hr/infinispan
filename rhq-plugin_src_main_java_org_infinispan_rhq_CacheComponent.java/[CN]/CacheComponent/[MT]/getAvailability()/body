{
  boolean trace=log.isTraceEnabled();
  EmsConnection conn=getConnection();
  try {
    conn.refresh();
    EmsBean bean=queryCacheBean();
    if (bean != null && bean.getAttribute("CacheStatus").getValue().equals(ComponentStatus.RUNNING.toString())) {
      bean.refreshAttributes();
      if (trace)       log.tracef("Cache %s within %s cache manager is running and attributes could be refreshed, so it's up.",cacheName,cacheManagerName);
      return AvailabilityType.UP;
    }
    if (trace)     log.tracef("Cache status for %s within %s cache manager is anything other than running, so it's down.",cacheName,cacheManagerName);
    return AvailabilityType.DOWN;
  }
 catch (  Exception e) {
    if (trace)     log.trace("There was an exception checking availability, so cache status is down.",e);
    return AvailabilityType.DOWN;
  }
}
