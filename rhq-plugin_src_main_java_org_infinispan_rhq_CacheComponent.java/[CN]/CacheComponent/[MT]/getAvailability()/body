{
  boolean trace=log.isTraceEnabled();
  EmsConnection conn=getConnection();
  try {
    conn.refresh();
    EmsBean bean=queryCacheBean();
    if (bean != null && bean.getAttribute("CacheStatus").getValue().equals("RUNNING")) {
      bean.refreshAttributes();
      if (trace)       log.trace("Cache " + cacheName + " within "+ cacheManagerName+ " cache manager is running and attributes could be refreshed, so it's up.");
      return AvailabilityType.UP;
    }
    if (trace)     log.trace("Cache status for " + cacheName + " within "+ cacheManagerName+ " cache manager is anything other than running, so it's down.");
    return AvailabilityType.DOWN;
  }
 catch (  Exception e) {
    if (trace)     log.trace("There was an exception checking availability, so cache status is down.",e);
    return AvailabilityType.DOWN;
  }
}
