{
  boolean trace=log.isTraceEnabled();
  EmsBean bean=getEmsBean();
  try {
    if (bean != null) {
      bean.refreshAttributes(AVAILABILITY_ATTRIBUTE);
      if ("RUNNING".equals(bean.getAttribute(STATUS_ATTRIBUTE_NAME).getValue())) {
        if (trace)         log.trace("Cache " + cacheName + " within "+ cacheManagerName+ " cache manager is running, so it's up.");
        return AvailabilityType.UP;
      }
    }
    if (trace)     log.trace("Cache status for " + cacheName + " within "+ cacheManagerName+ " cache manager is anything other than running, so it's down.");
    return AvailabilityType.DOWN;
  }
 catch (  Exception e) {
    if (trace)     log.trace("There was an exception checking availability, so cache status is down.",e);
    return AvailabilityType.DOWN;
  }
}
