{
  try {
    if (b.getEntries().isEmpty()) {
      map.remove(b.getBucketName());
    }
 else {
      ((S3InputStreamMap)map).putBytes(b.getBucketName(),connection.marshaller.objectToByteBuffer(b));
    }
  }
 catch (  Exception ex) {
    throw connection.convertToS3ConnectionException("Exception while saving bucket " + b,ex);
  }
}
