{
  String cacheName="my-cache";
  Configuration config=new ConfigurationBuilder().clustering().cacheMode(CacheMode.DIST_SYNC).hash().numOwners(3).numVirtualNodes(51).build();
  GlobalConfiguration globalConfig=GlobalConfigurationBuilder.defaultClusteredBuilder().build();
  EmbeddedCacheManager cm=new DefaultCacheManager(globalConfig);
  cm.defineConfiguration(cacheName,config);
  Cache<?,?> cache=cm.getCache(cacheName);
  Assert.assertEquals(cache.getCacheConfiguration().clustering().cacheMode(),CacheMode.DIST_SYNC);
  Assert.assertEquals(cache.getCacheConfiguration().clustering().hash().numOwners(),3);
  Assert.assertEquals(cache.getCacheConfiguration().clustering().hash().numVirtualNodes(),51);
}
