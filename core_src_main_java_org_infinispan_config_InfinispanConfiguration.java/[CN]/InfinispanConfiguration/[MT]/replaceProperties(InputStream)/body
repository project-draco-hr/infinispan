{
  BufferedReader br=new BufferedReader(new InputStreamReader(config));
  StringBuilder w=new StringBuilder();
  String line;
  while ((line=br.readLine()) != null) {
    int dollar=line.indexOf('$');
    if (dollar > 0 && line.indexOf('{',dollar) > 0 && line.indexOf('}',dollar) > 0) {
      String replacedLine=StringPropertyReplacer.replaceProperties(line);
      w.append(replacedLine);
    }
 else {
      w.append(line);
    }
  }
  return new StreamSource(new StringReader(w.toString()));
}
