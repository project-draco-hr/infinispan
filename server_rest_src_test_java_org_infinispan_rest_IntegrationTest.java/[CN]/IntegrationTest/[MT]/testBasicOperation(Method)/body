{
  String fullPathKey=fullPath + "/" + m.getName();
  PutMethod insert=new PutMethod(fullPathKey);
  String initialXML="<hey>ho</hey>";
  insert.setRequestEntity(new ByteArrayRequestEntity(initialXML.getBytes(),"application/octet-stream"));
  call(insert);
  assertEquals("",insert.getResponseBodyAsString().trim());
  assertEquals(HttpServletResponse.SC_OK,insert.getStatusCode());
  GetMethod get=new GetMethod(fullPathKey);
  call(get);
  byte[] bytes=get.getResponseBody();
  assertEquals(bytes.length,initialXML.getBytes().length);
  assertEquals(initialXML,get.getResponseBodyAsString());
  Header hdr=get.getResponseHeader("Content-Type");
  assertEquals("application/octet-stream",hdr.getValue());
  DeleteMethod remove=new DeleteMethod(fullPathKey);
  call(remove);
  call(get);
  assertEquals(HttpServletResponse.SC_NOT_FOUND,get.getStatusCode());
  call(insert);
  call(get);
  assertEquals(initialXML,get.getResponseBodyAsString());
  DeleteMethod removeAll=new DeleteMethod(fullPath);
  assertEquals(HttpServletResponse.SC_OK,call(removeAll).getStatusCode());
  call(get);
  assertEquals(HttpServletResponse.SC_NOT_FOUND,get.getStatusCode());
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  ObjectOutputStream oo=new ObjectOutputStream(bout);
  oo.writeObject(new MIMECacheEntry("foo","hey".getBytes()));
  oo.flush();
  byte[] byteData=bout.toByteArray();
  PutMethod insertMore=new PutMethod(fullPathKey);
  insertMore.setRequestEntity(new ByteArrayRequestEntity(byteData,"application/octet-stream"));
  call(insertMore);
  GetMethod getMore=new GetMethod(fullPathKey);
  call(getMore);
  byte[] bytesBack=getMore.getResponseBody();
  assertEquals(byteData.length,bytesBack.length);
  ObjectInputStream oin=new ObjectInputStream(new ByteArrayInputStream(bytesBack));
  MIMECacheEntry ce=(MIMECacheEntry)oin.readObject();
  assertEquals("foo",ce.contentType);
}
