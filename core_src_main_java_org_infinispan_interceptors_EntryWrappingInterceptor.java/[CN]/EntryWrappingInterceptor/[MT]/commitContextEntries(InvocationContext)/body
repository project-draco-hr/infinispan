{
  Set<Map.Entry<Object,CacheEntry>> entries=ctx.getLookedUpEntries().entrySet();
  Iterator<Map.Entry<Object,CacheEntry>> it=entries.iterator();
  final Log log=getLog();
  final boolean trace=log.isTraceEnabled();
  if (trace)   log.tracef("Number of entries in context: %s",entries.size());
  while (it.hasNext()) {
    Map.Entry<Object,CacheEntry> e=it.next();
    CacheEntry entry=e.getValue();
    if (entry != null && entry.isChanged()) {
      commitContextEntry(entry,ctx,ctx.hasFlag(Flag.SKIP_OWNERSHIP_CHECK));
      if (trace)       log.tracef("Committed entry %s",entry);
    }
 else {
      if (trace) {
        if (entry == null)         log.tracef("Entry for key %s is null : not calling commitUpdate",e.getKey());
 else         log.tracef("Entry for key %s is not changed(%s): not calling commitUpdate",e.getKey(),entry);
      }
    }
  }
}
