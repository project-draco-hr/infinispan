{
  if (enabled) {
    for (    InternalCacheEntry entry : entries) {
      Object key=entry.getKey();
      notifier.notifyCacheEntryPassivated(key,entry.getValue(),true,ctx);
      boolean locked=false;
      try {
        locked=acquireLock(ctx,key);
      }
 catch (      Exception e) {
        log.couldNotAcquireLockForEviction(key,e);
      }
      try {
        if (trace)         log.tracef("Passivating entry %s",key);
        cacheStore.store(entry);
        if (statsEnabled && entry.getValue() != null) {
          passivations.getAndIncrement();
        }
        notifier.notifyCacheEntryPassivated(key,null,false,ctx);
      }
 catch (      CacheLoaderException e) {
        log.unableToPassivateEntry(key,e);
      }
 finally {
        if (locked) {
          lockManager.unlock(key);
        }
      }
    }
  }
}
