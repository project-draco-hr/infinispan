{
  EnvironmentConfig envConfig=environmentProperties == null ? new EnvironmentConfig() : new EnvironmentConfig(environmentProperties);
  envConfig.setAllowCreate(true);
  envConfig.setTransactional(true);
  envConfig.setLockTimeout(config.getLockAcquistionTimeout(),TimeUnit.MILLISECONDS);
  if (trace)   log.tracef("opening or creating je environment at %s",envLocation);
  Environment env=new Environment(envLocation,envConfig);
  log.debugf("opened je environment at %s",envLocation);
  return env;
}
