{
  EmbeddedCacheManager cm=cache(addresses[4]).getCacheManager();
  log.info("Here is where ST starts");
  TestingUtil.killCacheManagers(cm);
  cacheManagers.remove(cm);
  BaseDistFunctionalTest.RehashWaiter.waitForRehashToComplete(cache(addresses[0]),cache(addresses[1]),cache(addresses[2]),cache(addresses[3]));
  log.info("Here is where ST ends");
  Set<Address> addressList=cache(addresses[0]).getAdvancedCache().getDistributionManager().getConsistentHash().getCaches();
  log.debug("After shutting down " + addresses[4] + " caches are "+ addressList);
  log.debug(TestingUtil.printCache(cache(addresses[0])));
  log.debug(TestingUtil.printCache(cache(addresses[1])));
  log.debug(TestingUtil.printCache(cache(addresses[2])));
  log.debug(TestingUtil.printCache(cache(addresses[3])));
  assertExistence(addresses[0]);
  assertExistence(addresses[1]);
  assertExistence(addresses[2]);
  assertExistence(addresses[3]);
  assertExistence(addresses[4]);
}
