{
  if (AutoInstantiableFactory.class.isAssignableFrom(factory)) {
    try {
      return factory.newInstance();
    }
 catch (    Exception e) {
      throw new ConfigurationException("Unable to instantiate factory " + factory + "  Debug stack: "+ debugStack,e);
    }
  }
 else {
    throw new ConfigurationException("Cannot auto-instantiate factory " + factory + " as it doesn't implement "+ AutoInstantiableFactory.class.getSimpleName()+ "!  Debug stack: "+ debugStack);
  }
}
