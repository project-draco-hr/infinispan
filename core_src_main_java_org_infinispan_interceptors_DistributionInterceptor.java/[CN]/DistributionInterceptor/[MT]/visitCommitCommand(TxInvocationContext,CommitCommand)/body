{
  if (shouldInvokeRemoteTxCommand(ctx)) {
    Collection<Address> preparedOn=((LocalTxInvocationContext)ctx).getRemoteLocksAcquired();
    Future<?> f=flushL1Caches(ctx);
    sendCommitCommand(ctx,command,preparedOn);
    blockOnL1FutureIfNeeded(f);
  }
 else   if (isL1CacheEnabled && !ctx.isOriginLocal() && !ctx.getLockedKeys().isEmpty()) {
    blockOnL1FutureIfNeeded(flushL1Caches(ctx));
  }
  return invokeNextInterceptor(ctx,command);
}
