{
  try {
    for (    InternalCacheEntry ice : dataContainer) {
      Object key=ice.getKey();
      int segmentId=readCh.getSegment(key);
      if (segments.contains(segmentId)) {
        sendEntry(ice,segmentId);
      }
    }
    CacheStore cacheStore=getCacheStore();
    if (cacheStore != null) {
      try {
        Set<Object> storedKeys=cacheStore.loadAllKeys(new ReadOnlyDataContainerBackedKeySet(dataContainer));
        for (        Object key : storedKeys) {
          int segmentId=readCh.getSegment(key);
          if (segments.contains(segmentId)) {
            try {
              InternalCacheEntry ice=cacheStore.load(key);
              if (ice != null) {
                sendEntry(ice,segmentId);
              }
            }
 catch (            CacheLoaderException e) {
              log.failedLoadingValueFromCacheStore(key,e);
            }
          }
        }
      }
 catch (      CacheLoaderException e) {
        log.failedLoadingKeysFromCacheStore(e);
      }
    }
 else {
      if (trace) {
        log.tracef("No cache store or the cache store is shared, no need to send any stored cache entries for segments: %s",segments);
      }
    }
    sendEntries(true);
  }
 catch (  Throwable t) {
    if (!runnableFuture.isCancelled()) {
      log.error("Failed to execute outbound transfer",t);
    }
  }
  if (trace) {
    log.tracef("Outbound transfer of segments %s of cache %s to node %s is complete",segments,cacheName,destination);
  }
}
