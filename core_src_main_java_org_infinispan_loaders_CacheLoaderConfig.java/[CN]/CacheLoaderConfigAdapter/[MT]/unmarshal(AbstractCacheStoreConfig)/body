{
  String clClass=storeConfig.getCacheLoaderClassName();
  if (clClass == null || clClass.length() == 0)   throw new ConfigurationException("Missing 'class'  attribute for cache loader configuration");
  CacheLoaderConfig clc;
  try {
    clc=instantiateCacheLoaderConfig(clClass,Thread.currentThread().getContextClassLoader());
  }
 catch (  Exception e) {
    throw new ConfigurationException("Unable to instantiate cache loader or configuration",e);
  }
  clc.setCacheLoaderClassName(clClass);
  Properties props=storeConfig.getProperties();
  if (props != null)   XmlConfigHelper.setValues(clc,props,false,true);
  if (clc instanceof CacheStoreConfig) {
    CacheStoreConfig csc=(CacheStoreConfig)clc;
    csc.setFetchPersistentState(storeConfig.isFetchPersistentState());
    csc.setIgnoreModifications(storeConfig.isIgnoreModifications());
    csc.setPurgeOnStartup(storeConfig.isPurgeOnStartup());
    csc.setPurgeSynchronously(storeConfig.isPurgeSynchronously());
    csc.setSingletonStoreConfig(storeConfig.getSingletonStoreConfig());
    csc.setAsyncStoreConfig(storeConfig.getAsyncStoreConfig());
  }
  return clc;
}
