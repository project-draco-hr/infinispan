{
  try {
    BeanManager bm=CDIHelper.getBeanManager();
    if (bm == null)     return;
    Class<Mapper<KIn,VIn,KOut,VOut>> clazz=(Class<Mapper<KIn,VIn,KOut,VOut>>)mapper.getClass();
    AnnotatedType<Mapper<KIn,VIn,KOut,VOut>> type=bm.createAnnotatedType(clazz);
    InjectionTarget<Mapper<KIn,VIn,KOut,VOut>> it=bm.createInjectionTarget(type);
    it.preDestroy(mapper);
    it.dispose(mapper);
  }
  finally {
    ContextInputCache.clean();
  }
}
