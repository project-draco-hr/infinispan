{
  Lock lock=getLock(key);
  boolean locked=false;
  try {
    locked=lock.tryLock(timeout,unit);
  }
 catch (  InterruptedException ie) {
    safeRelease(lock);
    throw ie;
  }
catch (  Throwable th) {
    safeRelease(lock);
    locked=false;
  }
  return locked ? lock : null;
}
