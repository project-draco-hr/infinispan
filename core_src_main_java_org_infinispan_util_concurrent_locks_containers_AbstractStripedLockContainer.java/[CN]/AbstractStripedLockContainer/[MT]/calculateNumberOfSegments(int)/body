{
  int tempLockSegShift=0;
  int numLocks=1;
  while (numLocks < concurrencyLevel) {
    ++tempLockSegShift;
    numLocks<<=1;
  }
  lockSegmentShift=32 - tempLockSegShift;
  lockSegmentMask=numLocks - 1;
  return numLocks;
}
