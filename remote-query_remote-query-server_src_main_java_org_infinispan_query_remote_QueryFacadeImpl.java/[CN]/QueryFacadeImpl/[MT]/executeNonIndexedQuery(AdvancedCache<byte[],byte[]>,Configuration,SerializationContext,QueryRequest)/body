{
  final boolean isIndexed=cacheConfiguration.indexing().index().isEnabled();
  final boolean isCompatMode=cacheConfiguration.compatibility().enabled();
  EmbeddedQuery eq=new EmbeddedQuery(null,cache,makeFilter(cache,isIndexed,isCompatMode,request.getJpqlString()),request.getStartOffset(),request.getMaxResults());
  List<?> list=eq.list();
  int projSize=eq.getProjection() != null && eq.getProjection().length > 0 ? eq.getProjection().length : 0;
  return makeResponse(isCompatMode,serCtx,list,projSize,eq.getResultSize(),list.size());
}
