{
  return SecurityActions.doPrivileged(new PrivilegedAction<JPAFilterAndConverter>(){
    @Override public JPAFilterAndConverter run(){
      JPAFilterAndConverter filter=isIndexed && !isCompatMode ? new JPAProtobufFilterAndConverter(jpaQuery) : new JPAFilterAndConverter(jpaQuery,isCompatMode ? CompatibilityReflectionMatcher.class : ProtobufMatcher.class);
      filter.injectDependencies(cache);
      filter.getObjectFilter();
      return filter;
    }
  }
);
}
