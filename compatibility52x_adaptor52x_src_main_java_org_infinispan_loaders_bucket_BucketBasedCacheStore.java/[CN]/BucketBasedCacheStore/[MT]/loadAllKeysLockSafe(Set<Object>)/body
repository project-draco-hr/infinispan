{
  CollectionGeneratingBucketHandler<Object> g=new CollectionGeneratingBucketHandler<Object>(){
    @Override public boolean consider(    Collection<? extends InternalCacheEntry> entries){
      for (      InternalCacheEntry ice : entries) {
        if (keysToExclude == null || !keysToExclude.contains(ice.getKey())) {
          generated.add(ice.getKey());
        }
      }
      return false;
    }
  }
;
  loopOverBuckets(g);
  return g.generate();
}
