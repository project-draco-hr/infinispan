{
  ConsistentHash ch=createConsistentHash();
  generateRandomPersistentUUIDs(ch.getMembers());
  ScopedPersistentState state=new ScopedPersistentStateImpl("scope");
  ch.toScopedState(state);
  ConsistentHashFactory<?> hashFactory=createConsistentHashFactory();
  ConsistentHash restoredCH=hashFactory.fromPersistentState(state);
  assertEquals(ch,restoredCH);
}
