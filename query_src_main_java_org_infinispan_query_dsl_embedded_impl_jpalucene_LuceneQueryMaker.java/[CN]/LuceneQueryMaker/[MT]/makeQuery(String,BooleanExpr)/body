{
  Class<?> targetedType=entityNamesResolver.getClassFromName(entityType);
  if (targetedType == null) {
    throw new IllegalStateException("Unknown entity name " + entityType);
  }
  this.entityType=entityType;
  queryBuilder=queryContextBuilder.forEntity(targetedType).get();
  return expr == null ? queryBuilder.all().createQuery() : expr.acceptVisitor(this);
}
