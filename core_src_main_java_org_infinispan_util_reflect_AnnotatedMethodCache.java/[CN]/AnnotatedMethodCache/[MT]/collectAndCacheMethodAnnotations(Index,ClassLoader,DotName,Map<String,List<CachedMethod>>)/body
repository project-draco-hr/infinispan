{
  for (  AnnotationInstance ai : annotationIndex.getAnnotations(annotationType)) {
    if (ai.target() instanceof MethodInfo) {
      MethodInfo methodInfo=(MethodInfo)ai.target();
      ClassInfo classInfo=methodInfo.declaringClass();
      String clazz=classInfo.name().toString();
      List<CachedMethod> methodList=targetCache.get(clazz);
      if (methodList == null) {
        methodList=new LinkedList<CachedMethod>();
        targetCache.put(clazz,methodList);
      }
      try {
        methodList.add(new CachedMethod(ai,classLoader,methodInfo));
      }
 catch (      Exception e) {
        log.fatal("Caught exception scanning annotations on " + methodInfo,e);
      }
    }
  }
}
