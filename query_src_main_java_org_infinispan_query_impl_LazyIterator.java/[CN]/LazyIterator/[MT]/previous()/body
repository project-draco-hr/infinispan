{
  if (!hasPrevious())   throw new IndexOutOfBoundsException("Index is out of bounds. There is no previous");
  Object toReturn=null;
  int bufferSize=buffer.length;
  if (bufferIndex >= 0 && index <= bufferIndex && index >= (bufferIndex + bufferSize)) {
    int indexToReturn=bufferIndex - index;
    toReturn=buffer[indexToReturn];
  }
  try {
    KeyTransformationHandler keyTransformationHandler=KeyTransformationHandler.getInstance(cache);
    Arrays.fill(buffer,null);
    String documentId=(String)extractor.extract(index).getId();
    toReturn=cache.get(keyTransformationHandler.stringToKey(documentId,cache.getClassLoader()));
    buffer[0]=toReturn;
    for (int i=1; i < bufferSize; i++) {
      String bufferDocumentId=(String)extractor.extract(index - i).getId();
      Object toBuffer=cache.get(keyTransformationHandler.stringToKey(bufferDocumentId,cache.getClassLoader()));
      buffer[i]=toBuffer;
    }
    bufferIndex=index;
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  index--;
  return toReturn;
}
