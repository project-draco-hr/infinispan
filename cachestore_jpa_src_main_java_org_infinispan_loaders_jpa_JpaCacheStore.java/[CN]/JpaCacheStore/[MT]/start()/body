{
  super.start();
  try {
    this.emf=this.emfRegistry.getEntityManagerFactory(config.getPersistenceUnitName());
  }
 catch (  PersistenceException e) {
    throw new JpaCacheLoaderException("Persistence Unit [" + this.config.getPersistenceUnitName() + "] not found",e);
  }
  ManagedType<?> mt;
  try {
    mt=emf.getMetamodel().entity(this.config.getEntityClass());
  }
 catch (  IllegalArgumentException e) {
    throw new JpaCacheLoaderException("Entity class [" + this.config.getEntityClassName() + " specified in configuration is not recognized by the EntityManagerFactory with Persistence Unit ["+ this.config.getPersistenceUnitName()+ "]",e);
  }
  if (!(mt instanceof IdentifiableType)) {
    throw new JpaCacheLoaderException("Entity class must have one and only one identifier (@Id or @EmbeddedId)");
  }
  IdentifiableType<?> it=(IdentifiableType<?>)mt;
  if (!it.hasSingleIdAttribute()) {
    throw new JpaCacheLoaderException("Entity class has more than one identifier.  It must have only one identifier.");
  }
  Type<?> idType=it.getIdType();
  Class<?> idJavaType=idType.getJavaType();
  if (idJavaType.isAnnotationPresent(GeneratedValue.class)) {
    throw new JpaCacheLoaderException("Entity class has one identifier, but it must not have @GeneratedValue annotation");
  }
}
