{
  int size;
  try {
    size=socket.getInputStream().read(bufferToFill);
  }
 catch (  IOException e) {
    throw new TransportException(e);
  }
  if (size == -1) {
    throw new RuntimeException("End of stream reached!");
  }
  if (size != bufferToFill.length) {
    throw new TransportException("Expected " + bufferToFill.length + " bytes but only could read "+ size+ " bytes!");
  }
  return bufferToFill;
}
